ARM GAS  /tmp/ccMJVeMK.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 2
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"stm32f1xx_hal_spi.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.SPI_AbortRx_ISR,"ax",%progbits
  16              		.align	1
  17              		.p2align 2,,3
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	SPI_AbortRx_ISR:
  24              	.LFB116:
  25              		.file 1 "drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c"
   1:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
   2:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   ******************************************************************************
   3:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @file    stm32f1xx_hal_spi.c
   4:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @author  MCD Application Team
   5:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @version V1.1.1
   6:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @date    12-May-2017
   7:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief   SPI HAL module driver.
   8:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *          This file provides firmware functions to manage the following
   9:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *          functionalities of the Serial Peripheral Interface (SPI) peripheral:
  10:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           + Initialization and de-initialization functions
  11:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           + IO operation functions
  12:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           + Peripheral Control functions
  13:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           + Peripheral State functions
  14:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *
  15:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   @verbatim
  16:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   ==============================================================================
  17:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                         ##### How to use this driver #####
  18:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   ==============================================================================
  19:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     [..]
  20:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       The SPI HAL driver can be used as follows:
  21:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  22:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) Declare a SPI_HandleTypeDef handle structure, for example:
  23:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           SPI_HandleTypeDef  hspi;
  24:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  25:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#)Initialize the SPI low level resources by implementing the HAL_SPI_MspInit() API:
  26:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) Enable the SPIx interface clock
  27:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) SPI pins configuration
  28:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Enable the clock for the SPI GPIOs
  29:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Configure these SPI pins as alternate function push-pull
  30:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) NVIC configuration if you need to use interrupt process
  31:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Configure the SPIx interrupt priority
  32:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Enable the NVIC SPI IRQ handle
  33:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) DMA Configuration if you need to use DMA process
ARM GAS  /tmp/ccMJVeMK.s 			page 2


  34:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Declare a DMA_HandleTypeDef handle structure for the transmit or receive Channe
  35:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Enable the DMAx clock
  36:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Configure the DMA handle parameters 
  37:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Configure the DMA Tx or Rx Channel
  38:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Associate the initilalized hdma_tx(or _rx) handle to the hspi DMA Tx (or Rx) ha
  39:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               (+++) Configure the priority and enable the NVIC for the transfer complete interrupt 
  40:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  41:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) Program the Mode, BidirectionalMode , Data size, Baudrate Prescaler, NSS
  42:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           management, Clock polarity and phase, FirstBit and CRC configuration in the hspi Init str
  43:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  44:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) Initialize the SPI registers by calling the HAL_SPI_Init() API:
  45:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (++) This API configures also the low level Hardware GPIO, CLOCK, CORTEX...etc)
  46:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               by calling the customized HAL_SPI_MspInit() API.
  47:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      [..]
  48:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        Circular mode restriction:
  49:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) The DMA circular mode cannot be used when the SPI is configured in these modes:
  50:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) Master 2Lines RxOnly
  51:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) Master 1Line Rx
  52:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) The CRC feature is not managed when the DMA circular mode is enabled
  53:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) When the SPI DMA Pause/Stop features are used, we must use the following APIs
  54:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           the HAL_SPI_DMAPause()/ HAL_SPI_DMAStop() only under the SPI callbacks
  55:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      [..]
  56:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        Master Receive mode restriction:
  57:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (#) In Master unidirectional receive-only mode (MSTR =1, BIDIMODE=0, RXONLY=0) or
  58:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           bidirectional receive mode (MSTR=1, BIDIMODE=1, BIDIOE=0), to ensure that the SPI
  59:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           does not initiate a new transfer the following procedure has to be respected:
  60:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) HAL_SPI_DeInit()
  61:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           (##) HAL_SPI_Init()
  62:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  63:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   @endverbatim
  64:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  65:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     Using the HAL it is not possible to reach all supported SPI frequency with the differents SPI M
  66:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     the following tables resume the max SPI frequency reached with data size 8bits/16bits,
  67:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     according to frequency used on APBx Peripheral Clock (fPCLK) used by the SPI instance :
  68:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     
  69:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    DataSize = SPI_DATASIZE_8BIT:
  70:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    +-----------------------------------------------------------------------------------------------
  71:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |                | 2Lines Fullduplex     |     2Lines RxOnly     |        1Line       
  72:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    | Process | Tranfert mode  |-----------------------|-----------------------|--------------------
  73:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |                |  Master   |  Slave    |  Master   |  Slave    |  Master   |  Slave 
  74:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |===============================================================================================
  75:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    T    |     Polling    |  fPCLK/2  | fPCLK/16  |    NA     |    NA     |    NA     |    NA  
  76:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |----------------|-----------|-----------|-----------|-----------|-----------|--------
  77:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    /    |     Interrupt  |  fPCLK/8  | fPCLK/32  |    NA     |    NA     |    NA     |    NA  
  78:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    R    |----------------|-----------|-----------|-----------|-----------|-----------|--------
  79:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |       DMA      |  fPCLK/2  | fPCLK/4   |    NA     |    NA     |    NA     |    NA  
  80:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |=========|================|===========|===========|===========|===========|===========|========
  81:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |     Polling    |  fPCLK/4  | fPCLK/8   | fPCLK/8   | fPCLK/16  | fPCLK/64  | fPCLK/2
  82:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |----------------|-----------|-----------|-----------|-----------|-----------|--------
  83:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    R    |     Interrupt  |  fPCLK/8  | fPCLK/16  | fPCLK/32  | fPCLK/16  | fPCLK/64  | fPCLK/4
  84:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |----------------|-----------|-----------|-----------|-----------|-----------|--------
  85:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |       DMA      |  fPCLK/2  | fPCLK/16  | fPCLK/8   | fPCLK/16  | fPCLK/64  | fPCLK/2
  86:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |=========|================|===========|===========|===========|===========|===========|========
  87:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |     Polling    |  fPCLK/2  |  fPCLK/2  |    NA     |    NA     |  fPCLK/2  | fPCLK/3
  88:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |----------------|-----------|-----------|-----------|-----------|-----------|--------
  89:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    T    |     Interrupt  |  fPCLK/8  | fPCLK/16  |    NA     |    NA     |  fPCLK/2  | fPCLK/6
  90:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |----------------|-----------|-----------|-----------|-----------|-----------|--------
ARM GAS  /tmp/ccMJVeMK.s 			page 3


  91:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |       DMA      |  fPCLK/2  |  fPCLK/4  |    NA     |    NA     |  fPCLK/2  | fPCLK/3
  92:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    +-----------------------------------------------------------------------------------------------
  93:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
  94:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    DataSize = SPI_DATASIZE_16BIT:
  95:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    +-----------------------------------------------------------------------------------------------
  96:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |                | 2Lines Fullduplex     |     2Lines RxOnly     |        1Line       
  97:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    | Process | Tranfert mode  |-----------------------|-----------------------|--------------------
  98:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |                |  Master   |  Slave    |  Master   |  Slave    |  Master   |  Slave 
  99:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |===============================================================================================
 100:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    T    |     Polling    |  fPCLK/4  | fPCLK/4   |    NA     |    NA     |    NA     |    NA  
 101:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |----------------|-----------|-----------|-----------|-----------|-----------|--------
 102:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    /    |     Interrupt  |  fPCLK/8  | fPCLK/16  |    NA     |    NA     |    NA     |    NA  
 103:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    R    |----------------|-----------|-----------|-----------|-----------|-----------|--------
 104:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |       DMA      |  fPCLK/2  | fPCLK/4   |    NA     |    NA     |    NA     |    NA  
 105:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |=========|================|===========|===========|===========|===========|===========|========
 106:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |     Polling    |  fPCLK/4  |  fPCLK/8  | fPCLK/4   | fPCLK/8   | fPCLK/64  | fPCLK/2
 107:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |----------------|-----------|-----------|-----------|-----------|-----------|--------
 108:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    R    |     Interrupt  |  fPCLK/8  |  fPCLK/8  | fPCLK/128 | fPCLK/8   | fPCLK/128 | fPCLK/4
 109:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |----------------|-----------|-----------|-----------|-----------|-----------|--------
 110:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |       DMA      |  fPCLK/2  |  fPCLK/2  | fPCLK/128 | fPCLK/16  | fPCLK/64  | fPCLK/2
 111:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |=========|================|===========|===========|===========|===========|===========|========
 112:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |     Polling    |  fPCLK/2  |  fPCLK/4  |    NA     |    NA     |  fPCLK/4  | fPCLK/8
 113:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |----------------|-----------|-----------|-----------|-----------|-----------|--------
 114:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    T    |     Interrupt  |  fPCLK/4  |  fPCLK/8  |    NA     |    NA     |  fPCLK/4  | fPCLK/4
 115:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |    X    |----------------|-----------|-----------|-----------|-----------|-----------|--------
 116:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    |         |       DMA      |  fPCLK/2  |  fPCLK/2  |    NA     |    NA     |  fPCLK/4  | fPCLK/8
 117:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    +-----------------------------------------------------------------------------------------------
 118:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      [..]
 119:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        (@) The max SPI frequency depend on SPI data size (8bits, 16bits),
 120:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****            SPI mode(2 Lines fullduplex, 2 lines RxOnly, 1 line TX/RX) and Process mode (Polling, IT
 121:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        (@)
 122:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             (+@) TX/RX processes are HAL_SPI_TransmitReceive(), HAL_SPI_TransmitReceive_IT() and HA
 123:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             (+@) RX processes are HAL_SPI_Receive(), HAL_SPI_Receive_IT() and HAL_SPI_Receive_DMA()
 124:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             (+@) TX processes are HAL_SPI_Transmit(), HAL_SPI_Transmit_IT() and HAL_SPI_Transmit_DM
 125:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   ******************************************************************************
 126:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @attention
 127:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *
 128:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * <h2><center>&copy; COPYRIGHT(c) 2017 STMicroelectronics</center></h2>
 129:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *
 130:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * Redistribution and use in source and binary forms, with or without modification,
 131:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * are permitted provided that the following conditions are met:
 132:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *   1. Redistributions of source code must retain the above copyright notice,
 133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *      this list of conditions and the following disclaimer.
 134:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *   2. Redistributions in binary form must reproduce the above copyright notice,
 135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *      this list of conditions and the following disclaimer in the documentation
 136:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *      and/or other materials provided with the distribution.
 137:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *   3. Neither the name of STMicroelectronics nor the names of its contributors
 138:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *      may be used to endorse or promote products derived from this software
 139:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *      without specific prior written permission.
 140:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *
 141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 142:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 144:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE
 145:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 147:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
ARM GAS  /tmp/ccMJVeMK.s 			page 4


 148:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 150:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *
 152:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   ******************************************************************************
 153:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 154:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 155:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Includes ------------------------------------------------------------------*/
 156:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #include "stm32f1xx_hal.h"
 157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 158:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @addtogroup STM32F1xx_HAL_Driver
 159:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 160:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 161:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @defgroup SPI SPI
 162:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief SPI HAL module driver
 163:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 164:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #ifdef HAL_SPI_MODULE_ENABLED
 166:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 167:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Private typedef -----------------------------------------------------------*/
 168:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Private defines -----------------------------------------------------------*/
 169:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @defgroup SPI_Private_Constants SPI Private Constants
 170:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 171:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 172:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #define SPI_DEFAULT_TIMEOUT 100U
 173:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 174:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
 175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 176:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 177:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Private macros ------------------------------------------------------------*/
 178:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Private variables ---------------------------------------------------------*/
 179:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Private function prototypes -----------------------------------------------*/
 180:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @addtogroup SPI_Private_Functions
 181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 182:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 183:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMATransmitCplt(DMA_HandleTypeDef *hdma);
 184:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAReceiveCplt(DMA_HandleTypeDef *hdma);
 185:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMATransmitReceiveCplt(DMA_HandleTypeDef *hdma);
 186:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAHalfTransmitCplt(DMA_HandleTypeDef *hdma);
 187:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAHalfReceiveCplt(DMA_HandleTypeDef *hdma);
 188:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAHalfTransmitReceiveCplt(DMA_HandleTypeDef *hdma);
 189:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAError(DMA_HandleTypeDef *hdma);
 190:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAAbortOnError(DMA_HandleTypeDef *hdma);
 191:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMATxAbortCallback(DMA_HandleTypeDef *hdma);
 192:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMARxAbortCallback(DMA_HandleTypeDef *hdma);
 193:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static HAL_StatusTypeDef SPI_WaitFlagStateUntilTimeout(SPI_HandleTypeDef *hspi, uint32_t Flag, uint
 194:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_TxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 195:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_TxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 196:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 198:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 199:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesTxISR_8BIT(struct __SPI_HandleTypeDef *hspi);
 200:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesTxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 201:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_16BIT(struct __SPI_HandleTypeDef *hspi);
 202:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 203:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi);
 204:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 5


 205:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi);
 206:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi);
 207:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 208:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_AbortRx_ISR(SPI_HandleTypeDef *hspi);
 209:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_AbortTx_ISR(SPI_HandleTypeDef *hspi);
 210:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_CloseRxTx_ISR(SPI_HandleTypeDef *hspi);
 211:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_CloseRx_ISR(SPI_HandleTypeDef *hspi);
 212:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_CloseTx_ISR(SPI_HandleTypeDef *hspi);
 213:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static HAL_StatusTypeDef SPI_CheckFlag_BSY(SPI_HandleTypeDef *hspi, uint32_t Timeout, uint32_t Tick
 214:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 215:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
 216:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 217:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 218:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Exported functions --------------------------------------------------------*/
 219:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions SPI Exported Functions
 220:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 221:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 222:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 223:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions_Group1 Initialization and de-initialization functions
 224:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  *  @brief    Initialization and Configuration functions
 225:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  *
 226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** @verbatim
 227:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  ===============================================================================
 228:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****               ##### Initialization and de-initialization functions #####
 229:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  ===============================================================================
 230:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     [..]  This subsection provides a set of functions allowing to initialize and
 231:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           de-initialize the SPIx peripheral:
 232:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 233:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (+) User must implement HAL_SPI_MspInit() function in which he configures
 234:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           all related peripherals resources (CLOCK, GPIO, DMA, IT and NVIC ).
 235:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 236:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (+) Call the function HAL_SPI_Init() to configure the selected device with
 237:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           the selected configuration:
 238:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) Mode
 239:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) Direction
 240:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) Data Size
 241:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) Clock Polarity and Phase
 242:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) NSS Management
 243:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) BaudRate Prescaler
 244:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) FirstBit
 245:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) TIMode
 246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) CRC Calculation
 247:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (++) CRC Polynomial if CRC enabled
 248:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 249:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (+) Call the function HAL_SPI_DeInit() to restore the default configuration
 250:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           of the selected SPIx peripheral.
 251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 252:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** @endverbatim
 253:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 254:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 255:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 256:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 257:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Initialize the SPI according to the specified parameters
 258:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         in the SPI_InitTypeDef and initialize the associated handle.
 259:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 260:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 261:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
ARM GAS  /tmp/ccMJVeMK.s 			page 6


 262:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 263:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak HAL_StatusTypeDef HAL_SPI_Init(SPI_HandleTypeDef *hspi)
 264:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 265:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the SPI handle allocation */
 266:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi == NULL)
 267:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 268:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_ERROR;
 269:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 270:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 271:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the parameters */
 272:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_ALL_INSTANCE(hspi->Instance));
 273:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_MODE(hspi->Init.Mode));
 274:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION(hspi->Init.Direction));
 275:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DATASIZE(hspi->Init.DataSize));
 276:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_CPOL(hspi->Init.CLKPolarity));
 277:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_CPHA(hspi->Init.CLKPhase));
 278:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_NSS(hspi->Init.NSS));
 279:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_BAUDRATE_PRESCALER(hspi->Init.BaudRatePrescaler));
 280:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_FIRST_BIT(hspi->Init.FirstBit));
 281:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 282:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 283:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_CRC_CALCULATION(hspi->Init.CRCCalculation));
 284:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 285:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 286:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     assert_param(IS_SPI_CRC_POLYNOMIAL(hspi->Init.CRCPolynomial));
 287:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 288:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #else
 289:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
 290:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 291:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 292:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State == HAL_SPI_STATE_RESET)
 293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 294:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Allocate lock resource and initialize it */
 295:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->Lock = HAL_UNLOCKED;
 296:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 297:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Init the low level hardware : GPIO, CLOCK, NVIC... */
 298:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_SPI_MspInit(hspi);
 299:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 300:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 301:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_BUSY;
 302:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 303:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the selected SPI peripheral */
 304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 305:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 306:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /*----------------------- SPIx CR1 & CR2 Configuration ---------------------*/
 307:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure : SPI Mode, Communication Mode, Data size, Clock polarity and phase, NSS management,
 308:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   Communication speed, First bit and CRC calculation state */
 309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   WRITE_REG(hspi->Instance->CR1, (hspi->Init.Mode | hspi->Init.Direction | hspi->Init.DataSize |
 310:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 311:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                                   hspi->Init.BaudRatePrescaler | hspi->Init.FirstBit  | hspi->Init.
 312:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure : NSS management */
 314:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   WRITE_REG(hspi->Instance->CR2, (((hspi->Init.NSS >> 16U) & SPI_CR2_SSOE) | hspi->Init.TIMode));
 315:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 316:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 317:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /*---------------------------- SPIx CRCPOLY Configuration ------------------*/
 318:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure : CRC Polynomial */
ARM GAS  /tmp/ccMJVeMK.s 			page 7


 319:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 320:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 321:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     WRITE_REG(hspi->Instance->CRCPR, hspi->Init.CRCPolynomial);
 322:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 323:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 324:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 325:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if defined(SPI_I2SCFGR_I2SMOD)
 326:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Activate the SPI mode (Make sure that I2SMOD bit in I2SCFGR register is reset) */
 327:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->I2SCFGR, SPI_I2SCFGR_I2SMOD);
 328:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* SPI_I2SCFGR_I2SMOD */
 329:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 330:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
 331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State     = HAL_SPI_STATE_READY;
 332:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
 334:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 335:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 336:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 337:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  De Initialize the SPI peripheral.
 338:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 339:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 340:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
 341:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 342:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DeInit(SPI_HandleTypeDef *hspi)
 343:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 344:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the SPI handle allocation */
 345:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi == NULL)
 346:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 347:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_ERROR;
 348:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 349:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 350:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check SPI Instance parameter */
 351:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_ALL_INSTANCE(hspi->Instance));
 352:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 353:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_BUSY;
 354:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 355:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI Peripheral Clock */
 356:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 357:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 358:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* DeInit the low level hardware: GPIO, CLOCK, NVIC... */
 359:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_MspDeInit(hspi);
 360:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 361:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
 362:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_RESET;
 363:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 364:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Release Lock */
 365:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 366:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 367:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
 368:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 369:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 370:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 371:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Initialize the SPI MSP.
 372:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 373:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
 375:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
ARM GAS  /tmp/ccMJVeMK.s 			page 8


 376:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_MspInit(SPI_HandleTypeDef *hspi)
 377:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 378:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 379:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
 380:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 381:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_MspInit should be implemented in the user file
 382:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 383:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 384:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 385:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 386:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  De-Initialize the SPI MSP.
 387:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 388:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 389:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
 390:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 391:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_MspDeInit(SPI_HandleTypeDef *hspi)
 392:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 393:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 394:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
 395:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
 396:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_MspDeInit should be implemented in the user file
 397:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 398:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 399:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 400:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 401:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
 402:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 403:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 404:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions_Group2 IO operation functions
 405:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  *  @brief   Data transfers functions
 406:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  *
 407:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** @verbatim
 408:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   ==============================================================================
 409:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                       ##### IO operation functions #####
 410:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  ===============================================================================
 411:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  [..]
 412:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     This subsection provides a set of functions allowing to manage the SPI
 413:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     data transfers.
 414:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 415:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     [..] The SPI supports master and slave mode :
 416:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 417:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     (#) There are two modes of transfer:
 418:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        (++) Blocking mode: The communication is performed in polling mode.
 419:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             The HAL status of all data processing is returned by the same function
 420:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             after finishing transfer.
 421:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        (++) No-Blocking mode: The communication is performed using Interrupts
 422:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             or DMA, These APIs return the HAL status.
 423:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             The end of the data processing will be indicated through the
 424:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             dedicated SPI IRQ when using Interrupt mode or the DMA IRQ when
 425:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             using DMA mode.
 426:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             The HAL_SPI_TxCpltCallback(), HAL_SPI_RxCpltCallback() and HAL_SPI_TxRxCpltCallback() u
 427:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             will be executed respectively at the end of the transmit or Receive process
 428:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             The HAL_SPI_ErrorCallback()user callback will be executed when a communication error is
 429:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 430:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     (#) APIs provided for these 2 transfer modes (Blocking mode or Non blocking mode using either I
 431:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         exist for 1Line (simplex) and 2Lines (full duplex) modes.
 432:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 9


 433:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** @endverbatim
 434:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
 435:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 436:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 437:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 438:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Transmit an amount of data in blocking mode.
 439:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 440:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 441:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pData: pointer to data buffer
 442:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent
 443:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Timeout: Timeout duration
 444:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
 445:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 446:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Transmit(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size, uint32_t
 447:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 448:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 449:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 450:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 451:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Direction parameter */
 452:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES_OR_1LINE(hspi->Init.Direction));
 453:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 454:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 455:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
 456:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 457:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout management*/
 458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
 459:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 460:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State != HAL_SPI_STATE_READY)
 461:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 462:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
 463:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 464:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 465:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 466:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pData == NULL ) || (Size == 0U))
 467:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 468:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
 469:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 471:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 472:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
 473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_TX;
 474:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 475:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 476:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 477:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 478:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 479:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /*Init field not used in handle to zero */
 480:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)NULL;
 481:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 483:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 484:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
 485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure communication direction : 1Line */
 487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_1LINE)
 488:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_1LINE_TX(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 10


 490:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 491:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 493:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
 494:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 495:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 496:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
 497:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 498:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 499:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 500:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
 501:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
 502:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 503:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
 504:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
 505:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 506:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 507:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 508:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.DataSize == SPI_DATASIZE_16BIT)
 509:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 510:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01))
 511:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 512:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->Instance->DR = *((uint16_t *)pData);
 513:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       pData += sizeof(uint16_t);
 514:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->TxXferCount--;
 515:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 516:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Transmit data in 16 Bit mode */
 517:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     while (hspi->TxXferCount > 0U)
 518:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 519:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Wait until TXE flag is set to send data */
 520:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE))
 521:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           hspi->Instance->DR = *((uint16_t *)pData);
 523:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           pData += sizeof(uint16_t);
 524:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           hspi->TxXferCount--;
 525:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 526:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
 527:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 528:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Timeout management */
 529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick()-tickstart) >=  Timeout
 530:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 531:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 532:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           goto error;
 533:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 534:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 535:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 536:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 537:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 8 Bit mode */
 538:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
 539:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((hspi->Init.Mode == SPI_MODE_SLAVE)|| (hspi->TxXferCount == 0x01))
 541:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 542:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       *((__IO uint8_t*)&hspi->Instance->DR) = (*pData);
 543:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       pData += sizeof(uint8_t);
 544:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->TxXferCount--;
 545:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     while (hspi->TxXferCount > 0U)
ARM GAS  /tmp/ccMJVeMK.s 			page 11


 547:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 548:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Wait until TXE flag is set to send data */
 549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE))
 550:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 551:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         *((__IO uint8_t*)&hspi->Instance->DR) = (*pData);
 552:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pData += sizeof(uint8_t);
 553:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->TxXferCount--;
 554:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 555:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
 556:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 557:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Timeout management */
 558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick()-tickstart) >=  Timeout
 559:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 560:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 561:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           goto error;
 562:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 563:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 564:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 565:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 566:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 567:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Wait until TXE flag */
 568:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_TXE, SET, Timeout, tickstart) != HAL_OK)
 569:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 570:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_TIMEOUT;
 571:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 572:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 573:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 574:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Busy flag */
 575:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_CheckFlag_BSY(hspi, Timeout, tickstart) != HAL_OK)
 576:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 577:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
 578:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
 579:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 580:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 581:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 582:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear overrun flag in 2 Lines communication mode because received is not read */
 583:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_2LINES)
 584:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 585:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
 586:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 587:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 588:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable CRC Transmission */
 589:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 590:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 591:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
 592:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 593:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 594:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 595:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
 596:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 597:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
 598:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 599:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error:
 601:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 602:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
 603:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 12


 604:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 605:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 606:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 607:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 608:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Receive an amount of data in blocking mode.
 609:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 610:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 611:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pData: pointer to data buffer
 612:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be received
 613:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Timeout: Timeout duration
 614:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
 615:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Receive(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size, uint32_t 
 617:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 619:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
 620:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 621:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 622:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 623:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Init.Mode == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES))
 625:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 626:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      hspi->State = HAL_SPI_STATE_BUSY_RX;
 627:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 628:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_SPI_TransmitReceive(hspi,pData,pData,Size,Timeout);
 629:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 630:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 631:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 632:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
 633:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 634:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout management*/
 635:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
 636:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State != HAL_SPI_STATE_READY)
 638:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 639:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
 640:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 641:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 642:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 643:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pData == NULL ) || (Size == 0U))
 644:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 645:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
 646:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 647:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 648:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 649:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
 650:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_RX;
 651:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 652:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 653:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 654:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 655:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 656:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /*Init field not used in handle to zero */
 657:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)NULL;
 658:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 659:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 660:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
ARM GAS  /tmp/ccMJVeMK.s 			page 13


 661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 662:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 663:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 664:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
 665:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 666:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 667:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
 668:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* this is done to handle the CRCNEXT before the latest data */
 669:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxXferCount--;
 670:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 671:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 672:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 673:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure communication direction: 1Line */
 674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_1LINE)
 675:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 676:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_1LINE_RX(hspi);
 677:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 678:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 679:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
 680:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 & SPI_CR1_SPE) != SPI_CR1_SPE)
 681:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 682:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
 683:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
 684:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 685:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 686:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Receive data in 8 Bit mode */
 687:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.DataSize == SPI_DATASIZE_8BIT)
 688:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 689:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Transfer loop */
 690:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     while(hspi->RxXferCount > 0U)
 691:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 692:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check the RXNE flag */
 693:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE))
 694:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 695:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* read the received data */
 696:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (* (uint8_t *)pData)= *(__IO uint8_t *)&hspi->Instance->DR;
 697:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pData += sizeof(uint8_t);
 698:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->RxXferCount--;
 699:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 700:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
 701:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 702:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Timeout management */
 703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick()-tickstart) >=  Timeout
 704:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 705:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 706:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           goto error;
 707:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 708:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 709:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 710:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 711:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
 712:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 713:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Transfer loop */
 714:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     while(hspi->RxXferCount > 0U)
 715:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 716:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check the RXNE flag */
 717:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE))
ARM GAS  /tmp/ccMJVeMK.s 			page 14


 718:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 719:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         *((uint16_t*)pData) = hspi->Instance->DR;
 720:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pData += sizeof(uint16_t);
 721:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->RxXferCount--;
 722:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 723:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
 724:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 725:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Timeout management */
 726:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((Timeout == 0U) || ((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick()-tickstart) >=  Timeout
 727:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 728:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           errorcode = HAL_TIMEOUT;
 729:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           goto error;
 730:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 731:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 732:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 733:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 734:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 735:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 736:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Handle the CRC Transmission */
 737:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 738:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 739:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* freeze the CRC before the latest data */
 740:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
 741:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 742:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Read the latest data */
 743:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
 744:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 745:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* the latest data has not been received */
 746:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 747:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       goto error;
 748:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 749:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 750:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Receive last data in 16 Bit mode */
 751:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.DataSize == SPI_DATASIZE_16BIT)
 752:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 753:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       *((uint16_t*)pData) = hspi->Instance->DR;
 754:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 755:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Receive last data in 8 Bit mode */
 756:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
 757:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 758:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       (*(uint8_t *)pData) = *(__IO uint8_t *)&hspi->Instance->DR;
 759:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 760:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 761:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Wait the CRC data */
 762:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
 763:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 764:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 765:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 766:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       goto error;
 767:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 768:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 769:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Read CRC to Flush DR and RXNE flag */
 770:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     tmpreg = hspi->Instance->DR;
 771:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* To avoid GCC warning */
 772:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     UNUSED(tmpreg);
 773:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 774:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
ARM GAS  /tmp/ccMJVeMK.s 			page 15


 775:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 776:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the end of the transaction */
 777:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Init.Mode == SPI_MODE_MASTER)&&((hspi->Init.Direction == SPI_DIRECTION_1LINE)||(hspi->I
 778:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 779:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable SPI peripheral */
 780:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_DISABLE(hspi);
 781:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 782:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 783:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 784:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check if CRC error occurred */
 785:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
 786:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 787:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check if CRC error is valid or not (workaround to be applied or not) */
 788:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if (SPI_ISCRCErrorValid(hspi) == SPI_VALID_CRC_ERROR)
 789:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 790:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 791:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 792:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Reset CRC Calculation */
 793:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SPI_RESET_CRC(hspi);
 794:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 795:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
 796:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 797:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
 798:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 799:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 800:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 801:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 802:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
 803:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 804:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
 805:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 806:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 807:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
 808:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 809:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 810:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 811:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 812:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 813:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 814:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Transmit and Receive an amount of data in blocking mode.
 815:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
 816:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
 817:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pTxData: pointer to transmission data buffer
 818:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pRxData: pointer to reception data buffer
 819:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent and received
 820:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Timeout: Timeout duration
 821:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
 822:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
 823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_TransmitReceive(SPI_HandleTypeDef *hspi, uint8_t *pTxData, uint8_t *pRxDa
 824:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 825:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 826:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 827:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint16_t tmpreg1 = 0U;
 828:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 829:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 830:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Variable used to alternate Rx and Tx during transfer */
 831:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t txallowed = 1U;
ARM GAS  /tmp/ccMJVeMK.s 			page 16


 832:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 833:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 834:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Direction parameter */
 835:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES(hspi->Init.Direction));
 836:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 837:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
 839:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 840:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout management*/
 841:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
 842:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 843:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp  = hspi->State;
 844:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 845:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 846:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(!((tmp == HAL_SPI_STATE_READY) || \
 847:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_SPI
 848:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 849:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
 850:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 851:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 852:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 853:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pTxData == NULL) || (pRxData == NULL) || (Size == 0U))
 854:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 855:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
 856:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 857:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 858:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 859:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Don't overwrite in case of HAL_SPI_STATE_BUSY_RX */
 860:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State == HAL_SPI_STATE_READY)
 861:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 862:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_TX_RX;
 863:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 864:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 865:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
 866:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 867:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 868:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 869:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 870:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 871:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 872:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 873:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 874:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /*Init field not used in handle to zero */
 875:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
 876:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 877:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 878:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 879:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
 880:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 881:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 882:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
 883:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 884:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 885:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 886:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
 887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
 888:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
ARM GAS  /tmp/ccMJVeMK.s 			page 17


 889:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
 890:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
 891:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 892:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 893:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit and Receive data in 16 Bit mode */
 894:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.DataSize == SPI_DATASIZE_16BIT)
 895:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 896:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01U))
 897:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 898:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->Instance->DR = *((uint16_t *)pTxData);
 899:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       pTxData += sizeof(uint16_t);
 900:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->TxXferCount--;
 901:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     while ((hspi->TxXferCount > 0U) || (hspi->RxXferCount > 0U))
 903:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 904:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check TXE flag */
 905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(txallowed && (hspi->TxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE)))
 906:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 907:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->Instance->DR = *((uint16_t *)pTxData);
 908:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pTxData += sizeof(uint16_t);
 909:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->TxXferCount--;
 910:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */ 
 911:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         txallowed = 0U;
 912:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 913:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 914:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Enable CRC Transmission */
 915:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((hspi->TxXferCount == 0U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
 916:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 917:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
 918:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 919:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 920:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 921:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 922:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check RXNE flag */
 923:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if((hspi->RxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE)))
 924:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 925:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         *((uint16_t *)pRxData) = hspi->Instance->DR;
 926:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pRxData += sizeof(uint16_t);
 927:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->RxXferCount--;
 928:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */ 
 929:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         txallowed = 1U;
 930:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 931:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick()-tickstart) >=  Timeout))
 932:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 933:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         errorcode = HAL_TIMEOUT;
 934:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         goto error;
 935:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 936:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 938:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit and Receive data in 8 Bit mode */
 939:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
 940:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 941:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((hspi->Init.Mode == SPI_MODE_SLAVE) || (hspi->TxXferCount == 0x01U))
 942:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 943:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       *((__IO uint8_t*)&hspi->Instance->DR) = (*pTxData);
 944:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       pTxData += sizeof(uint8_t);
 945:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->TxXferCount--;
ARM GAS  /tmp/ccMJVeMK.s 			page 18


 946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 947:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     while((hspi->TxXferCount > 0U) || (hspi->RxXferCount > 0U))
 948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 949:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* check TXE flag */
 950:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(txallowed && (hspi->TxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_TXE)))
 951:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 952:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         *(__IO uint8_t *)&hspi->Instance->DR = (*pTxData++);
 953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->TxXferCount--;
 954:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */ 
 955:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         txallowed = 0U;
 956:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 957:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 958:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Enable CRC Transmission */
 959:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((hspi->TxXferCount == 0U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
 960:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
 962:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 963:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 964:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 965:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 966:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Wait until RXNE flag is reset */
 967:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if((hspi->RxXferCount > 0U) && (__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_RXNE)))
 968:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 969:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         (*(uint8_t *)pRxData++) = hspi->Instance->DR;
 970:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->RxXferCount--;
 971:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */ 
 972:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         txallowed = 1U;
 973:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 974:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if((Timeout != HAL_MAX_DELAY) && ((HAL_GetTick()-tickstart) >=  Timeout))
 975:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 976:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         errorcode = HAL_TIMEOUT;
 977:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         goto error;
 978:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 979:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 980:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 982:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Read CRC from DR to close CRC calculation process */
 984:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
 985:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 986:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Wait until TXE flag */
 987:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, Timeout, tickstart) != HAL_OK)
 988:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 989:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Error on the CRC reception */
 990:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
 991:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       errorcode = HAL_TIMEOUT;
 992:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       goto error;
 993:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 994:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Read CRC */
 995:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     tmpreg1 = hspi->Instance->DR;
 996:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* To avoid GCC warning */
 997:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     UNUSED(tmpreg1);
 998:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 999:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1000:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if CRC error occurred */
1001:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
1002:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
ARM GAS  /tmp/ccMJVeMK.s 			page 19


1003:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check if CRC error is valid or not (workaround to be applied or not) */
1004:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if (SPI_ISCRCErrorValid(hspi) == SPI_VALID_CRC_ERROR)
1005:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1006:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
1007:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1008:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Reset CRC Calculation */
1009:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SPI_RESET_CRC(hspi);
1010:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1011:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    	  errorcode = HAL_ERROR;
1012:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1013:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
1014:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1015:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
1016:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1017:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1018:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1019:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1020:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Wait until TXE flag */
1021:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_TXE, SET, Timeout, tickstart) != HAL_OK)
1022:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1023:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_TIMEOUT;
1024:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1025:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1026:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
1027:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Busy flag */
1028:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_CheckFlag_BSY(hspi, Timeout, tickstart) != HAL_OK)
1029:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1030:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1031:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
1032:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1033:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1034:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1035:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear overrun flag in 2 Lines communication mode because received is not read */
1036:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_2LINES)
1037:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1038:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
1039:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1040:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
1041:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
1042:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
1043:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1044:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1045:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1046:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1047:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1048:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Transmit an amount of data in non-blocking mode with Interrupt.
1049:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1050:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
1051:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1052:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1053:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1054:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1055:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Transmit_IT(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1057:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1058:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1059:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Direction parameter */
ARM GAS  /tmp/ccMJVeMK.s 			page 20


1060:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES_OR_1LINE(hspi->Init.Direction));
1061:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1062:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
1063:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1064:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1065:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pData == NULL) || (Size == 0U))
1066:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1067:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1068:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1069:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1070:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1071:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State != HAL_SPI_STATE_READY)
1072:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1073:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
1074:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1075:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1076:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1077:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
1078:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_TX;
1079:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1080:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
1081:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1082:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
1083:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1084:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init field not used in handle to zero */
1085:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)NULL;
1086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
1087:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
1088:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
1089:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1090:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the function for IT treatment */
1091:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.DataSize > SPI_DATASIZE_8BIT )
1092:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1093:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR = SPI_TxISR_16BIT;
1094:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1095:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
1096:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1097:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR = SPI_TxISR_8BIT;
1098:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1099:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1100:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1101:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_1LINE)
1102:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1103:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_1LINE_TX(hspi);
1104:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1105:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1106:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1107:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
1108:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1109:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1110:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1111:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1112:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1113:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1114:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if (hspi->Init.Direction == SPI_DIRECTION_2LINES)
1115:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1116:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable TXE interrupt */
ARM GAS  /tmp/ccMJVeMK.s 			page 21


1117:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_TXE));
1118:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1119:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
1120:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1121:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable TXE and ERR interrupt */
1122:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_ERR));
1123:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1124:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1125:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1126:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
1127:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1128:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
1129:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1130:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1131:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1132:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
1133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1134:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1136:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1137:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1138:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Receive an amount of data in non-blocking mode with Interrupt.
1139:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1140:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
1141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1142:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1144:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1145:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Receive_IT(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1147:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1148:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Init.Direction == SPI_DIRECTION_2LINES) && (hspi->Init.Mode == SPI_MODE_MASTER))
1150:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      hspi->State = HAL_SPI_STATE_BUSY_RX;
1152:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
1153:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      return HAL_SPI_TransmitReceive_IT(hspi, pData, pData, Size);
1154:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1155:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1156:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
1157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1158:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1159:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State != HAL_SPI_STATE_READY)
1160:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1161:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
1162:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1163:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1164:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pData == NULL) || (Size == 0U))
1166:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1167:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1168:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1169:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1170:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1171:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
1172:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_RX;
1173:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
ARM GAS  /tmp/ccMJVeMK.s 			page 22


1174:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
1175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1176:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
1177:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1178:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init field not used in handle to zero */
1179:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)NULL;
1180:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
1181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
1182:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
1183:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1184:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the function for IT treatment */
1185:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.DataSize > SPI_DATASIZE_8BIT )
1186:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1187:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR = SPI_RxISR_16BIT;
1188:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1189:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
1190:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1191:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR = SPI_RxISR_8BIT;
1192:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1193:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1194:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1195:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_1LINE)
1196:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_1LINE_RX(hspi);
1198:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1199:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1200:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1201:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
1202:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1203:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1204:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1205:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1206:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1207:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1208:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable TXE and ERR interrupt */
1209:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
1210:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1211:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Note : The SPI must be enabled after unlocking current process
1212:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             to avoid the risk of SPI interrupt handle execution before current
1213:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             process unlock */
1214:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1215:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1216:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
1217:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1218:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
1219:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1220:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1221:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1222:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
1223:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1224:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1225:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1227:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1228:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1229:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Transmit and Receive an amount of data in non-blocking mode with Interrupt.
1230:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
ARM GAS  /tmp/ccMJVeMK.s 			page 23


1231:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
1232:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pTxData: pointer to transmission data buffer
1233:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pRxData: pointer to reception data buffer
1234:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent and received
1235:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1236:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1237:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_TransmitReceive_IT(SPI_HandleTypeDef *hspi, uint8_t *pTxData, uint8_t *pR
1238:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1239:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
1240:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1241:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1242:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Direction parameter */
1243:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES(hspi->Init.Direction));
1244:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1245:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process locked */
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1247:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1248:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp  = hspi->State;
1249:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
1250:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
1251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(!((tmp == HAL_SPI_STATE_READY) || \
1252:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_SPI
1253:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1254:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
1255:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1256:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1257:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1258:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pTxData == NULL ) || (pRxData == NULL ) || (Size == 0U))
1259:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1260:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1261:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1262:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1263:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1264:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Don't overwrite in case of HAL_SPI_STATE_BUSY_RX */
1265:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State == HAL_SPI_STATE_READY)
1266:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1267:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_TX_RX;
1268:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1269:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1270:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
1271:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1272:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
1273:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1274:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
1275:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
1276:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1277:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
1278:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1279:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the function for IT treatment */
1280:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.DataSize > SPI_DATASIZE_8BIT )
1281:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1282:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR     = SPI_2linesRxISR_16BIT;
1283:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_16BIT;
1284:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1285:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
1286:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1287:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR     = SPI_2linesRxISR_8BIT;
ARM GAS  /tmp/ccMJVeMK.s 			page 24


1288:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_8BIT;
1289:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1290:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1291:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1292:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
1293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1294:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1295:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1296:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1297:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1298:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1299:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable TXE, RXNE and ERR interrupt */
1300:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_ENABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_RXNE | SPI_IT_ERR));
1301:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1302:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1303:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
1304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1305:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
1306:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1307:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1308:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
1310:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1311:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1312:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1314:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1315:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1316:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Transmit an amount of data in non-blocking mode with DMA.
1317:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1318:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
1319:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1320:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1321:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1322:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1323:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Transmit_DMA(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1324:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1325:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1326:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1327:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Direction parameter */
1328:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES_OR_1LINE(hspi->Init.Direction));
1329:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1330:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
1331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1332:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State != HAL_SPI_STATE_READY)
1334:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1335:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
1336:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1337:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1338:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1339:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pData == NULL) || (Size == 0U))
1340:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1341:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1342:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1343:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1344:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 25


1345:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
1346:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_TX;
1347:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1348:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
1349:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1350:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
1351:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1352:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init field not used in handle to zero */
1353:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)NULL;
1354:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
1355:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
1356:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
1357:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
1358:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1359:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1360:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_1LINE)
1361:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1362:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_1LINE_TX(hspi);
1363:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1364:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1365:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1366:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
1367:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1368:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1369:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1370:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1371:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1372:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1373:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the SPI TxDMA Half transfer complete callback */
1374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferHalfCpltCallback = SPI_DMAHalfTransmitCplt;
1375:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1376:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the SPI TxDMA transfer complete callback */
1377:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback = SPI_DMATransmitCplt;
1378:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1379:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the DMA error callback */
1380:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferErrorCallback = SPI_DMAError;
1381:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1382:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the DMA AbortCpltCallback */
1383:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback = NULL;
1384:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1385:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the Tx DMA Stream */
1386:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmatx, (uint32_t)hspi->pTxBuffPtr, (uint32_t)&hspi->Instance->DR, hspi->T
1387:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1388:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1389:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
1390:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1391:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
1392:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1393:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1394:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1395:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the SPI Error Interrupt Bit */
1396:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
1397:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1398:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable Tx DMA Request */
1399:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
1400:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1401:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
ARM GAS  /tmp/ccMJVeMK.s 			page 26


1402:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1403:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1404:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1405:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1406:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1407:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1408:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Receive an amount of data in non-blocking mode with DMA.
1409:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1410:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
1411:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pData: pointer to data buffer
1412:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   When the CRC feature is enabled the pData Length must be Size + 1.
1413:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1414:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1415:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1416:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Receive_DMA(SPI_HandleTypeDef *hspi, uint8_t *pData, uint16_t Size)
1417:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1418:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1419:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1420:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Init.Direction == SPI_DIRECTION_2LINES)&&(hspi->Init.Mode == SPI_MODE_MASTER))
1421:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1422:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      hspi->State = HAL_SPI_STATE_BUSY_RX;
1423:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
1424:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      return HAL_SPI_TransmitReceive_DMA(hspi, pData, pData, Size);
1425:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1426:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1427:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
1428:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1429:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1430:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State != HAL_SPI_STATE_READY)
1431:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1432:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
1433:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1434:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1435:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1436:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pData == NULL) || (Size == 0U))
1437:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1438:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1439:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1440:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1441:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1442:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
1443:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State       = HAL_SPI_STATE_BUSY_RX;
1444:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1445:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
1446:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1447:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
1448:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1449:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /*Init field not used in handle to zero */
1450:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
1451:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
1452:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
1453:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
1454:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1455:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Configure communication direction : 1Line */
1456:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_1LINE)
1457:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_1LINE_RX(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 27


1459:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1460:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1461:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1462:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
1463:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1464:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1465:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1466:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1467:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1468:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1469:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the SPI RxDMA Half transfer complete callback */
1470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferHalfCpltCallback = SPI_DMAHalfReceiveCplt;
1471:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1472:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the SPI Rx DMA transfer complete callback */
1473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferCpltCallback = SPI_DMAReceiveCplt;
1474:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1475:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the DMA error callback */
1476:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferErrorCallback = SPI_DMAError;
1477:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1478:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  /* Set the DMA AbortCpltCallback */
1479:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferAbortCallback = NULL;
1480:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1481:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the Rx DMA Stream */
1482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmarx, (uint32_t)&hspi->Instance->DR, (uint32_t)hspi->pRxBuffPtr, hspi->R
1483:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1484:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
1486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
1488:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1490:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1491:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the SPI Error Interrupt Bit */
1492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
1493:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1494:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable Rx DMA Request */
1495:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_RXDMAEN);
1496:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1497:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error:
1498:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1499:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1500:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1501:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1502:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1503:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1504:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Transmit and Receive an amount of data in non-blocking mode with DMA.
1505:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1506:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
1507:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pTxData: pointer to transmission data buffer
1508:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  pRxData: pointer to reception data buffer
1509:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   When the CRC feature is enabled the pRxData Length must be Size + 1
1510:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  Size: amount of data to be sent
1511:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1512:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1513:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_TransmitReceive_DMA(SPI_HandleTypeDef *hspi, uint8_t *pTxData, uint8_t *p
1514:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1515:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
ARM GAS  /tmp/ccMJVeMK.s 			page 28


1516:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
1517:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1518:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Direction parameter */
1519:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   assert_param(IS_SPI_DIRECTION_2LINES(hspi->Init.Direction));
1520:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1521:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process locked */
1522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1523:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1524:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp  = hspi->State;
1525:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
1526:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(!((tmp == HAL_SPI_STATE_READY) ||
1527:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_S
1528:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_BUSY;
1530:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1531:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1532:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1533:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((pTxData == NULL ) || (pRxData == NULL ) || (Size == 0U))
1534:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1535:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     errorcode = HAL_ERROR;
1536:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
1537:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1538:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1539:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Don't overwrite in case of HAL_SPI_STATE_BUSY_RX */
1540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State == HAL_SPI_STATE_READY)
1541:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1542:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_BUSY_TX_RX;
1543:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1544:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1545:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the transaction information */
1546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
1547:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t*)pTxData;
1548:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
1549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
1550:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t*)pRxData;
1551:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
1552:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
1553:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1554:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init field not used in handle to zero */
1555:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
1556:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
1557:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
1559:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset CRC Calculation */
1560:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
1561:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1562:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_RESET_CRC(hspi);
1563:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1564:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
1565:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1566:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if we are in Rx only or in Rx/Tx Mode and configure the DMA transfer complete callback *
1567:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->State == HAL_SPI_STATE_BUSY_RX)
1568:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1569:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Set the SPI Rx DMA Half transfer complete callback */
1570:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferHalfCpltCallback = SPI_DMAHalfReceiveCplt;
1571:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMAReceiveCplt;
1572:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
ARM GAS  /tmp/ccMJVeMK.s 			page 29


1573:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
1574:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1575:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Set the SPI Tx/Rx DMA Half transfer complete callback */
1576:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferHalfCpltCallback = SPI_DMAHalfTransmitReceiveCplt;
1577:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMATransmitReceiveCplt;
1578:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1579:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1580:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the DMA error callback */
1581:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferErrorCallback = SPI_DMAError;
1582:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1583:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the DMA AbortCpltCallback */
1584:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferAbortCallback = NULL;
1585:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1586:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the Rx DMA Stream */
1587:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmarx, (uint32_t)&hspi->Instance->DR, (uint32_t)hspi->pRxBuffPtr, hspi->R
1588:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1589:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable Rx DMA Request */
1590:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_RXDMAEN);
1591:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1592:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Set the SPI Tx DMA transfer complete callback as NULL because the communication closing
1593:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   is performed in DMA reception complete callback  */
1594:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferHalfCpltCallback = NULL;
1595:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback     = NULL;
1596:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferErrorCallback    = NULL;
1597:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback    = NULL;
1598:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1599:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the Tx DMA Stream */
1600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_DMA_Start_IT(hspi->hdmatx, (uint32_t)hspi->pTxBuffPtr, (uint32_t)&hspi->Instance->DR, hspi->T
1601:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1602:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if the SPI is already enabled */
1603:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->Instance->CR1 &SPI_CR1_SPE) != SPI_CR1_SPE)
1604:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1605:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Enable SPI peripheral */
1606:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_ENABLE(hspi);
1607:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1608:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the SPI Error Interrupt Bit */
1609:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
1610:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1611:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable Tx DMA Request */
1612:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
1613:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1614:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** error :
1615:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1617:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
1618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1619:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1620:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1621:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Abort ongoing transfer (blocking mode).
1622:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi SPI handle.
1623:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   This procedure could be used for aborting any ongoing transfer (Tx and Rx),
1624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         started in Interrupt or DMA mode.
1625:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         This procedure performs following operations :
1626:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Disable SPI Interrupts (depending of transfer direction)
1627:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Disable the DMA transfer in the peripheral register (if enabled)
1628:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Abort DMA transfer by calling HAL_DMA_Abort (in case of transfer in DMA mode)
1629:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Set handle State to READY
ARM GAS  /tmp/ccMJVeMK.s 			page 30


1630:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   This procedure is executed in blocking mode : when exiting function, Abort is considere
1631:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   Once transfer is aborted, the __HAL_SPI_CLEAR_OVRFLAG() macro must be called in user ap
1632:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         before starting new SPI receive process.
1633:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1634:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** */
1635:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Abort(SPI_HandleTypeDef *hspi)
1636:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
1638:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1639:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable TXEIE, RXNEIE and ERRIE(mode fault event, overrun error, TI frame error) interrupts */
1640:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXEIE))
1641:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1642:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR = SPI_AbortTx_ISR;
1643:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1644:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1645:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXNEIE))
1646:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1647:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR = SPI_AbortRx_ISR;
1648:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1649:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1650:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear ERRIE interrupts in case of DMA Mode */
1651:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
1652:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1653:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI DMA Tx or SPI DMA Rx request if enabled */
1654:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if ((HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN)) || (HAL_IS_BIT_SET(hspi->Instance->CR2
1655:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1656:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Abort the SPI DMA Tx channel : use blocking DMA Abort API (no callback) */  
1657:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmatx != NULL)
1658:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1659:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Set the SPI DMA Abort callback :
1660:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       will lead to call HAL_SPI_AbortCpltCallback() at end of DMA abort procedure */
1661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->hdmatx->XferAbortCallback = NULL;
1662:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
1663:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Abort DMA Tx Handle linked to SPI Peripheral */
1664:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_DMA_Abort(hspi->hdmatx);
1665:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1666:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable Tx DMA Request */
1667:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXDMAEN));
1668:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1669:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Wait until TXE flag is set */
1670:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       do
1671:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1672:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if(count-- == 0U)
1673:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
1674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
1675:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           break;
1676:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
1677:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1678:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       while((hspi->Instance->SR & SPI_FLAG_TXE) == RESET);       
1679:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1680:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Abort the SPI DMA Rx channel : use blocking DMA Abort API (no callback) */
1681:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmarx != NULL)
1682:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1683:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Set the SPI DMA Abort callback :
1684:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       will lead to call HAL_SPI_AbortCpltCallback() at end of DMA abort procedure */
1685:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->hdmarx->XferAbortCallback = NULL;
1686:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
ARM GAS  /tmp/ccMJVeMK.s 			page 31


1687:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Abort DMA Rx Handle linked to SPI Peripheral */
1688:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_DMA_Abort(hspi->hdmarx);
1689:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1690:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable peripheral */
1691:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_DISABLE(hspi); 
1692:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1693:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable Rx DMA Request */
1694:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_RXDMAEN));
1695:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
1696:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1697:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1698:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset Tx and Rx transfer counters */
1699:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
1700:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
1701:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1702:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset errorCode */
1703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
1704:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1705:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear the Error flags in the SR register */
1706:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_CLEAR_OVRFLAG(hspi);
1707:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1708:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Restore hspi->state to ready */
1709:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
1710:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1711:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
1712:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1713:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1714:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1715:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Abort ongoing transfer (Interrupt mode).
1716:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi SPI handle.
1717:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   This procedure could be used for aborting any ongoing transfer (Tx and Rx),
1718:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         started in Interrupt or DMA mode.
1719:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         This procedure performs following operations :
1720:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Disable SPI Interrupts (depending of transfer direction)
1721:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Disable the DMA transfer in the peripheral register (if enabled)
1722:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Abort DMA transfer by calling HAL_DMA_Abort_IT (in case of transfer in DMA mode)
1723:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - Set handle State to READY
1724:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *           - At abort completion, call user abort complete callback
1725:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   This procedure is executed in Interrupt mode, meaning that abort procedure could be
1726:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         considered as completed only when user abort complete callback is executed (not when ex
1727:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   Once transfer is aborted, the __HAL_SPI_CLEAR_OVRFLAG() macro must be called in user ap
1728:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         before starting new SPI receive process.
1729:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1730:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** */
1731:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_Abort_IT(SPI_HandleTypeDef *hspi)
1732:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1733:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t abortcplt;
1734:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1735:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Change Rx and Tx Irq Handler to Disable TXEIE, RXNEIE and ERRIE interrupts */
1736:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXEIE))
1737:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1738:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR = SPI_AbortTx_ISR;
1739:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1740:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1741:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXNEIE))
1742:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1743:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR = SPI_AbortRx_ISR;
ARM GAS  /tmp/ccMJVeMK.s 			page 32


1744:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1745:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1746:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear ERRIE interrupts in case of DMA Mode */
1747:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_ERRIE);
1748:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1749:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   abortcplt = 1U;
1750:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
1751:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* If DMA Tx and/or DMA Rx Handles are associated to SPI Handle, DMA Abort complete callbacks sho
1752:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      before any call to DMA Abort functions */  
1753:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* DMA Tx Handle is valid */
1754:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->hdmatx != NULL)
1755:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1756:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Set DMA Abort Complete callback if UART DMA Tx request if enabled.
1757:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        Otherwise, set it to NULL */
1758:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN))
1759:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1760:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->hdmatx->XferAbortCallback = SPI_DMATxAbortCallback;
1761:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1762:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
1763:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1764:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->hdmatx->XferAbortCallback = NULL;
1765:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1766:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }  
1767:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* DMA Rx Handle is valid */
1768:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->hdmarx != NULL)
1769:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1770:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Set DMA Abort Complete callback if UART DMA Rx request if enabled.
1771:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****        Otherwise, set it to NULL */
1772:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXDMAEN))
1773:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1774:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->hdmarx->XferAbortCallback = SPI_DMARxAbortCallback;
1775:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1776:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
1777:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1778:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->hdmarx->XferAbortCallback = NULL;
1779:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1780:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1781:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1782:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI DMA Tx or the SPI Rx request if enabled */
1783:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN)) && (HAL_IS_BIT_SET(hspi->Instance->CR2,
1784:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1785:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Abort the SPI DMA Tx channel */
1786:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmatx != NULL)
1787:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1788:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Abort DMA Tx Handle linked to SPI Peripheral */
1789:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(HAL_DMA_Abort_IT(hspi->hdmatx) != HAL_OK)
1790:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1791:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->hdmatx->XferAbortCallback = NULL;
1792:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1793:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
1794:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1795:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 0U;
1796:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1797:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1798:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Abort the SPI DMA Rx channel */
1799:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmarx != NULL)
1800:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
ARM GAS  /tmp/ccMJVeMK.s 			page 33


1801:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Abort DMA Rx Handle linked to SPI Peripheral */
1802:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(HAL_DMA_Abort_IT(hspi->hdmarx)!=  HAL_OK)
1803:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1804:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->hdmarx->XferAbortCallback = NULL;
1805:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 1U;
1806:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1807:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
1808:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1809:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 0U;
1810:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1811:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1812:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1813:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1814:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI DMA Tx or the SPI Rx request if enabled */
1815:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_TXDMAEN))
1816:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1817:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Abort the SPI DMA Tx channel */
1818:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmatx != NULL)
1819:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1820:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Abort DMA Tx Handle linked to SPI Peripheral */
1821:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(HAL_DMA_Abort_IT(hspi->hdmatx) != HAL_OK)
1822:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->hdmatx->XferAbortCallback = NULL;
1824:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1825:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
1826:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1827:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 0U;
1828:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1829:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1830:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1831:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI DMA Tx or the SPI Rx request if enabled */
1832:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if (HAL_IS_BIT_SET(hspi->Instance->CR2, SPI_CR2_RXDMAEN))
1833:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1834:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Abort the SPI DMA Rx channel */
1835:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmarx != NULL)
1836:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1837:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Abort DMA Rx Handle linked to SPI Peripheral */
1838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(HAL_DMA_Abort_IT(hspi->hdmarx)!=  HAL_OK)
1839:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1840:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->hdmarx->XferAbortCallback = NULL;
1841:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1842:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
1843:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1844:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 0U;
1845:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1846:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1847:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1848:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1849:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(abortcplt == 1U)
1850:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1851:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Reset Tx and Rx transfer counters */
1852:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxXferCount = 0U;
1853:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxXferCount = 0U;
1854:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1855:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Reset errorCode */
1856:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_NONE;
1857:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 34


1858:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Clear the Error flags in the SR register */
1859:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
1860:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1861:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Restore hspi->State to Ready */
1862:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
1863:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1864:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* As no DMA to be aborted, call directly user Abort complete callback */
1865:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_SPI_AbortCpltCallback(hspi);
1866:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1867:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
1868:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1869:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1870:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1871:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Pause the DMA Transfer.
1872:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1873:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
1874:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1875:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1876:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DMAPause(SPI_HandleTypeDef *hspi)
1877:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1878:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
1879:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1880:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1881:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI DMA Tx & Rx requests */
1882:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
1883:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1884:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1885:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1886:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
1888:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1889:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1890:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1891:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Resume the DMA Transfer.
1892:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1893:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
1894:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
1895:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1896:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DMAResume(SPI_HandleTypeDef *hspi)
1897:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1898:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
1899:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_LOCK(hspi);
1900:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1901:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable the SPI DMA Tx & Rx requests */
1902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
1903:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1904:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
1905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
1906:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1907:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
1908:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1909:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1910:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1911:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Stop the DMA Transfer.
1912:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1913:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
1914:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
ARM GAS  /tmp/ccMJVeMK.s 			page 35


1915:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1916:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_StatusTypeDef HAL_SPI_DMAStop(SPI_HandleTypeDef *hspi)
1917:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1918:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* The Lock is not implemented on this API to allow the user application
1919:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      to call the HAL SPI API under callbacks HAL_SPI_TxCpltCallback() or HAL_SPI_RxCpltCallback() o
1920:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      when calling HAL_DMA_Abort() API the DMA TX/RX Transfer complete interrupt is generated
1921:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      and the correspond call back is executed HAL_SPI_TxCpltCallback() or HAL_SPI_RxCpltCallback() 
1922:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      */
1923:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1924:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Abort the SPI DMA tx Stream */
1925:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->hdmatx != NULL)
1926:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1927:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_DMA_Abort(hspi->hdmatx);
1928:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1929:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Abort the SPI DMA rx Stream */
1930:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->hdmarx != NULL)
1931:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1932:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_DMA_Abort(hspi->hdmarx);
1933:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1934:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1935:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable the SPI DMA Tx & Rx requests */
1936:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
1937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
1938:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
1939:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
1940:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1941:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
1942:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle SPI interrupt request.
1943:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
1944:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified SPI module.
1945:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
1946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
1947:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** void HAL_SPI_IRQHandler(SPI_HandleTypeDef *hspi)
1948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
1949:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
1950:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itflag   = hspi->Instance->SR;
1951:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1952:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* SPI in mode Receiver ----------------------------------------------------*/
1953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(((itflag & SPI_FLAG_OVR) == RESET) &&
1954:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      ((itflag & SPI_FLAG_RXNE) != RESET) && ((itsource & SPI_IT_RXNE) != RESET))
1955:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1956:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxISR(hspi);
1957:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return;
1958:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1959:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1960:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* SPI in mode Transmitter -------------------------------------------------*/
1961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(((itflag & SPI_FLAG_TXE) != RESET) && ((itsource & SPI_IT_TXE) != RESET))
1962:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1963:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR(hspi);
1964:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return;
1965:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
1966:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1967:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* SPI in Error Treatment --------------------------------------------------*/
1968:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(((itflag & (SPI_FLAG_MODF | SPI_FLAG_OVR)) != RESET) && ((itsource & SPI_IT_ERR) != RESET))
1969:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
1970:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* SPI Overrun error interrupt occurred ----------------------------------*/
1971:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((itflag & SPI_FLAG_OVR) != RESET)
ARM GAS  /tmp/ccMJVeMK.s 			page 36


1972:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1973:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(hspi->State != HAL_SPI_STATE_BUSY_TX)
1974:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1975:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_OVR);
1976:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_OVRFLAG(hspi);
1977:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1978:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
1979:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
1980:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_OVRFLAG(hspi);
1981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         return;
1982:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
1983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1984:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1985:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* SPI Mode Fault error interrupt occurred -------------------------------*/
1986:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((itflag & SPI_FLAG_MODF) != RESET)
1987:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1988:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_MODF);
1989:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_CLEAR_MODFFLAG(hspi);
1990:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
1991:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1992:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
1993:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
1994:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable all interrupts */
1995:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_DISABLE_IT(hspi, SPI_IT_RXNE | SPI_IT_TXE | SPI_IT_ERR);
1996:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
1997:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->State = HAL_SPI_STATE_READY;
1998:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable the SPI DMA requests if enabled */
1999:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if ((HAL_IS_BIT_SET(itsource, SPI_CR2_TXDMAEN))||(HAL_IS_BIT_SET(itsource, SPI_CR2_RXDMAEN)))
2000:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2001:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN));
2002:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2003:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Abort the SPI DMA Rx channel */
2004:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if(hspi->hdmarx != NULL)
2005:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
2006:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           /* Set the SPI DMA Abort callback :
2007:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           will lead to call HAL_SPI_ErrorCallback() at end of DMA abort procedure */
2008:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           hspi->hdmarx->XferAbortCallback = SPI_DMAAbortOnError;
2009:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmarx);
2010:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
2011:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Abort the SPI DMA Tx channel */
2012:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if(hspi->hdmatx != NULL)
2013:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
2014:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           /* Set the SPI DMA Abort callback :
2015:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           will lead to call HAL_SPI_ErrorCallback() at end of DMA abort procedure */
2016:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           hspi->hdmatx->XferAbortCallback = SPI_DMAAbortOnError;
2017:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmatx);
2018:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
2019:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2020:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
2021:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2022:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Call user error callback */
2023:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         HAL_SPI_ErrorCallback(hspi);
2024:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2025:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2026:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return;
2027:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2028:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
ARM GAS  /tmp/ccMJVeMK.s 			page 37


2029:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2030:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2031:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Tx Transfer completed callback.
2032:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2033:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2034:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2035:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2036:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_TxCpltCallback(SPI_HandleTypeDef *hspi)
2037:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2038:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2039:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2040:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2041:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_TxCpltCallback should be implemented in the user file
2042:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2043:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2044:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2045:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2046:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Rx Transfer completed callback.
2047:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2048:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2049:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2050:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2051:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_RxCpltCallback(SPI_HandleTypeDef *hspi)
2052:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2053:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2054:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2055:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_RxCpltCallback should be implemented in the user file
2057:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2058:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2059:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2060:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2061:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Tx and Rx Transfer completed callback.
2062:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2063:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2064:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2065:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2066:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_TxRxCpltCallback(SPI_HandleTypeDef *hspi)
2067:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2068:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2069:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2070:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2071:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_TxRxCpltCallback should be implemented in the user file
2072:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2073:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2074:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2075:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2076:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Tx Half Transfer completed callback.
2077:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2078:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2079:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2080:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2081:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_TxHalfCpltCallback(SPI_HandleTypeDef *hspi)
2082:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2083:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2084:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2085:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
ARM GAS  /tmp/ccMJVeMK.s 			page 38


2086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_TxHalfCpltCallback should be implemented in the user file
2087:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2088:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2089:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2090:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2091:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Rx Half Transfer completed callback.
2092:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2093:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2094:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2095:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2096:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_RxHalfCpltCallback(SPI_HandleTypeDef *hspi)
2097:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2098:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2099:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2100:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2101:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_RxHalfCpltCallback() should be implemented in the user file
2102:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2103:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2104:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2105:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2106:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Tx and Rx Half Transfer callback.
2107:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2108:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2109:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2110:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2111:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_TxRxHalfCpltCallback(SPI_HandleTypeDef *hspi)
2112:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2113:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2114:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2115:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2116:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_TxRxHalfCpltCallback() should be implemented in the user file
2117:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2118:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2119:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2120:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2121:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief SPI error callback.
2122:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2123:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2124:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2125:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2126:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  __weak void HAL_SPI_ErrorCallback(SPI_HandleTypeDef *hspi)
2127:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2128:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2129:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2130:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2131:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_ErrorCallback should be implemented in the user file
2132:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    */
2133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : The ErrorCode parameter in the hspi handle is updated by the SPI processes
2134:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             and user can use HAL_SPI_GetError() API to check the latest error occurred
2135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2136:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2137:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2138:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2139:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  SPI Abort Complete callback.
2140:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi SPI handle.
2141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2142:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
ARM GAS  /tmp/ccMJVeMK.s 			page 39


2143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak void HAL_SPI_AbortCpltCallback(SPI_HandleTypeDef *hspi)
2144:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2145:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
2146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
2147:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2148:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* NOTE : This function should not be modified, when the callback is needed,
2149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****             the HAL_SPI_AbortCpltCallback can be implemented in the user file.
2150:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    */
2151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2152:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2153:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2154:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
2155:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2156:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @defgroup SPI_Exported_Functions_Group3 Peripheral State and Errors functions
2158:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief   SPI control functions
2159:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *
2160:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** @verbatim
2161:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  ===============================================================================
2162:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                       ##### Peripheral State and Errors functions #####
2163:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  ===============================================================================
2164:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     [..]
2165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     This subsection provides a set of functions allowing to control the SPI.
2166:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      (+) HAL_SPI_GetState() API can be helpful to check in run-time the state of the SPI peripheral
2167:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      (+) HAL_SPI_GetError() check in run-time Errors occurring during communication
2168:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** @endverbatim
2169:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
2170:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2171:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2172:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2173:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Return the SPI handle state.
2174:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2176:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval SPI state
2177:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2178:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** HAL_SPI_StateTypeDef HAL_SPI_GetState(SPI_HandleTypeDef *hspi)
2179:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2180:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Return SPI handle state */
2181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return hspi->State;
2182:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2183:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2184:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2185:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Return the SPI error code.
2186:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2187:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2188:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval SPI error code in bitmap format
2189:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2190:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** uint32_t HAL_SPI_GetError(SPI_HandleTypeDef *hspi)
2191:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2192:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Return SPI ErrorCode */
2193:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return hspi->ErrorCode;
2194:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2195:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2196:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
2198:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2199:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 40


2200:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2201:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
2202:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2203:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2204:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /** @addtogroup SPI_Private_Functions
2205:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief   Private functions
2206:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @{
2207:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2208:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2209:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2210:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief DMA SPI transmit process complete callback.
2211:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2212:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2213:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2214:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2215:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMATransmitCplt(DMA_HandleTypeDef *hdma)
2216:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2217:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2218:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
2219:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2220:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
2221:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
2222:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2223:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* DMA Normal Mode */
2224:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hdma->Instance->CCR & DMA_CCR_CIRC) != DMA_CCR_CIRC)
2225:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable Tx DMA Request */
2227:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN);
2228:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2229:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check the end of the transaction */
2230:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(SPI_CheckFlag_BSY(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
2231:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2232:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
2233:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2234:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2235:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Clear overrun flag in 2 Lines communication mode because received data is not read */
2236:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.Direction == SPI_DIRECTION_2LINES)
2237:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2238:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_CLEAR_OVRFLAG(hspi);
2239:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2240:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2241:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxXferCount = 0U;
2242:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
2243:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2244:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2245:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
2247:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2248:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2249:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2250:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_TxCpltCallback(hspi);
2251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2252:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2253:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2254:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief DMA SPI receive process complete callback.
2255:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2256:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
ARM GAS  /tmp/ccMJVeMK.s 			page 41


2257:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2258:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2259:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAReceiveCplt(DMA_HandleTypeDef *hdma)
2260:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2261:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2262:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2263:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
2264:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
2265:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2266:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout management*/
2267:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
2268:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2269:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****  
2270:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hdma->Instance->CCR & DMA_CCR_CIRC) != DMA_CCR_CIRC)
2271:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2272:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2273:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* CRC handling */
2274:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2275:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2276:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Wait until RXNE flag */
2277:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SPI_FLAG_RXNE, SPI_DEFAULT_TIMEOUT, tic
2278:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2279:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Error on the CRC reception */
2280:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2281:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2282:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Read CRC */
2283:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       tmpreg = hspi->Instance->DR;
2284:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* To avoid GCC warning */
2285:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       UNUSED(tmpreg);
2286:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2287:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2288:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2289:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable Rx/Tx DMA Request (done by default to handle the case master rx direction 2 lines) *
2290:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2291:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2292:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check the end of the transaction */
2293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((hspi->Init.Mode == SPI_MODE_MASTER)&&((hspi->Init.Direction == SPI_DIRECTION_1LINE)||(hspi-
2294:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2295:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable SPI peripheral */
2296:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_DISABLE(hspi);
2297:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2298:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2299:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxXferCount = 0U;
2300:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
2301:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2302:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2303:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check if CRC error occurred */
2304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
2305:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2306:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check if CRC error is valid or not (workaround to be applied or not) */
2307:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if (SPI_ISCRCErrorValid(hspi) == SPI_VALID_CRC_ERROR)
2308:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2310:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2311:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Reset CRC Calculation */
2312:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SPI_RESET_CRC(hspi);
2313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
ARM GAS  /tmp/ccMJVeMK.s 			page 42


2314:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
2315:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2316:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
2317:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2318:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2319:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2320:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2321:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2322:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2323:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
2324:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2325:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2326:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2327:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_RxCpltCallback(hspi);
2328:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2329:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2330:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI transmit receive process complete callback.
2332:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2334:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2335:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2336:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMATransmitReceiveCplt(DMA_HandleTypeDef *hdma)
2337:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2338:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2339:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
2340:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2341:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO int16_t tmpreg = 0U;
2342:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2343:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout management*/
2344:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
2345:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2346:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hdma->Instance->CCR & DMA_CCR_CIRC) != DMA_CCR_CIRC)
2347:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2348:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2349:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* CRC handling */
2350:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2351:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2352:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Wait the CRC data */
2353:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_RXNE, SET, SPI_DEFAULT_TIMEOUT, tickstart) !=
2354:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2355:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2356:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2357:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Read CRC to Flush DR and RXNE flag */
2358:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       tmpreg = hspi->Instance->DR;
2359:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* To avoid GCC warning */
2360:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       UNUSED(tmpreg);
2361:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2362:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2363:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check the end of the transaction */
2364:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(SPI_CheckFlag_BSY(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
2365:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2366:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
2367:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2368:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2369:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable Rx/Tx DMA Request */
2370:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
ARM GAS  /tmp/ccMJVeMK.s 			page 43


2371:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2372:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxXferCount = 0U;
2373:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxXferCount = 0U;
2374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
2375:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2376:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2377:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check if CRC error occurred */
2378:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
2379:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2380:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check if CRC error is valid or not (workaround to be applied or not) */
2381:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if (SPI_ISCRCErrorValid(hspi) == SPI_VALID_CRC_ERROR)
2382:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2383:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
2384:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2385:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Reset CRC Calculation */
2386:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SPI_RESET_CRC(hspi);
2387:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2388:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
2389:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2390:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
2391:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2392:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2393:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2394:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2395:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
2396:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2397:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
2398:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2399:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2400:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2401:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_TxRxCpltCallback(hspi);
2402:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2403:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2404:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2405:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI half transmit process complete callback.
2406:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2407:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2408:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2409:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2410:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAHalfTransmitCplt(DMA_HandleTypeDef *hdma)
2411:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2412:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2413:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2414:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_TxHalfCpltCallback(hspi);
2415:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2416:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2417:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2418:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI half receive process complete callback
2419:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2420:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2421:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2422:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2423:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAHalfReceiveCplt(DMA_HandleTypeDef *hdma)
2424:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2425:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2426:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2427:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_RxHalfCpltCallback(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 44


2428:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2429:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2430:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2431:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI half transmit receive process complete callback.
2432:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2433:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2434:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2435:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2436:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAHalfTransmitReceiveCplt(DMA_HandleTypeDef *hdma)
2437:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2438:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2439:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2440:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_TxRxHalfCpltCallback(hspi);
2441:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2442:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2443:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2444:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI communication error callback.
2445:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma: pointer to a DMA_HandleTypeDef structure that contains
2446:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for the specified DMA module.
2447:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2448:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2449:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAError(DMA_HandleTypeDef *hdma)
2450:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2451:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = (SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2452:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2453:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /* Stop the disable DMA transfer on SPI side */
2454:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN | SPI_CR2_RXDMAEN);
2455:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2456:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_DMA);
2457:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
2458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
2459:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2460:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2461:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2462:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI communication abort callback, when initiated by HAL services on Error
2463:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         (To be called at end of DMA Abort procedure following error occurrence).
2464:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma DMA handle.
2465:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2466:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2467:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMAAbortOnError(DMA_HandleTypeDef *hdma)
2468:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2469:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
2471:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
2472:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
2474:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2475:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2476:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2477:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI Tx communication abort callback, when initiated by user
2478:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         (To be called at end of DMA Tx Abort procedure following user abort request).
2479:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   When this callback is executed, User Abort complete call back is called only if no
2480:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         Abort still ongoing for Rx DMA Handle.
2481:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma DMA handle.
2482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2483:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2484:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMATxAbortCallback(DMA_HandleTypeDef *hdma)
ARM GAS  /tmp/ccMJVeMK.s 			page 45


2485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
2487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2488:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback = NULL;
2490:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2491:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable Tx DMA Request */
2492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_TXDMAEN );
2493:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2494:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Wait until TXE flag is set */
2495:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   do
2496:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2497:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(count-- == 0U)
2498:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2499:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
2500:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
2501:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2502:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2503:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((hspi->Instance->SR & SPI_FLAG_TXE) == RESET);
2504:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2505:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if an Abort process is still ongoing */
2506:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->hdmarx != NULL)
2507:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2508:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmarx->XferAbortCallback != NULL)
2509:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2510:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2511:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2512:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2513:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
2514:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* No Abort process still ongoing : All DMA channels are aborted, call user Abort Complete callba
2515:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
2516:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
2517:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2518:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset errorCode */
2519:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
2520:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2521:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Restore hspi->State to Ready */
2522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State  = HAL_SPI_STATE_READY;
2523:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2524:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Call user Abort complete callback */
2525:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_AbortCpltCallback(hspi);
2526:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2527:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2528:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  DMA SPI Rx communication abort callback, when initiated by user
2530:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         (To be called at end of DMA Rx Abort procedure following user abort request).
2531:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @note   When this callback is executed, User Abort complete call back is called only if no
2532:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         Abort still ongoing for Tx DMA Handle.
2533:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hdma DMA handle.
2534:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2535:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2536:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_DMARxAbortCallback(DMA_HandleTypeDef *hdma)
2537:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2538:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
2539:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable SPI Peripheral */
2541:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 46


2542:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2543:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmarx->XferAbortCallback = NULL;
2544:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2545:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable Rx DMA Request */
2546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, SPI_CR2_RXDMAEN);
2547:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2548:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if an Abort process is still ongoing */
2549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->hdmatx != NULL)
2550:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2551:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->hdmatx->XferAbortCallback != NULL)
2552:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2553:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2554:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2555:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2556:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2557:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* No Abort process still ongoing : All DMA channels are aborted, call user Abort Complete callba
2558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
2559:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
2560:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2561:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Reset errorCode */
2562:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode = HAL_SPI_ERROR_NONE;
2563:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2564:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear the Error flags in the SR register */
2565:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_CLEAR_OVRFLAG(hspi);
2566:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2567:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Restore hspi->State to Ready */
2568:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State  = HAL_SPI_STATE_READY;
2569:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2570:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Call user Abort complete callback */
2571:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_AbortCpltCallback(hspi);
2572:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2573:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2574:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2575:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Rx 8-bit handler for Transmit and Receive in Interrupt mode.
2576:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2577:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2578:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2579:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2580:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
2581:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2582:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Receive data in 8bit mode */
2583:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *hspi->pRxBuffPtr++ = *((__IO uint8_t *)&hspi->Instance->DR);
2584:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
2585:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2586:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* check end of the reception */
2587:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->RxXferCount == 0U)
2588:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2589:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2590:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2591:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2592:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->RxISR =  SPI_2linesRxISR_8BITCRC;
2593:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2594:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2595:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2596:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2597:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable RXNE interrupt */
2598:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
ARM GAS  /tmp/ccMJVeMK.s 			page 47


2599:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->TxXferCount == 0U)
2601:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2602:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
2603:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2604:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2605:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2606:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2607:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2608:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2609:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Rx 8-bit handler for Transmit and Receive in Interrupt mode.
2610:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2611:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2612:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2613:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2614:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi)
2615:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint8_t tmpreg = 0U;
2617:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Read data register to flush CRC */
2619:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmpreg = *((__IO uint8_t *)&hspi->Instance->DR);
2620:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2621:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* To avoid GCC warning */
2622:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2623:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(tmpreg);
2624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2625:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****    /* Disable RXNE interrupt */
2626:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
2627:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2628:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->TxXferCount == 0U)
2629:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2630:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_CloseRxTx_ISR(hspi);
2631:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2632:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2633:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2634:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2635:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2636:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Tx 8-bit handler for Transmit and Receive in Interrupt mode.
2637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2638:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2639:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2640:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2641:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesTxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
2642:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2643:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
2644:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
2645:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2646:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* check the end of the transmission */
2647:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->TxXferCount == 0U)
2648:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2649:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2650:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2651:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2652:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
2653:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
2654:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2655:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
ARM GAS  /tmp/ccMJVeMK.s 			page 48


2656:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2657:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2658:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable TXE interrupt */
2659:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
2660:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->RxXferCount == 0U)
2662:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2663:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
2664:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2665:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2666:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2667:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2668:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2669:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Rx 16-bit handler for Transmit and Receive in Interrupt mode.
2670:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2671:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2672:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2673:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
2675:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2676:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
2677:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *((uint16_t*)hspi->pRxBuffPtr) = hspi->Instance->DR;
2678:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
2679:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
2680:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2681:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->RxXferCount == 0U)
2682:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2683:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2684:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2685:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2686:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->RxISR =  SPI_2linesRxISR_16BITCRC;
2687:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2688:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2689:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2690:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2691:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable RXNE interrupt */
2692:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_RXNE);
2693:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2694:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->TxXferCount == 0U)
2695:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2696:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
2697:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2698:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2699:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2700:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2701:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2702:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Manage the CRC 16-bit receive for Transmit and Receive in Interrupt mode.
2704:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2705:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2706:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2707:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2708:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesRxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi)
2709:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2710:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
2711:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
2712:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 49


2713:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Read data register to flush CRC */
2714:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmpreg = hspi->Instance->DR;
2715:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2716:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* To avoid GCC warning */
2717:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(tmpreg);
2718:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2719:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable RXNE interrupt */
2720:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, SPI_IT_RXNE);
2721:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2722:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_CloseRxTx_ISR(hspi);
2723:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2724:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2725:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2726:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2727:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Tx 16-bit handler for Transmit and Receive in Interrupt mode.
2728:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2729:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2730:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2731:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2732:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_2linesTxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
2733:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2734:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
2735:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->Instance->DR = *((uint16_t *)hspi->pTxBuffPtr);
2736:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
2737:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
2738:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2739:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable CRC Transmission */
2740:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->TxXferCount == 0U)
2741:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2742:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2743:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2744:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2745:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
2746:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
2747:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2748:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2749:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2750:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2751:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable TXE interrupt */
2752:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, SPI_IT_TXE);
2753:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2754:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->RxXferCount == 0U)
2755:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2756:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SPI_CloseRxTx_ISR(hspi);
2757:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2758:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2759:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2760:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2761:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2762:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2763:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Manage the CRC 8-bit receive in Interrupt context.
2764:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2765:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2766:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2767:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2768:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_8BITCRC(struct __SPI_HandleTypeDef *hspi)
2769:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
ARM GAS  /tmp/ccMJVeMK.s 			page 50


2770:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint8_t tmpreg = 0U;
2771:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2772:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Read data register to flush CRC */
2773:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmpreg = *((__IO uint8_t*)&hspi->Instance->DR);
2774:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2775:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* To avoid GCC warning */
2776:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(tmpreg);
2777:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2778:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_CloseRx_ISR(hspi);
2779:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2780:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2781:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2782:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2783:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Manage the receive 8-bit in Interrupt context.
2784:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2785:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2786:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2787:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2788:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
2789:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2790:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *hspi->pRxBuffPtr++ = (*(__IO uint8_t *)&hspi->Instance->DR);
2791:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
2792:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2793:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2794:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable CRC Transmission */
2795:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->RxXferCount == 1U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
2796:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2797:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
2798:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2799:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2800:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2801:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->RxXferCount == 0U)
2802:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2803:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2804:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2805:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2806:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->RxISR =  SPI_RxISR_8BITCRC;
2807:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2808:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2809:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2810:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_CloseRx_ISR(hspi);
2811:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2812:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2813:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2814:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2815:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2816:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Manage the CRC 16-bit receive in Interrupt context.
2817:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2818:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2819:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2820:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2821:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_16BITCRC(struct __SPI_HandleTypeDef *hspi)
2822:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint16_t tmpreg = 0U;
2824:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2825:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Read data register to flush CRC */
2826:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmpreg = hspi->Instance->DR;
ARM GAS  /tmp/ccMJVeMK.s 			page 51


2827:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2828:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* To avoid GCC warning */
2829:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(tmpreg);
2830:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2831:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable RXNE and ERR interrupt */
2832:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
2833:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2834:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_CloseRx_ISR(hspi);
2835:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2836:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2837:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2839:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Manage the 16-bit receive in Interrupt context.
2840:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2841:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2842:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2843:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2844:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_RxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
2845:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2846:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *((uint16_t *)hspi->pRxBuffPtr) = hspi->Instance->DR;
2847:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
2848:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
2849:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2850:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2851:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Enable CRC Transmission */
2852:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if((hspi->RxXferCount == 1U) && (hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE))
2853:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2854:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
2855:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2856:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2857:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2858:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->RxXferCount == 0U)
2859:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2860:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2861:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2862:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2863:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->RxISR = SPI_RxISR_16BITCRC;
2864:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
2865:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2866:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2867:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_CloseRx_ISR(hspi);
2868:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2869:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2870:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2871:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2872:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle the data 8-bit transmit in Interrupt mode.
2873:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2874:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2875:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2876:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2877:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_TxISR_8BIT(struct __SPI_HandleTypeDef *hspi)
2878:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2879:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
2880:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
2881:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2882:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->TxXferCount == 0U)
2883:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
ARM GAS  /tmp/ccMJVeMK.s 			page 52


2884:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2885:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2886:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Enable CRC Transmission */
2888:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
2889:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2890:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2891:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_CloseTx_ISR(hspi);
2892:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2893:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2894:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2895:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2896:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle the data 16-bit transmit in Interrupt mode.
2897:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2898:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2899:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2900:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2901:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_TxISR_16BIT(struct __SPI_HandleTypeDef *hspi)
2902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2903:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
2904:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->Instance->DR = *((uint16_t *)hspi->pTxBuffPtr);
2905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
2906:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
2907:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2908:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->TxXferCount == 0U)
2909:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2910:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
2911:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2912:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2913:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Enable CRC Transmission */
2914:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->Instance->CR1, SPI_CR1_CRCNEXT);
2915:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2916:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
2917:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SPI_CloseTx_ISR(hspi);
2918:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2919:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2920:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2921:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2922:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Handle SPI Communication Timeout.
2923:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param hspi: pointer to a SPI_HandleTypeDef structure that contains
2924:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *              the configuration information for SPI module.
2925:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param Flag: SPI flag to check
2926:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param State: flag state to check
2927:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param Timeout: Timeout duration
2928:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param Tickstart: tick start value
2929:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
2930:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2931:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static HAL_StatusTypeDef SPI_WaitFlagStateUntilTimeout(SPI_HandleTypeDef *hspi, uint32_t Flag, uint
2932:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2933:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((((hspi->Instance->SR & Flag) == (Flag)) ? SET : RESET) != State)
2934:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2935:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(Timeout != HAL_MAX_DELAY)
2936:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
2937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if((Timeout == 0U) || ((HAL_GetTick()-Tickstart) >= Timeout))
2938:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
2939:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Disable the SPI and reset the CRC: the CRC value should be cleared
2940:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         on both master and slave sides in order to resynchronize the master
ARM GAS  /tmp/ccMJVeMK.s 			page 53


2941:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         and slave for their respective CRC calculation */
2942:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2943:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Disable TXE, RXNE and ERR interrupts for the interrupt process */
2944:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_RXNE | SPI_IT_ERR));
2945:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if((hspi->Init.Mode == SPI_MODE_MASTER)&&((hspi->Init.Direction == SPI_DIRECTION_1LINE)||(h
2947:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
2948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           /* Disable SPI peripheral */
2949:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           __HAL_SPI_DISABLE(hspi);
2950:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
2951:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2952:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Reset CRC Calculation */
2953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         if(hspi->Init.CRCCalculation == SPI_CRCCALCULATION_ENABLE)
2954:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
2955:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           SPI_RESET_CRC(hspi);
2956:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
2957:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2958:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->State= HAL_SPI_STATE_READY;
2959:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2960:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Process Unlocked */
2961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_UNLOCK(hspi);
2962:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2963:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         return HAL_TIMEOUT;
2964:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
2965:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
2966:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2967:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2968:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
2969:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2970:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2971:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief Handle to check BSY flag before start a new transaction.
2972:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param hspi: pointer to a SPI_HandleTypeDef structure that contains
2973:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *              the configuration information for SPI module.
2974:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param Timeout: Timeout duration
2975:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param Tickstart: tick start value
2976:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval HAL status
2977:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2978:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static HAL_StatusTypeDef SPI_CheckFlag_BSY(SPI_HandleTypeDef *hspi, uint32_t Timeout, uint32_t Tick
2979:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2980:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Control the BSY flag */
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_WaitFlagStateUntilTimeout(hspi, SPI_FLAG_BSY, RESET, Timeout, Tickstart) != HAL_OK)
2982:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
2984:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
2985:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
2986:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
2987:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
2988:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
2989:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
2990:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle the end of the RXTX transaction.
2991:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
2992:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
2993:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
2994:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
2995:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_CloseRxTx_ISR(SPI_HandleTypeDef *hspi)
2996:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
2997:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
ARM GAS  /tmp/ccMJVeMK.s 			page 54


2998:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
2999:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
3000:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
3001:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3002:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable ERR interrupt */
3003:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, SPI_IT_ERR);
3004:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3005:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Wait until TXE flag is set */
3006:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   do
3007:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3008:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(count-- == 0U)
3009:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3010:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3011:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
3012:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3013:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3014:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((hspi->Instance->SR & SPI_FLAG_TXE) == RESET);
3015:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
3016:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the end of the transaction */
3017:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_CheckFlag_BSY(hspi, SPI_DEFAULT_TIMEOUT, tickstart)!=HAL_OK)
3018:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3019:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3020:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3021:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3022:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear overrun flag in 2 Lines communication mode because received is not read */
3023:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_2LINES)
3024:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3025:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
3026:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3027:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3028:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3029:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check if CRC error occurred */
3030:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
3031:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3032:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check if CRC error is valid or not (workaround to be applied or not) */
3033:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if (SPI_ISCRCErrorValid(hspi) == SPI_VALID_CRC_ERROR)
3034:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3035:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->State = HAL_SPI_STATE_READY;
3036:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
3037:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3038:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Reset CRC Calculation */
3039:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SPI_RESET_CRC(hspi);
3040:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3041:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
3042:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3043:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
3044:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3045:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
3046:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3047:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3048:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
3049:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3050:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3051:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->ErrorCode == HAL_SPI_ERROR_NONE)
3052:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3053:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(hspi->State == HAL_SPI_STATE_BUSY_RX)
3054:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
ARM GAS  /tmp/ccMJVeMK.s 			page 55


3055:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       	hspi->State = HAL_SPI_STATE_READY;
3056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         HAL_SPI_RxCpltCallback(hspi);
3057:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
3058:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
3059:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
3060:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       	hspi->State = HAL_SPI_STATE_READY;
3061:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         HAL_SPI_TxRxCpltCallback(hspi);
3062:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
3063:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3064:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
3065:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3066:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       hspi->State = HAL_SPI_STATE_READY;
3067:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
3068:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3069:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3070:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3071:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3072:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
3073:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3074:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
3075:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle the end of the RX transaction.
3076:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3077:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
3078:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
3079:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
3080:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_CloseRx_ISR(SPI_HandleTypeDef *hspi)
3081:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
3082:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable RXNE and ERR interrupt */
3083:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_RXNE | SPI_IT_ERR));
3084:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3085:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check the end of the transaction */
3086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if((hspi->Init.Mode == SPI_MODE_MASTER)&&((hspi->Init.Direction == SPI_DIRECTION_1LINE)||(hspi-
3087:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3088:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable SPI peripheral */
3089:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_DISABLE(hspi);
3090:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3091:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3092:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Clear overrun flag in 2 Lines communication mode because received is not read */
3093:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(hspi->Init.Direction == SPI_DIRECTION_2LINES)
3094:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3095:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_CLEAR_OVRFLAG(hspi);
3096:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3097:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
3098:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3099:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3100:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Check if CRC error occurred */
3101:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(__HAL_SPI_GET_FLAG(hspi, SPI_FLAG_CRCERR) != RESET)
3102:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3103:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Check if CRC error is valid or not (workaround to be applied or not) */
3104:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if (SPI_ISCRCErrorValid(hspi) == SPI_VALID_CRC_ERROR)
3105:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
3106:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_CRC);
3107:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3108:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Reset CRC Calculation */
3109:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         SPI_RESET_CRC(hspi);
3110:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3111:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****          HAL_SPI_ErrorCallback(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 56


3112:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
3113:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
3114:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
3115:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_CRCERRFLAG(hspi);
3116:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
3117:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3118:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     else
3119:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3120:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3121:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       if(hspi->ErrorCode == HAL_SPI_ERROR_NONE)
3122:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
3123:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         HAL_SPI_RxCpltCallback(hspi);
3124:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
3125:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       else
3126:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
3127:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         HAL_SPI_ErrorCallback(hspi);
3128:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
3129:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
3130:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3131:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
3132:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
3133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3134:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
3135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle the end of the TX transaction.
3136:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3137:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
3138:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
3139:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
3140:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_CloseTx_ISR(SPI_HandleTypeDef *hspi)
3141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
3142:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
3143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
3144:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3145:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout management*/
3146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tickstart = HAL_GetTick();
3147:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3148:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Wait until TXE flag is set */
3149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   do
3150:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(count-- == 0U)
3152:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3153:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3154:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
3155:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3156:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((hspi->Instance->SR & SPI_FLAG_TXE) == RESET);
3158:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3159:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable TXE and ERR interrupt */
3160:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE_IT(hspi, (SPI_IT_TXE | SPI_IT_ERR));
3161:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3162:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check Busy flag */
3163:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(SPI_CheckFlag_BSY(hspi, SPI_DEFAULT_TIMEOUT, tickstart) != HAL_OK)
3164:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3166:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3167:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3168:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Clear overrun flag in 2 Lines communication mode because received is not read */
ARM GAS  /tmp/ccMJVeMK.s 			page 57


3169:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->Init.Direction == SPI_DIRECTION_2LINES)
3170:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3171:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     __HAL_SPI_CLEAR_OVRFLAG(hspi);
3172:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3173:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3174:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
3175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
3176:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3177:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_SPI_ErrorCallback(hspi);
3178:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3179:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   else
3180:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     HAL_SPI_TxCpltCallback(hspi);
3182:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3183:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
3184:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3185:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
3186:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @}
3187:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
3188:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3189:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
3190:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle abort a Tx or Rx transaction.
3191:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3192:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
3193:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
3194:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
3195:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_AbortRx_ISR(SPI_HandleTypeDef *hspi)
3196:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
  26              		.loc 1 3196 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              		@ link register save eliminated.
  31              	.LVL0:
3197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t tmpreg = 0U;
3198:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
  32              		.loc 1 3198 0
  33 0000 6422     		movs	r2, #100
3196:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t tmpreg = 0U;
  34              		.loc 1 3196 0
  35 0002 30B4     		push	{r4, r5}
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 5, -4
3197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t tmpreg = 0U;
  39              		.loc 1 3197 0
  40 0004 0024     		movs	r4, #0
  41              		.loc 1 3198 0
  42 0006 134B     		ldr	r3, .L9
  43 0008 134D     		ldr	r5, .L9+4
  44 000a 1B68     		ldr	r3, [r3]
3196:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t tmpreg = 0U;
  45              		.loc 1 3196 0
  46 000c 82B0     		sub	sp, sp, #8
  47              		.cfi_def_cfa_offset 16
  48              		.loc 1 3198 0
  49 000e A5FB0353 		umull	r5, r3, r5, r3
ARM GAS  /tmp/ccMJVeMK.s 			page 58


  50 0012 5B0A     		lsrs	r3, r3, #9
  51 0014 02FB03F3 		mul	r3, r2, r3
3197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t tmpreg = 0U;
  52              		.loc 1 3197 0
  53 0018 0094     		str	r4, [sp]
  54 001a 0168     		ldr	r1, [r0]
  55              		.loc 1 3198 0
  56 001c 0193     		str	r3, [sp, #4]
  57 001e 02E0     		b	.L4
  58              	.L2:
3199:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3200:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Wait until TXE flag is set */
3201:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   do
3202:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
3203:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     if(count-- == 0U)
3204:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
3205:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       SET_BIT(hspi->ErrorCode, HAL_SPI_ERROR_FLAG);
3206:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
3207:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
3208:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
3209:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((hspi->Instance->SR & SPI_FLAG_TXE) == RESET);
  59              		.loc 1 3209 0
  60 0020 8B68     		ldr	r3, [r1, #8]
  61 0022 9B07     		lsls	r3, r3, #30
  62 0024 08D4     		bmi	.L3
  63              	.L4:
3203:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
  64              		.loc 1 3203 0
  65 0026 019B     		ldr	r3, [sp, #4]
  66 0028 5A1E     		subs	r2, r3, #1
  67 002a 0192     		str	r2, [sp, #4]
  68 002c 002B     		cmp	r3, #0
  69 002e F7D1     		bne	.L2
3205:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
  70              		.loc 1 3205 0
  71 0030 436D     		ldr	r3, [r0, #84]
  72 0032 43F02003 		orr	r3, r3, #32
  73 0036 4365     		str	r3, [r0, #84]
  74              	.L3:
3210:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3211:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable SPI Peripheral */
3212:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);    
  75              		.loc 1 3212 0
  76 0038 0B68     		ldr	r3, [r1]
  77 003a 23F04003 		bic	r3, r3, #64
  78 003e 0B60     		str	r3, [r1]
3213:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3214:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable TXEIE, RXNEIE and ERRIE(mode fault event, overrun error, TI frame error) interrupts */
3215:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXEIE | SPI_CR2_RXNEIE | SPI_CR2_ERRIE));
  79              		.loc 1 3215 0
  80 0040 4B68     		ldr	r3, [r1, #4]
  81 0042 23F0E003 		bic	r3, r3, #224
  82 0046 4B60     		str	r3, [r1, #4]
3216:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3217:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Flush DR Register */
3218:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmpreg = (*(__IO uint32_t *)&hspi->Instance->DR);
  83              		.loc 1 3218 0
ARM GAS  /tmp/ccMJVeMK.s 			page 59


  84 0048 CB68     		ldr	r3, [r1, #12]
  85 004a 0093     		str	r3, [sp]
3219:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3220:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* To avoid GCC warning */
3221:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(tmpreg);
  86              		.loc 1 3221 0
  87 004c 009B     		ldr	r3, [sp]
3222:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
  88              		.loc 1 3222 0
  89 004e 02B0     		add	sp, sp, #8
  90              		.cfi_def_cfa_offset 8
  91              		@ sp needed
  92 0050 30BC     		pop	{r4, r5}
  93              		.cfi_restore 5
  94              		.cfi_restore 4
  95              		.cfi_def_cfa_offset 0
  96 0052 7047     		bx	lr
  97              	.L10:
  98              		.align	2
  99              	.L9:
 100 0054 00000000 		.word	SystemCoreClock
 101 0058 F1197605 		.word	91625969
 102              		.cfi_endproc
 103              	.LFE116:
 105              		.section	.text.SPI_AbortTx_ISR,"ax",%progbits
 106              		.align	1
 107              		.p2align 2,,3
 108              		.syntax unified
 109              		.thumb
 110              		.thumb_func
 111              		.fpu softvfp
 113              	SPI_AbortTx_ISR:
 114              	.LFB117:
3223:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3224:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
3225:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Handle abort a Tx or Rx transaction.
3226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3227:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
3228:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval None
3229:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   */
3230:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** static void SPI_AbortTx_ISR(SPI_HandleTypeDef *hspi)
3231:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 115              		.loc 1 3231 0
 116              		.cfi_startproc
 117              		@ args = 0, pretend = 0, frame = 0
 118              		@ frame_needed = 0, uses_anonymous_args = 0
 119              		@ link register save eliminated.
 120              	.LVL1:
3232:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable TXEIE, RXNEIE and ERRIE(mode fault event, overrun error, TI frame error) interrupts */
3233:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   CLEAR_BIT(hspi->Instance->CR2, (SPI_CR2_TXEIE | SPI_CR2_RXNEIE | SPI_CR2_ERRIE));
 121              		.loc 1 3233 0
 122 0000 0368     		ldr	r3, [r0]
 123 0002 5A68     		ldr	r2, [r3, #4]
 124 0004 22F0E002 		bic	r2, r2, #224
 125 0008 5A60     		str	r2, [r3, #4]
3234:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3235:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Disable SPI Peripheral */
ARM GAS  /tmp/ccMJVeMK.s 			page 60


3236:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_SPI_DISABLE(hspi);
 126              		.loc 1 3236 0
 127 000a 1A68     		ldr	r2, [r3]
 128 000c 22F04002 		bic	r2, r2, #64
 129 0010 1A60     		str	r2, [r3]
 130 0012 7047     		bx	lr
 131              		.cfi_endproc
 132              	.LFE117:
 134              		.section	.text.SPI_WaitFlagStateUntilTimeout,"ax",%progbits
 135              		.align	1
 136              		.p2align 2,,3
 137              		.syntax unified
 138              		.thumb
 139              		.thumb_func
 140              		.fpu softvfp
 142              	SPI_WaitFlagStateUntilTimeout:
 143              	.LFB111:
2932:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((((hspi->Instance->SR & Flag) == (Flag)) ? SET : RESET) != State)
 144              		.loc 1 2932 0
 145              		.cfi_startproc
 146              		@ args = 4, pretend = 0, frame = 0
 147              		@ frame_needed = 0, uses_anonymous_args = 0
 148              	.LVL2:
 149 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 150              		.cfi_def_cfa_offset 24
 151              		.cfi_offset 4, -24
 152              		.cfi_offset 5, -20
 153              		.cfi_offset 6, -16
 154              		.cfi_offset 7, -12
 155              		.cfi_offset 8, -8
 156              		.cfi_offset 14, -4
2932:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   while((((hspi->Instance->SR & Flag) == (Flag)) ? SET : RESET) != State)
 157              		.loc 1 2932 0
 158 0004 8046     		mov	r8, r0
 159 0006 0F46     		mov	r7, r1
 160 0008 1646     		mov	r6, r2
 161 000a 1D46     		mov	r5, r3
 162              	.LVL3:
 163              	.L13:
 164 000c D8F80040 		ldr	r4, [r8]
 165 0010 01E0     		b	.L14
 166              	.L20:
2935:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 167              		.loc 1 2935 0
 168 0012 6B1C     		adds	r3, r5, #1
 169 0014 0AD1     		bne	.L31
 170              	.L14:
2933:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 171              		.loc 1 2933 0
 172 0016 A068     		ldr	r0, [r4, #8]
 173 0018 37EA0003 		bics	r3, r7, r0
 174 001c 0CBF     		ite	eq
 175 001e 0120     		moveq	r0, #1
 176 0020 0020     		movne	r0, #0
 177 0022 8642     		cmp	r6, r0
 178 0024 F5D1     		bne	.L20
2968:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
ARM GAS  /tmp/ccMJVeMK.s 			page 61


 179              		.loc 1 2968 0
 180 0026 0020     		movs	r0, #0
2969:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
 181              		.loc 1 2969 0
 182 0028 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 183              	.LVL4:
 184              	.L31:
2937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 185              		.loc 1 2937 0
 186 002c 3DB1     		cbz	r5, .L15
2937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 187              		.loc 1 2937 0 is_stmt 0 discriminator 1
 188 002e FFF7FEFF 		bl	HAL_GetTick
 189              	.LVL5:
 190 0032 069B     		ldr	r3, [sp, #24]
 191 0034 C01A     		subs	r0, r0, r3
 192 0036 8542     		cmp	r5, r0
 193 0038 E8D8     		bhi	.L13
 194 003a D8F80040 		ldr	r4, [r8]
 195              	.L15:
 196              	.LVL6:
 197              	.LBB30:
 198              	.LBB31:
2944:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 199              		.loc 1 2944 0 is_stmt 1
 200 003e 6368     		ldr	r3, [r4, #4]
2946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 201              		.loc 1 2946 0
 202 0040 D8F80420 		ldr	r2, [r8, #4]
2944:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 203              		.loc 1 2944 0
 204 0044 23F0E003 		bic	r3, r3, #224
2946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 205              		.loc 1 2946 0
 206 0048 B2F5827F 		cmp	r2, #260
2944:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 207              		.loc 1 2944 0
 208 004c 6360     		str	r3, [r4, #4]
2946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 209              		.loc 1 2946 0
 210 004e 17D0     		beq	.L32
 211              	.L16:
2953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 212              		.loc 1 2953 0
 213 0050 D8F82830 		ldr	r3, [r8, #40]
 214 0054 B3F5005F 		cmp	r3, #8192
 215 0058 08D0     		beq	.L33
 216              	.L18:
2958:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 217              		.loc 1 2958 0
 218 005a 0122     		movs	r2, #1
2961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 219              		.loc 1 2961 0
 220 005c 0023     		movs	r3, #0
2958:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 221              		.loc 1 2958 0
 222 005e 88F85120 		strb	r2, [r8, #81]
ARM GAS  /tmp/ccMJVeMK.s 			page 62


2961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 223              		.loc 1 2961 0
 224 0062 88F85030 		strb	r3, [r8, #80]
 225              	.LVL7:
 226 0066 0320     		movs	r0, #3
 227 0068 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 228              	.LVL8:
 229              	.L33:
2955:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 230              		.loc 1 2955 0
 231 006c 4DF6FF72 		movw	r2, #57343
 232 0070 2368     		ldr	r3, [r4]
 233 0072 1340     		ands	r3, r3, r2
 234 0074 2360     		str	r3, [r4]
 235 0076 2368     		ldr	r3, [r4]
 236 0078 43F40053 		orr	r3, r3, #8192
 237 007c 2360     		str	r3, [r4]
 238 007e ECE7     		b	.L18
 239              	.L32:
2946:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 240              		.loc 1 2946 0
 241 0080 D8F80830 		ldr	r3, [r8, #8]
 242 0084 B3F5004F 		cmp	r3, #32768
 243 0088 02D0     		beq	.L17
 244 008a B3F5806F 		cmp	r3, #1024
 245 008e DFD1     		bne	.L16
 246              	.L17:
2949:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 247              		.loc 1 2949 0
 248 0090 2368     		ldr	r3, [r4]
 249 0092 23F04003 		bic	r3, r3, #64
 250 0096 2360     		str	r3, [r4]
 251 0098 DAE7     		b	.L16
 252              	.LBE31:
 253              	.LBE30:
 254              		.cfi_endproc
 255              	.LFE111:
 257 009a 00BF     		.section	.text.HAL_SPI_TransmitReceive.part.1,"ax",%progbits
 258              		.align	1
 259              		.p2align 2,,3
 260              		.syntax unified
 261              		.thumb
 262              		.thumb_func
 263              		.fpu softvfp
 265              	HAL_SPI_TransmitReceive.part.1:
 266              	.LFB120:
 823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 267              		.loc 1 823 0
 268              		.cfi_startproc
 269              		@ args = 4, pretend = 0, frame = 8
 270              		@ frame_needed = 0, uses_anonymous_args = 0
 271              	.LVL9:
 272 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 273              		.cfi_def_cfa_offset 28
 274              		.cfi_offset 4, -28
 275              		.cfi_offset 5, -24
 276              		.cfi_offset 6, -20
ARM GAS  /tmp/ccMJVeMK.s 			page 63


 277              		.cfi_offset 7, -16
 278              		.cfi_offset 8, -12
 279              		.cfi_offset 9, -8
 280              		.cfi_offset 14, -4
 281 0004 0446     		mov	r4, r0
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 282              		.loc 1 838 0
 283 0006 0120     		movs	r0, #1
 284              	.LVL10:
 823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 285              		.loc 1 823 0
 286 0008 85B0     		sub	sp, sp, #20
 287              		.cfi_def_cfa_offset 48
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 288              		.loc 1 838 0
 289 000a 84F85000 		strb	r0, [r4, #80]
 823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 290              		.loc 1 823 0
 291 000e 0F46     		mov	r7, r1
 292 0010 1646     		mov	r6, r2
 293 0012 9946     		mov	r9, r3
 294 0014 0C9D     		ldr	r5, [sp, #48]
 841:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 295              		.loc 1 841 0
 296 0016 FFF7FEFF 		bl	HAL_GetTick
 297              	.LVL11:
 843:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 298              		.loc 1 843 0
 299 001a 94F85120 		ldrb	r2, [r4, #81]	@ zero_extendqisi2
 841:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 300              		.loc 1 841 0
 301 001e 8046     		mov	r8, r0
 302              	.LVL12:
 843:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 303              		.loc 1 843 0
 304 0020 D2B2     		uxtb	r2, r2
 305              	.LVL13:
 846:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_SPI
 306              		.loc 1 846 0
 307 0022 012A     		cmp	r2, #1
 844:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 308              		.loc 1 844 0
 309 0024 6168     		ldr	r1, [r4, #4]
 310              	.LVL14:
 846:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_SPI
 311              		.loc 1 846 0
 312 0026 11D0     		beq	.L35
 313 0028 B1F5827F 		cmp	r1, #260
 314 002c 09D0     		beq	.L110
 315              	.L63:
 849:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 316              		.loc 1 849 0
 317 002e 0220     		movs	r0, #2
 318              	.LVL15:
 319              	.L36:
1042:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 320              		.loc 1 1042 0
ARM GAS  /tmp/ccMJVeMK.s 			page 64


 321 0030 0122     		movs	r2, #1
1043:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 322              		.loc 1 1043 0
 323 0032 0023     		movs	r3, #0
1042:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 324              		.loc 1 1042 0
 325 0034 84F85120 		strb	r2, [r4, #81]
1043:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 326              		.loc 1 1043 0
 327 0038 84F85030 		strb	r3, [r4, #80]
1045:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 328              		.loc 1 1045 0
 329 003c 05B0     		add	sp, sp, #20
 330              		.cfi_remember_state
 331              		.cfi_def_cfa_offset 28
 332              		@ sp needed
 333 003e BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 334              	.LVL16:
 335              	.L110:
 336              		.cfi_restore_state
 847:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 337              		.loc 1 847 0
 338 0042 A368     		ldr	r3, [r4, #8]
 339 0044 002B     		cmp	r3, #0
 340 0046 F2D1     		bne	.L63
 341 0048 042A     		cmp	r2, #4
 342 004a F0D1     		bne	.L63
 343              	.L35:
 853:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 344              		.loc 1 853 0
 345 004c 002F     		cmp	r7, #0
 346 004e 64D0     		beq	.L66
 347 0050 002E     		cmp	r6, #0
 348 0052 62D0     		beq	.L66
 349 0054 B9F1000F 		cmp	r9, #0
 350 0058 5FD0     		beq	.L66
 860:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 351              		.loc 1 860 0
 352 005a 94F85130 		ldrb	r3, [r4, #81]	@ zero_extendqisi2
 887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 353              		.loc 1 887 0
 354 005e 2268     		ldr	r2, [r4]
 355              	.LVL17:
 860:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 356              		.loc 1 860 0
 357 0060 012B     		cmp	r3, #1
 862:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 358              		.loc 1 862 0
 359 0062 04BF     		itt	eq
 360 0064 0523     		moveq	r3, #5
 361 0066 84F85130 		strbeq	r3, [r4, #81]
 866:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 362              		.loc 1 866 0
 363 006a 0023     		movs	r3, #0
 364 006c 6365     		str	r3, [r4, #84]
 868:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 365              		.loc 1 868 0
ARM GAS  /tmp/ccMJVeMK.s 			page 65


 366 006e A4F83E90 		strh	r9, [r4, #62]	@ movhi
 871:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 367              		.loc 1 871 0
 368 0072 A4F83690 		strh	r9, [r4, #54]	@ movhi
 887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 369              		.loc 1 887 0
 370 0076 1068     		ldr	r0, [r2]
 371              	.LVL18:
 867:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 372              		.loc 1 867 0
 373 0078 A663     		str	r6, [r4, #56]
 887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 374              		.loc 1 887 0
 375 007a 4006     		lsls	r0, r0, #25
 869:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 376              		.loc 1 869 0
 377 007c A4F83C90 		strh	r9, [r4, #60]	@ movhi
 870:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 378              		.loc 1 870 0
 379 0080 2763     		str	r7, [r4, #48]
 872:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 380              		.loc 1 872 0
 381 0082 A4F83490 		strh	r9, [r4, #52]	@ movhi
 875:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 382              		.loc 1 875 0
 383 0086 2364     		str	r3, [r4, #64]
 876:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 384              		.loc 1 876 0
 385 0088 6364     		str	r3, [r4, #68]
 887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 386              		.loc 1 887 0
 387 008a 03D4     		bmi	.L38
 890:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 388              		.loc 1 890 0
 389 008c 1368     		ldr	r3, [r2]
 390 008e 43F04003 		orr	r3, r3, #64
 391 0092 1360     		str	r3, [r2]
 392              	.L38:
 894:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 393              		.loc 1 894 0
 394 0094 E368     		ldr	r3, [r4, #12]
 395 0096 B3F5006F 		cmp	r3, #2048
 396 009a 40D0     		beq	.L111
 941:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 397              		.loc 1 941 0
 398 009c 0029     		cmp	r1, #0
 399 009e 67D1     		bne	.L112
 400              	.L50:
 943:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       pTxData += sizeof(uint8_t);
 401              		.loc 1 943 0
 402 00a0 17F8013B 		ldrb	r3, [r7], #1	@ zero_extendqisi2
 403              	.LVL19:
 404 00a4 1373     		strb	r3, [r2, #12]
 405              	.LVL20:
 945:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 406              		.loc 1 945 0
 407 00a6 E38E     		ldrh	r3, [r4, #54]
ARM GAS  /tmp/ccMJVeMK.s 			page 66


 408 00a8 013B     		subs	r3, r3, #1
 409 00aa 9BB2     		uxth	r3, r3
 410 00ac E386     		strh	r3, [r4, #54]	@ movhi
 411              	.L51:
 972:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 412              		.loc 1 972 0
 413 00ae 4FF00109 		mov	r9, #1
 414              	.LVL21:
 415              	.L52:
 947:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 416              		.loc 1 947 0
 417 00b2 E38E     		ldrh	r3, [r4, #54]
 418 00b4 9BB2     		uxth	r3, r3
 419 00b6 1BB9     		cbnz	r3, .L57
 420 00b8 E38F     		ldrh	r3, [r4, #62]
 421 00ba 9BB2     		uxth	r3, r3
 422 00bc 002B     		cmp	r3, #0
 423 00be 3CD0     		beq	.L58
 424              	.L57:
 950:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 425              		.loc 1 950 0
 426 00c0 B9F1000F 		cmp	r9, #0
 427 00c4 0FD0     		beq	.L53
 428 00c6 E38E     		ldrh	r3, [r4, #54]
 429 00c8 9BB2     		uxth	r3, r3
 430 00ca 63B1     		cbz	r3, .L53
 431 00cc 2368     		ldr	r3, [r4]
 432 00ce 9A68     		ldr	r2, [r3, #8]
 433 00d0 9107     		lsls	r1, r2, #30
 434 00d2 08D5     		bpl	.L53
 435              	.LVL22:
 955:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 436              		.loc 1 955 0
 437 00d4 4FF00009 		mov	r9, #0
 438              	.LVL23:
 952:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->TxXferCount--;
 439              		.loc 1 952 0
 440 00d8 3A78     		ldrb	r2, [r7]	@ zero_extendqisi2
 441 00da 0137     		adds	r7, r7, #1
 442              	.LVL24:
 443 00dc 1A73     		strb	r2, [r3, #12]
 953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */ 
 444              		.loc 1 953 0
 445 00de E38E     		ldrh	r3, [r4, #54]
 446 00e0 013B     		subs	r3, r3, #1
 447 00e2 9BB2     		uxth	r3, r3
 448 00e4 E386     		strh	r3, [r4, #54]	@ movhi
 449              	.LVL25:
 450              	.L53:
 967:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 451              		.loc 1 967 0
 452 00e6 E38F     		ldrh	r3, [r4, #62]
 453 00e8 9BB2     		uxth	r3, r3
 454 00ea 63B1     		cbz	r3, .L54
 455 00ec 2368     		ldr	r3, [r4]
 456 00ee 9A68     		ldr	r2, [r3, #8]
 457 00f0 D207     		lsls	r2, r2, #31
ARM GAS  /tmp/ccMJVeMK.s 			page 67


 458 00f2 08D5     		bpl	.L54
 459              	.LVL26:
 972:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 460              		.loc 1 972 0
 461 00f4 4FF00109 		mov	r9, #1
 462              	.LVL27:
 969:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->RxXferCount--;
 463              		.loc 1 969 0
 464 00f8 DB68     		ldr	r3, [r3, #12]
 465 00fa 3370     		strb	r3, [r6]
 970:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */ 
 466              		.loc 1 970 0
 467 00fc E38F     		ldrh	r3, [r4, #62]
 969:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         hspi->RxXferCount--;
 468              		.loc 1 969 0
 469 00fe 4E44     		add	r6, r6, r9
 470              	.LVL28:
 970:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */ 
 471              		.loc 1 970 0
 472 0100 013B     		subs	r3, r3, #1
 473 0102 9BB2     		uxth	r3, r3
 474 0104 E387     		strh	r3, [r4, #62]	@ movhi
 475              	.LVL29:
 476              	.L54:
 974:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 477              		.loc 1 974 0
 478 0106 6B1C     		adds	r3, r5, #1
 479 0108 D3D0     		beq	.L52
 480 010a FFF7FEFF 		bl	HAL_GetTick
 481              	.LVL30:
 482 010e A0EB0800 		sub	r0, r0, r8
 483 0112 8542     		cmp	r5, r0
 484 0114 CDD8     		bhi	.L52
 485              	.L48:
 933:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         goto error;
 486              		.loc 1 933 0
 487 0116 0320     		movs	r0, #3
 488 0118 8AE7     		b	.L36
 489              	.LVL31:
 490              	.L66:
 855:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 491              		.loc 1 855 0
 492 011a 0120     		movs	r0, #1
 493              	.LVL32:
 494 011c 88E7     		b	.L36
 495              	.LVL33:
 496              	.L111:
 896:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 497              		.loc 1 896 0
 498 011e 0029     		cmp	r1, #0
 499 0120 57D0     		beq	.L40
 500 0122 E38E     		ldrh	r3, [r4, #54]
 501 0124 9BB2     		uxth	r3, r3
 502 0126 012B     		cmp	r3, #1
 503 0128 53D0     		beq	.L40
 504              	.L41:
 929:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
ARM GAS  /tmp/ccMJVeMK.s 			page 68


 505              		.loc 1 929 0
 506 012a 4FF00109 		mov	r9, #1
 507              	.LVL34:
 508              	.L42:
 902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 509              		.loc 1 902 0
 510 012e E38E     		ldrh	r3, [r4, #54]
 511 0130 9BB2     		uxth	r3, r3
 512 0132 13BB     		cbnz	r3, .L47
 513 0134 E38F     		ldrh	r3, [r4, #62]
 514 0136 9BB2     		uxth	r3, r3
 515 0138 FBB9     		cbnz	r3, .L47
 516              	.L58:
1021:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 517              		.loc 1 1021 0
 518 013a CDF80080 		str	r8, [sp]
 519 013e 2B46     		mov	r3, r5
 520 0140 0122     		movs	r2, #1
 521 0142 0221     		movs	r1, #2
 522 0144 2046     		mov	r0, r4
 523 0146 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 524              	.LVL35:
 525 014a 0028     		cmp	r0, #0
 526 014c E3D1     		bne	.L48
 527              	.LVL36:
 528              	.LBB32:
 529              	.LBB33:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 530              		.loc 1 2981 0
 531 014e 0246     		mov	r2, r0
 532 0150 CDF80080 		str	r8, [sp]
 533 0154 2B46     		mov	r3, r5
 534 0156 8021     		movs	r1, #128
 535 0158 2046     		mov	r0, r4
 536 015a FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 537              	.LVL37:
 538 015e 0028     		cmp	r0, #0
 539 0160 3FD0     		beq	.L59
 540              	.LBE33:
 541              	.LBE32:
1031:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 542              		.loc 1 1031 0
 543 0162 2022     		movs	r2, #32
 544              	.LBB36:
 545              	.LBB34:
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 546              		.loc 1 2983 0
 547 0164 636D     		ldr	r3, [r4, #84]
 548              	.LBE34:
 549              	.LBE36:
1030:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
 550              		.loc 1 1030 0
 551 0166 0120     		movs	r0, #1
 552              	.LBB37:
 553              	.LBB35:
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 554              		.loc 1 2983 0
ARM GAS  /tmp/ccMJVeMK.s 			page 69


 555 0168 1343     		orrs	r3, r3, r2
 556 016a 6365     		str	r3, [r4, #84]
 557              	.LVL38:
 558              	.LBE35:
 559              	.LBE37:
1031:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 560              		.loc 1 1031 0
 561 016c 6265     		str	r2, [r4, #84]
 562 016e 5FE7     		b	.L36
 563              	.LVL39:
 564              	.L112:
 941:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 565              		.loc 1 941 0
 566 0170 E38E     		ldrh	r3, [r4, #54]
 567 0172 9BB2     		uxth	r3, r3
 568 0174 012B     		cmp	r3, #1
 569 0176 9AD1     		bne	.L51
 570 0178 92E7     		b	.L50
 571              	.LVL40:
 572              	.L47:
 905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 573              		.loc 1 905 0
 574 017a B9F1000F 		cmp	r9, #0
 575 017e 0FD0     		beq	.L43
 576 0180 E38E     		ldrh	r3, [r4, #54]
 577 0182 9BB2     		uxth	r3, r3
 578 0184 63B1     		cbz	r3, .L43
 579 0186 2368     		ldr	r3, [r4]
 580 0188 9A68     		ldr	r2, [r3, #8]
 581 018a 9107     		lsls	r1, r2, #30
 582 018c 08D5     		bpl	.L43
 911:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 583              		.loc 1 911 0
 584 018e 4FF00009 		mov	r9, #0
 585              	.LVL41:
 907:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pTxData += sizeof(uint16_t);
 586              		.loc 1 907 0
 587 0192 37F8022B 		ldrh	r2, [r7], #2
 588              	.LVL42:
 589 0196 DA60     		str	r2, [r3, #12]
 590              	.LVL43:
 909:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a reception (Rx). Tx not allowed */ 
 591              		.loc 1 909 0
 592 0198 E38E     		ldrh	r3, [r4, #54]
 593 019a 013B     		subs	r3, r3, #1
 594 019c 9BB2     		uxth	r3, r3
 595 019e E386     		strh	r3, [r4, #54]	@ movhi
 596              	.LVL44:
 597              	.L43:
 923:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 598              		.loc 1 923 0
 599 01a0 E38F     		ldrh	r3, [r4, #62]
 600 01a2 9BB2     		uxth	r3, r3
 601 01a4 63B1     		cbz	r3, .L44
 602 01a6 2368     		ldr	r3, [r4]
 603 01a8 9A68     		ldr	r2, [r3, #8]
 604 01aa D207     		lsls	r2, r2, #31
ARM GAS  /tmp/ccMJVeMK.s 			page 70


 605 01ac 08D5     		bpl	.L44
 929:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 606              		.loc 1 929 0
 607 01ae 4FF00109 		mov	r9, #1
 608              	.LVL45:
 925:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pRxData += sizeof(uint16_t);
 609              		.loc 1 925 0
 610 01b2 DB68     		ldr	r3, [r3, #12]
 611 01b4 26F8023B 		strh	r3, [r6], #2	@ movhi
 612              	.LVL46:
 927:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         /* Next Data is a Transmission (Tx). Tx is allowed */ 
 613              		.loc 1 927 0
 614 01b8 E38F     		ldrh	r3, [r4, #62]
 615 01ba 013B     		subs	r3, r3, #1
 616 01bc 9BB2     		uxth	r3, r3
 617 01be E387     		strh	r3, [r4, #62]	@ movhi
 618              	.LVL47:
 619              	.L44:
 931:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 620              		.loc 1 931 0
 621 01c0 681C     		adds	r0, r5, #1
 622 01c2 B4D0     		beq	.L42
 623 01c4 FFF7FEFF 		bl	HAL_GetTick
 624              	.LVL48:
 625 01c8 A0EB0800 		sub	r0, r0, r8
 626 01cc 8542     		cmp	r5, r0
 627 01ce AED8     		bhi	.L42
 628 01d0 A1E7     		b	.L48
 629              	.LVL49:
 630              	.L40:
 898:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       pTxData += sizeof(uint16_t);
 631              		.loc 1 898 0
 632 01d2 37F8023B 		ldrh	r3, [r7], #2
 633              	.LVL50:
 634 01d6 D360     		str	r3, [r2, #12]
 635              	.LVL51:
 900:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 636              		.loc 1 900 0
 637 01d8 E38E     		ldrh	r3, [r4, #54]
 638 01da 013B     		subs	r3, r3, #1
 639 01dc 9BB2     		uxth	r3, r3
 640 01de E386     		strh	r3, [r4, #54]	@ movhi
 641 01e0 A3E7     		b	.L41
 642              	.LVL52:
 643              	.L59:
1036:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 644              		.loc 1 1036 0
 645 01e2 A368     		ldr	r3, [r4, #8]
 646 01e4 002B     		cmp	r3, #0
 647 01e6 7FF423AF 		bne	.L36
 648              	.LBB38:
1038:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 649              		.loc 1 1038 0
 650 01ea 2368     		ldr	r3, [r4]
 651 01ec 0390     		str	r0, [sp, #12]
 652 01ee DA68     		ldr	r2, [r3, #12]
 653 01f0 0392     		str	r2, [sp, #12]
ARM GAS  /tmp/ccMJVeMK.s 			page 71


 654 01f2 9B68     		ldr	r3, [r3, #8]
 655 01f4 0393     		str	r3, [sp, #12]
 656 01f6 039B     		ldr	r3, [sp, #12]
 657 01f8 1AE7     		b	.L36
 658              	.LBE38:
 659              		.cfi_endproc
 660              	.LFE120:
 662 01fa 00BF     		.section	.text.HAL_SPI_TransmitReceive_IT.part.2,"ax",%progbits
 663              		.align	1
 664              		.p2align 2,,3
 665              		.syntax unified
 666              		.thumb
 667              		.thumb_func
 668              		.fpu softvfp
 670              	HAL_SPI_TransmitReceive_IT.part.2:
 671              	.LFB121:
1237:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 672              		.loc 1 1237 0
 673              		.cfi_startproc
 674              		@ args = 0, pretend = 0, frame = 0
 675              		@ frame_needed = 0, uses_anonymous_args = 0
 676              		@ link register save eliminated.
 677              	.LVL53:
 678 0000 30B4     		push	{r4, r5}
 679              		.cfi_def_cfa_offset 8
 680              		.cfi_offset 4, -8
 681              		.cfi_offset 5, -4
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 682              		.loc 1 1246 0
 683 0002 0125     		movs	r5, #1
1237:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 684              		.loc 1 1237 0
 685 0004 0446     		mov	r4, r0
1248:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 686              		.loc 1 1248 0
 687 0006 90F85100 		ldrb	r0, [r0, #81]	@ zero_extendqisi2
 688              	.LVL54:
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 689              		.loc 1 1246 0
 690 000a 84F85050 		strb	r5, [r4, #80]
1248:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 691              		.loc 1 1248 0
 692 000e C0B2     		uxtb	r0, r0
 693              	.LVL55:
1251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_SPI
 694              		.loc 1 1251 0
 695 0010 A842     		cmp	r0, r5
 696 0012 0ED0     		beq	.L114
 697 0014 6568     		ldr	r5, [r4, #4]
 698 0016 B5F5827F 		cmp	r5, #260
 699 001a 05D0     		beq	.L130
 700              	.L121:
1254:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 701              		.loc 1 1254 0
 702 001c 0220     		movs	r0, #2
 703              	.LVL56:
 704              	.L115:
ARM GAS  /tmp/ccMJVeMK.s 			page 72


1311:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 705              		.loc 1 1311 0
 706 001e 0023     		movs	r3, #0
 707 0020 84F85030 		strb	r3, [r4, #80]
1313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 708              		.loc 1 1313 0
 709 0024 30BC     		pop	{r4, r5}
 710              		.cfi_remember_state
 711              		.cfi_restore 5
 712              		.cfi_restore 4
 713              		.cfi_def_cfa_offset 0
 714              	.LVL57:
 715 0026 7047     		bx	lr
 716              	.LVL58:
 717              	.L130:
 718              		.cfi_restore_state
1252:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 719              		.loc 1 1252 0
 720 0028 A568     		ldr	r5, [r4, #8]
 721              	.LVL59:
 722 002a 002D     		cmp	r5, #0
 723 002c F6D1     		bne	.L121
 724 002e 0428     		cmp	r0, #4
 725 0030 F4D1     		bne	.L121
 726              	.L114:
1258:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 727              		.loc 1 1258 0
 728 0032 21B3     		cbz	r1, .L124
 729 0034 1AB3     		cbz	r2, .L124
 730 0036 13B3     		cbz	r3, .L124
1265:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 731              		.loc 1 1265 0
 732 0038 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 733              	.LVL60:
1271:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 734              		.loc 1 1271 0
 735 003c 0025     		movs	r5, #0
1265:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 736              		.loc 1 1265 0
 737 003e 0128     		cmp	r0, #1
1267:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 738              		.loc 1 1267 0
 739 0040 04BF     		itt	eq
 740 0042 0520     		moveq	r0, #5
 741 0044 84F85100 		strbeq	r0, [r4, #81]
1280:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 742              		.loc 1 1280 0
 743 0048 E068     		ldr	r0, [r4, #12]
1271:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pTxData;
 744              		.loc 1 1271 0
 745 004a 6565     		str	r5, [r4, #84]
1272:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 746              		.loc 1 1272 0
 747 004c 2163     		str	r1, [r4, #48]
1274:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pRxData;
 748              		.loc 1 1274 0
 749 004e E386     		strh	r3, [r4, #54]	@ movhi
ARM GAS  /tmp/ccMJVeMK.s 			page 73


1273:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 750              		.loc 1 1273 0
 751 0050 A386     		strh	r3, [r4, #52]	@ movhi
1275:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 752              		.loc 1 1275 0
 753 0052 A263     		str	r2, [r4, #56]
1276:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 754              		.loc 1 1276 0
 755 0054 A387     		strh	r3, [r4, #60]	@ movhi
1277:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 756              		.loc 1 1277 0
 757 0056 E387     		strh	r3, [r4, #62]	@ movhi
1280:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 758              		.loc 1 1280 0
 759 0058 C8B1     		cbz	r0, .L117
1282:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_16BIT;
 760              		.loc 1 1282 0
 761 005a 0F4A     		ldr	r2, .L131
 762              	.LVL61:
1283:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 763              		.loc 1 1283 0
 764 005c 0F4B     		ldr	r3, .L131+4
 765              	.LVL62:
1282:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_16BIT;
 766              		.loc 1 1282 0
 767 005e 2264     		str	r2, [r4, #64]
1283:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 768              		.loc 1 1283 0
 769 0060 6364     		str	r3, [r4, #68]
 770              	.L118:
1300:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 771              		.loc 1 1300 0
 772 0062 2368     		ldr	r3, [r4]
 773 0064 5A68     		ldr	r2, [r3, #4]
 774 0066 42F0E002 		orr	r2, r2, #224
 775 006a 5A60     		str	r2, [r3, #4]
1303:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 776              		.loc 1 1303 0
 777 006c 1868     		ldr	r0, [r3]
 778 006e 10F04000 		ands	r0, r0, #64
 779 0072 0AD1     		bne	.L125
1306:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 780              		.loc 1 1306 0
 781 0074 1A68     		ldr	r2, [r3]
 782 0076 42F04002 		orr	r2, r2, #64
 783 007a 1A60     		str	r2, [r3]
 784 007c CFE7     		b	.L115
 785              	.LVL63:
 786              	.L124:
1311:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 787              		.loc 1 1311 0
 788 007e 0023     		movs	r3, #0
 789              	.LVL64:
1260:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 790              		.loc 1 1260 0
 791 0080 0120     		movs	r0, #1
 792              	.LVL65:
ARM GAS  /tmp/ccMJVeMK.s 			page 74


1311:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 793              		.loc 1 1311 0
 794 0082 84F85030 		strb	r3, [r4, #80]
1313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 795              		.loc 1 1313 0
 796 0086 30BC     		pop	{r4, r5}
 797              		.cfi_remember_state
 798              		.cfi_restore 4
 799              		.cfi_restore 5
 800              		.cfi_def_cfa_offset 0
 801              	.LVL66:
 802 0088 7047     		bx	lr
 803              	.LVL67:
 804              	.L125:
 805              		.cfi_restore_state
1240:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 806              		.loc 1 1240 0
 807 008a 0020     		movs	r0, #0
 808 008c C7E7     		b	.L115
 809              	.LVL68:
 810              	.L117:
1287:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_8BIT;
 811              		.loc 1 1287 0
 812 008e 044A     		ldr	r2, .L131+8
 813              	.LVL69:
1288:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 814              		.loc 1 1288 0
 815 0090 044B     		ldr	r3, .L131+12
 816              	.LVL70:
1287:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxISR     = SPI_2linesTxISR_8BIT;
 817              		.loc 1 1287 0
 818 0092 2264     		str	r2, [r4, #64]
1288:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 819              		.loc 1 1288 0
 820 0094 6364     		str	r3, [r4, #68]
 821 0096 E4E7     		b	.L118
 822              	.L132:
 823              		.align	2
 824              	.L131:
 825 0098 00000000 		.word	SPI_2linesRxISR_16BIT
 826 009c 00000000 		.word	SPI_2linesTxISR_16BIT
 827 00a0 00000000 		.word	SPI_2linesRxISR_8BIT
 828 00a4 00000000 		.word	SPI_2linesTxISR_8BIT
 829              		.cfi_endproc
 830              	.LFE121:
 832              		.section	.text.HAL_SPI_TransmitReceive_DMA.part.3,"ax",%progbits
 833              		.align	1
 834              		.p2align 2,,3
 835              		.syntax unified
 836              		.thumb
 837              		.thumb_func
 838              		.fpu softvfp
 840              	HAL_SPI_TransmitReceive_DMA.part.3:
 841              	.LFB122:
1513:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 842              		.loc 1 1513 0
 843              		.cfi_startproc
ARM GAS  /tmp/ccMJVeMK.s 			page 75


 844              		@ args = 0, pretend = 0, frame = 0
 845              		@ frame_needed = 0, uses_anonymous_args = 0
 846              	.LVL71:
 847 0000 70B5     		push	{r4, r5, r6, lr}
 848              		.cfi_def_cfa_offset 16
 849              		.cfi_offset 4, -16
 850              		.cfi_offset 5, -12
 851              		.cfi_offset 6, -8
 852              		.cfi_offset 14, -4
1522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 853              		.loc 1 1522 0
 854 0002 0125     		movs	r5, #1
1513:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 855              		.loc 1 1513 0
 856 0004 0446     		mov	r4, r0
1524:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 857              		.loc 1 1524 0
 858 0006 90F85100 		ldrb	r0, [r0, #81]	@ zero_extendqisi2
 859              	.LVL72:
1522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 860              		.loc 1 1522 0
 861 000a 84F85050 		strb	r5, [r4, #80]
1524:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   tmp1 = hspi->Init.Mode;
 862              		.loc 1 1524 0
 863 000e C0B2     		uxtb	r0, r0
 864              	.LVL73:
1526:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       ((tmp1 == SPI_MODE_MASTER) && (hspi->Init.Direction == SPI_DIRECTION_2LINES) && (tmp == HAL_S
 865              		.loc 1 1526 0
 866 0010 A842     		cmp	r0, r5
 867 0012 0DD0     		beq	.L134
 868 0014 6568     		ldr	r5, [r4, #4]
 869 0016 B5F5827F 		cmp	r5, #260
 870 001a 04D0     		beq	.L150
 871              	.L142:
 872              	.L135:
1616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 873              		.loc 1 1616 0
 874 001c 0023     		movs	r3, #0
 875              	.LVL74:
1529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 876              		.loc 1 1529 0
 877 001e 0220     		movs	r0, #2
 878              	.LVL75:
1616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 879              		.loc 1 1616 0
 880 0020 84F85030 		strb	r3, [r4, #80]
1618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 881              		.loc 1 1618 0
 882 0024 70BD     		pop	{r4, r5, r6, pc}
 883              	.LVL76:
 884              	.L150:
1527:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 885              		.loc 1 1527 0
 886 0026 A568     		ldr	r5, [r4, #8]
 887              	.LVL77:
 888 0028 002D     		cmp	r5, #0
 889 002a F7D1     		bne	.L142
ARM GAS  /tmp/ccMJVeMK.s 			page 76


 890 002c 0428     		cmp	r0, #4
 891 002e F5D1     		bne	.L142
 892              	.L134:
1533:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 893              		.loc 1 1533 0
 894 0030 0029     		cmp	r1, #0
 895 0032 51D0     		beq	.L145
 896 0034 002A     		cmp	r2, #0
 897 0036 4FD0     		beq	.L145
 898 0038 002B     		cmp	r3, #0
 899 003a 4DD0     		beq	.L145
1540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 900              		.loc 1 1540 0
 901 003c 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 902              	.LVL78:
1547:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 903              		.loc 1 1547 0
 904 0040 2163     		str	r1, [r4, #48]
1540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 905              		.loc 1 1540 0
 906 0042 0128     		cmp	r0, #1
1542:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 907              		.loc 1 1542 0
 908 0044 04BF     		itt	eq
 909 0046 0520     		moveq	r0, #5
 910 0048 84F85100 		strbeq	r0, [r4, #81]
1546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t*)pTxData;
 911              		.loc 1 1546 0
 912 004c 0020     		movs	r0, #0
 913 004e 6065     		str	r0, [r4, #84]
1549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t*)pRxData;
 914              		.loc 1 1549 0
 915 0050 E386     		strh	r3, [r4, #54]	@ movhi
1552:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 916              		.loc 1 1552 0
 917 0052 E387     		strh	r3, [r4, #62]	@ movhi
1567:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 918              		.loc 1 1567 0
 919 0054 94F85150 		ldrb	r5, [r4, #81]	@ zero_extendqisi2
1548:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 920              		.loc 1 1548 0
 921 0058 A386     		strh	r3, [r4, #52]	@ movhi
1567:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 922              		.loc 1 1567 0
 923 005a 042D     		cmp	r5, #4
1584:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 924              		.loc 1 1584 0
 925 005c 4FF00005 		mov	r5, #0
1551:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 926              		.loc 1 1551 0
 927 0060 A387     		strh	r3, [r4, #60]	@ movhi
1555:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 928              		.loc 1 1555 0
 929 0062 2064     		str	r0, [r4, #64]
1556:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 930              		.loc 1 1556 0
 931 0064 6064     		str	r0, [r4, #68]
ARM GAS  /tmp/ccMJVeMK.s 			page 77


1570:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMAReceiveCplt;
 932              		.loc 1 1570 0
 933 0066 08BF     		it	eq
 934 0068 1E49     		ldreq	r1, .L151
 935              	.LVL79:
 936 006a E06C     		ldr	r0, [r4, #76]
1571:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 937              		.loc 1 1571 0
 938 006c 0EBF     		itee	eq
 939 006e 1E4B     		ldreq	r3, .L151+4
 940              	.LVL80:
1576:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMATransmitReceiveCplt;
 941              		.loc 1 1576 0
 942 0070 1E49     		ldrne	r1, .L151+8
1577:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 943              		.loc 1 1577 0
 944 0072 1F4B     		ldrne	r3, .L151+12
1550:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 945              		.loc 1 1550 0
 946 0074 A263     		str	r2, [r4, #56]
1581:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 947              		.loc 1 1581 0
 948 0076 1F4E     		ldr	r6, .L151+16
1576:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->hdmarx->XferCpltCallback     = SPI_DMATransmitReceiveCplt;
 949              		.loc 1 1576 0
 950 0078 C162     		str	r1, [r0, #44]
1577:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 951              		.loc 1 1577 0
 952 007a 8362     		str	r3, [r0, #40]
1587:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 953              		.loc 1 1587 0
 954 007c 2168     		ldr	r1, [r4]
 955 007e E38F     		ldrh	r3, [r4, #62]
 956 0080 0C31     		adds	r1, r1, #12
 957 0082 9BB2     		uxth	r3, r3
1584:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 958              		.loc 1 1584 0
 959 0084 4563     		str	r5, [r0, #52]
1581:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 960              		.loc 1 1581 0
 961 0086 0663     		str	r6, [r0, #48]
1587:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 962              		.loc 1 1587 0
 963 0088 FFF7FEFF 		bl	HAL_DMA_Start_IT
 964              	.LVL81:
1590:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 965              		.loc 1 1590 0
 966 008c 2368     		ldr	r3, [r4]
1594:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback     = NULL;
 967              		.loc 1 1594 0
 968 008e A06C     		ldr	r0, [r4, #72]
1590:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 969              		.loc 1 1590 0
 970 0090 5968     		ldr	r1, [r3, #4]
1600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 971              		.loc 1 1600 0
 972 0092 03F10C02 		add	r2, r3, #12
ARM GAS  /tmp/ccMJVeMK.s 			page 78


1590:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 973              		.loc 1 1590 0
 974 0096 41F00101 		orr	r1, r1, #1
 975 009a 5960     		str	r1, [r3, #4]
1600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 976              		.loc 1 1600 0
 977 009c E38E     		ldrh	r3, [r4, #54]
 978 009e 216B     		ldr	r1, [r4, #48]
 979 00a0 9BB2     		uxth	r3, r3
1594:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferCpltCallback     = NULL;
 980              		.loc 1 1594 0
 981 00a2 C562     		str	r5, [r0, #44]
1595:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferErrorCallback    = NULL;
 982              		.loc 1 1595 0
 983 00a4 8562     		str	r5, [r0, #40]
1596:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->hdmatx->XferAbortCallback    = NULL;
 984              		.loc 1 1596 0
 985 00a6 0563     		str	r5, [r0, #48]
1597:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 986              		.loc 1 1597 0
 987 00a8 4563     		str	r5, [r0, #52]
1600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 988              		.loc 1 1600 0
 989 00aa FFF7FEFF 		bl	HAL_DMA_Start_IT
 990              	.LVL82:
1603:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 991              		.loc 1 1603 0
 992 00ae 2368     		ldr	r3, [r4]
 993 00b0 1A68     		ldr	r2, [r3]
 994 00b2 5206     		lsls	r2, r2, #25
 995 00b4 03D4     		bmi	.L139
1606:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 996              		.loc 1 1606 0
 997 00b6 1A68     		ldr	r2, [r3]
 998 00b8 42F04002 		orr	r2, r2, #64
 999 00bc 1A60     		str	r2, [r3]
 1000              	.L139:
1609:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1001              		.loc 1 1609 0
 1002 00be 5A68     		ldr	r2, [r3, #4]
1516:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1003              		.loc 1 1516 0
 1004 00c0 0020     		movs	r0, #0
1609:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1005              		.loc 1 1609 0
 1006 00c2 42F02002 		orr	r2, r2, #32
 1007 00c6 5A60     		str	r2, [r3, #4]
1612:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1008              		.loc 1 1612 0
 1009 00c8 5A68     		ldr	r2, [r3, #4]
 1010 00ca 42F00202 		orr	r2, r2, #2
 1011 00ce 5A60     		str	r2, [r3, #4]
 1012              	.LVL83:
1616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1013              		.loc 1 1616 0
 1014 00d0 0023     		movs	r3, #0
 1015 00d2 84F85030 		strb	r3, [r4, #80]
ARM GAS  /tmp/ccMJVeMK.s 			page 79


1618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1016              		.loc 1 1618 0
 1017 00d6 70BD     		pop	{r4, r5, r6, pc}
 1018              	.LVL84:
 1019              	.L145:
1616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1020              		.loc 1 1616 0
 1021 00d8 0023     		movs	r3, #0
 1022              	.LVL85:
1535:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1023              		.loc 1 1535 0
 1024 00da 0120     		movs	r0, #1
 1025              	.LVL86:
1616:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1026              		.loc 1 1616 0
 1027 00dc 84F85030 		strb	r3, [r4, #80]
1618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1028              		.loc 1 1618 0
 1029 00e0 70BD     		pop	{r4, r5, r6, pc}
 1030              	.LVL87:
 1031              	.L152:
 1032 00e2 00BF     		.align	2
 1033              	.L151:
 1034 00e4 00000000 		.word	SPI_DMAHalfReceiveCplt
 1035 00e8 00000000 		.word	SPI_DMAReceiveCplt
 1036 00ec 00000000 		.word	SPI_DMAHalfTransmitReceiveCplt
 1037 00f0 00000000 		.word	SPI_DMATransmitReceiveCplt
 1038 00f4 00000000 		.word	SPI_DMAError
 1039              		.cfi_endproc
 1040              	.LFE122:
 1042              		.section	.text.HAL_SPI_MspInit,"ax",%progbits
 1043              		.align	1
 1044              		.p2align 2,,3
 1045              		.weak	HAL_SPI_MspInit
 1046              		.syntax unified
 1047              		.thumb
 1048              		.thumb_func
 1049              		.fpu softvfp
 1051              	HAL_SPI_MspInit:
 1052              	.LFB142:
 1053              		.cfi_startproc
 1054              		@ args = 0, pretend = 0, frame = 0
 1055              		@ frame_needed = 0, uses_anonymous_args = 0
 1056              		@ link register save eliminated.
 1057 0000 7047     		bx	lr
 1058              		.cfi_endproc
 1059              	.LFE142:
 1061 0002 00BF     		.section	.text.HAL_SPI_Init,"ax",%progbits
 1062              		.align	1
 1063              		.p2align 2,,3
 1064              		.weak	HAL_SPI_Init
 1065              		.syntax unified
 1066              		.thumb
 1067              		.thumb_func
 1068              		.fpu softvfp
 1070              	HAL_SPI_Init:
 1071              	.LFB64:
ARM GAS  /tmp/ccMJVeMK.s 			page 80


 264:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the SPI handle allocation */
 1072              		.loc 1 264 0
 1073              		.cfi_startproc
 1074              		@ args = 0, pretend = 0, frame = 0
 1075              		@ frame_needed = 0, uses_anonymous_args = 0
 1076              	.LVL88:
 266:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1077              		.loc 1 266 0
 1078 0000 0028     		cmp	r0, #0
 1079 0002 3BD0     		beq	.L157
 264:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the SPI handle allocation */
 1080              		.loc 1 264 0
 1081 0004 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 1082              		.cfi_def_cfa_offset 24
 1083              		.cfi_offset 3, -24
 1084              		.cfi_offset 4, -20
 1085              		.cfi_offset 5, -16
 1086              		.cfi_offset 6, -12
 1087              		.cfi_offset 7, -8
 1088              		.cfi_offset 14, -4
 289:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 1089              		.loc 1 289 0
 1090 0006 0023     		movs	r3, #0
 292:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1091              		.loc 1 292 0
 1092 0008 90F85110 		ldrb	r1, [r0, #81]	@ zero_extendqisi2
 1093 000c 0446     		mov	r4, r0
 289:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* USE_SPI_CRC */
 1094              		.loc 1 289 0
 1095 000e 8362     		str	r3, [r0, #40]
 292:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1096              		.loc 1 292 0
 1097 0010 01F0FF02 		and	r2, r1, #255
 1098 0014 61B3     		cbz	r1, .L163
 1099 0016 1A46     		mov	r2, r3
 1100              	.LVL89:
 1101              	.L156:
 301:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1102              		.loc 1 301 0
 1103 0018 0227     		movs	r7, #2
 330:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State     = HAL_SPI_STATE_READY;
 1104              		.loc 1 330 0
 1105 001a 0021     		movs	r1, #0
 331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1106              		.loc 1 331 0
 1107 001c 0125     		movs	r5, #1
 309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 1108              		.loc 1 309 0
 1109 001e A668     		ldr	r6, [r4, #8]
 1110 0020 6368     		ldr	r3, [r4, #4]
 1111 0022 E068     		ldr	r0, [r4, #12]
 1112 0024 3343     		orrs	r3, r3, r6
 1113 0026 2669     		ldr	r6, [r4, #16]
 1114 0028 0343     		orrs	r3, r3, r0
 1115 002a 6069     		ldr	r0, [r4, #20]
 1116 002c 3343     		orrs	r3, r3, r6
 1117 002e E669     		ldr	r6, [r4, #28]
ARM GAS  /tmp/ccMJVeMK.s 			page 81


 1118 0030 0343     		orrs	r3, r3, r0
 1119 0032 3343     		orrs	r3, r3, r6
 1120 0034 206A     		ldr	r0, [r4, #32]
 1121 0036 A669     		ldr	r6, [r4, #24]
 301:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1122              		.loc 1 301 0
 1123 0038 84F85170 		strb	r7, [r4, #81]
 304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1124              		.loc 1 304 0
 1125 003c 2768     		ldr	r7, [r4]
 309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 1126              		.loc 1 309 0
 1127 003e 0343     		orrs	r3, r3, r0
 1128 0040 06F40070 		and	r0, r6, #512
 1129 0044 0343     		orrs	r3, r3, r0
 304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1130              		.loc 1 304 0
 1131 0046 3868     		ldr	r0, [r7]
 309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 1132              		.loc 1 309 0
 1133 0048 1343     		orrs	r3, r3, r2
 314:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1134              		.loc 1 314 0
 1135 004a 360C     		lsrs	r6, r6, #16
 304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1136              		.loc 1 304 0
 1137 004c 20F04002 		bic	r2, r0, #64
 314:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1138              		.loc 1 314 0
 1139 0050 606A     		ldr	r0, [r4, #36]
 1140 0052 06F00406 		and	r6, r6, #4
 1141 0056 0643     		orrs	r6, r6, r0
 304:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1142              		.loc 1 304 0
 1143 0058 3A60     		str	r2, [r7]
 309:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****                                   hspi->Init.CLKPolarity | hspi->Init.CLKPhase | (hspi->Init.NSS & 
 1144              		.loc 1 309 0
 1145 005a 3B60     		str	r3, [r7]
 314:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1146              		.loc 1 314 0
 1147 005c 7E60     		str	r6, [r7, #4]
 327:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* SPI_I2SCFGR_I2SMOD */
 1148              		.loc 1 327 0
 1149 005e FB69     		ldr	r3, [r7, #28]
 333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 1150              		.loc 1 333 0
 1151 0060 0846     		mov	r0, r1
 327:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #endif /* SPI_I2SCFGR_I2SMOD */
 1152              		.loc 1 327 0
 1153 0062 23F40063 		bic	r3, r3, #2048
 1154 0066 FB61     		str	r3, [r7, #28]
 330:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State     = HAL_SPI_STATE_READY;
 1155              		.loc 1 330 0
 1156 0068 6165     		str	r1, [r4, #84]
 331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1157              		.loc 1 331 0
 1158 006a 84F85150 		strb	r5, [r4, #81]
ARM GAS  /tmp/ccMJVeMK.s 			page 82


 333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 1159              		.loc 1 333 0
 1160 006e F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 1161              	.LVL90:
 1162              	.L163:
 295:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1163              		.loc 1 295 0
 1164 0070 80F85020 		strb	r2, [r0, #80]
 298:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1165              		.loc 1 298 0
 1166 0074 FFF7FEFF 		bl	HAL_SPI_MspInit
 1167              	.LVL91:
 1168 0078 A26A     		ldr	r2, [r4, #40]
 1169 007a CDE7     		b	.L156
 1170              	.LVL92:
 1171              	.L157:
 1172              		.cfi_def_cfa_offset 0
 1173              		.cfi_restore 3
 1174              		.cfi_restore 4
 1175              		.cfi_restore 5
 1176              		.cfi_restore 6
 1177              		.cfi_restore 7
 1178              		.cfi_restore 14
 268:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1179              		.loc 1 268 0
 1180 007c 0120     		movs	r0, #1
 1181              	.LVL93:
 1182 007e 7047     		bx	lr
 1183              		.cfi_endproc
 1184              	.LFE64:
 1186              		.section	.text.HAL_SPI_MspDeInit,"ax",%progbits
 1187              		.align	1
 1188              		.p2align 2,,3
 1189              		.weak	HAL_SPI_MspDeInit
 1190              		.syntax unified
 1191              		.thumb
 1192              		.thumb_func
 1193              		.fpu softvfp
 1195              	HAL_SPI_MspDeInit:
 1196              	.LFB140:
 1197              		.cfi_startproc
 1198              		@ args = 0, pretend = 0, frame = 0
 1199              		@ frame_needed = 0, uses_anonymous_args = 0
 1200              		@ link register save eliminated.
 1201 0000 7047     		bx	lr
 1202              		.cfi_endproc
 1203              	.LFE140:
 1205 0002 00BF     		.section	.text.HAL_SPI_DeInit,"ax",%progbits
 1206              		.align	1
 1207              		.p2align 2,,3
 1208              		.global	HAL_SPI_DeInit
 1209              		.syntax unified
 1210              		.thumb
 1211              		.thumb_func
 1212              		.fpu softvfp
 1214              	HAL_SPI_DeInit:
 1215              	.LFB65:
ARM GAS  /tmp/ccMJVeMK.s 			page 83


 343:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the SPI handle allocation */
 1216              		.loc 1 343 0
 1217              		.cfi_startproc
 1218              		@ args = 0, pretend = 0, frame = 0
 1219              		@ frame_needed = 0, uses_anonymous_args = 0
 1220              	.LVL94:
 345:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1221              		.loc 1 345 0
 1222 0000 90B1     		cbz	r0, .L167
 353:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1223              		.loc 1 353 0
 1224 0002 0223     		movs	r3, #2
 356:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1225              		.loc 1 356 0
 1226 0004 0268     		ldr	r2, [r0]
 343:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Check the SPI handle allocation */
 1227              		.loc 1 343 0
 1228 0006 10B5     		push	{r4, lr}
 1229              		.cfi_def_cfa_offset 8
 1230              		.cfi_offset 4, -8
 1231              		.cfi_offset 14, -4
 353:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1232              		.loc 1 353 0
 1233 0008 80F85130 		strb	r3, [r0, #81]
 356:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1234              		.loc 1 356 0
 1235 000c 1368     		ldr	r3, [r2]
 1236 000e 0446     		mov	r4, r0
 1237 0010 23F04003 		bic	r3, r3, #64
 1238 0014 1360     		str	r3, [r2]
 359:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1239              		.loc 1 359 0
 1240 0016 FFF7FEFF 		bl	HAL_SPI_MspDeInit
 1241              	.LVL95:
 361:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_RESET;
 1242              		.loc 1 361 0
 1243 001a 0020     		movs	r0, #0
 1244 001c 6065     		str	r0, [r4, #84]
 365:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1245              		.loc 1 365 0
 1246 001e 84F85000 		strb	r0, [r4, #80]
 362:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1247              		.loc 1 362 0
 1248 0022 84F85100 		strb	r0, [r4, #81]
 367:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 1249              		.loc 1 367 0
 1250 0026 10BD     		pop	{r4, pc}
 1251              	.LVL96:
 1252              	.L167:
 1253              		.cfi_def_cfa_offset 0
 1254              		.cfi_restore 4
 1255              		.cfi_restore 14
 347:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1256              		.loc 1 347 0
 1257 0028 0120     		movs	r0, #1
 1258              	.LVL97:
 1259 002a 7047     		bx	lr
ARM GAS  /tmp/ccMJVeMK.s 			page 84


 1260              		.cfi_endproc
 1261              	.LFE65:
 1263              		.section	.text.HAL_SPI_Transmit,"ax",%progbits
 1264              		.align	1
 1265              		.p2align 2,,3
 1266              		.global	HAL_SPI_Transmit
 1267              		.syntax unified
 1268              		.thumb
 1269              		.thumb_func
 1270              		.fpu softvfp
 1272              	HAL_SPI_Transmit:
 1273              	.LFB68:
 447:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 1274              		.loc 1 447 0
 1275              		.cfi_startproc
 1276              		@ args = 0, pretend = 0, frame = 8
 1277              		@ frame_needed = 0, uses_anonymous_args = 0
 1278              	.LVL98:
 1279 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1280              		.cfi_def_cfa_offset 24
 1281              		.cfi_offset 4, -24
 1282              		.cfi_offset 5, -20
 1283              		.cfi_offset 6, -16
 1284              		.cfi_offset 7, -12
 1285              		.cfi_offset 8, -8
 1286              		.cfi_offset 14, -4
 1287 0004 0446     		mov	r4, r0
 455:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1288              		.loc 1 455 0
 1289 0006 90F85000 		ldrb	r0, [r0, #80]	@ zero_extendqisi2
 1290              	.LVL99:
 447:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 1291              		.loc 1 447 0
 1292 000a 84B0     		sub	sp, sp, #16
 1293              		.cfi_def_cfa_offset 40
 455:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1294              		.loc 1 455 0
 1295 000c 0128     		cmp	r0, #1
 1296 000e 03D1     		bne	.L224
 1297 0010 0220     		movs	r0, #2
 605:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1298              		.loc 1 605 0
 1299 0012 04B0     		add	sp, sp, #16
 1300              		.cfi_remember_state
 1301              		.cfi_def_cfa_offset 24
 1302              		@ sp needed
 1303 0014 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1304              	.LVL100:
 1305              	.L224:
 1306              		.cfi_restore_state
 1307 0018 1D46     		mov	r5, r3
 455:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1308              		.loc 1 455 0 discriminator 2
 1309 001a 0123     		movs	r3, #1
 1310              	.LVL101:
 1311 001c 84F85030 		strb	r3, [r4, #80]
 1312 0020 0E46     		mov	r6, r1
ARM GAS  /tmp/ccMJVeMK.s 			page 85


 1313 0022 9046     		mov	r8, r2
 458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1314              		.loc 1 458 0 discriminator 2
 1315 0024 FFF7FEFF 		bl	HAL_GetTick
 1316              	.LVL102:
 1317 0028 0746     		mov	r7, r0
 1318              	.LVL103:
 460:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1319              		.loc 1 460 0 discriminator 2
 1320 002a 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 1321              	.LVL104:
 1322 002e C0B2     		uxtb	r0, r0
 1323 0030 0128     		cmp	r0, #1
 1324 0032 09D0     		beq	.L225
 462:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1325              		.loc 1 462 0
 1326 0034 0220     		movs	r0, #2
 1327              	.LVL105:
 1328              	.L174:
 601:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
 1329              		.loc 1 601 0
 1330 0036 0122     		movs	r2, #1
 603:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1331              		.loc 1 603 0
 1332 0038 0023     		movs	r3, #0
 601:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Unlocked */
 1333              		.loc 1 601 0
 1334 003a 84F85120 		strb	r2, [r4, #81]
 603:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1335              		.loc 1 603 0
 1336 003e 84F85030 		strb	r3, [r4, #80]
 605:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1337              		.loc 1 605 0
 1338 0042 04B0     		add	sp, sp, #16
 1339              		.cfi_remember_state
 1340              		.cfi_def_cfa_offset 24
 1341              		@ sp needed
 1342 0044 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1343              	.LVL106:
 1344              	.L225:
 1345              		.cfi_restore_state
 466:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1346              		.loc 1 466 0
 1347 0048 002E     		cmp	r6, #0
 1348 004a F4D0     		beq	.L174
 466:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1349              		.loc 1 466 0 is_stmt 0 discriminator 1
 1350 004c B8F1000F 		cmp	r8, #0
 1351 0050 F1D0     		beq	.L174
 474:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 1352              		.loc 1 474 0 is_stmt 1
 1353 0052 0023     		movs	r3, #0
 473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1354              		.loc 1 473 0
 1355 0054 0321     		movs	r1, #3
 487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1356              		.loc 1 487 0
ARM GAS  /tmp/ccMJVeMK.s 			page 86


 1357 0056 A268     		ldr	r2, [r4, #8]
 473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1358              		.loc 1 473 0
 1359 0058 84F85110 		strb	r1, [r4, #81]
 487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1360              		.loc 1 487 0
 1361 005c B2F5004F 		cmp	r2, #32768
 474:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 1362              		.loc 1 474 0
 1363 0060 6365     		str	r3, [r4, #84]
 480:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 1364              		.loc 1 480 0
 1365 0062 A363     		str	r3, [r4, #56]
 481:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 1366              		.loc 1 481 0
 1367 0064 A387     		strh	r3, [r4, #60]	@ movhi
 483:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
 1368              		.loc 1 483 0
 1369 0066 6364     		str	r3, [r4, #68]
 484:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1370              		.loc 1 484 0
 1371 0068 2364     		str	r3, [r4, #64]
 477:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1372              		.loc 1 477 0
 1373 006a A4F83680 		strh	r8, [r4, #54]	@ movhi
 475:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 1374              		.loc 1 475 0
 1375 006e 2663     		str	r6, [r4, #48]
 482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 1376              		.loc 1 482 0
 1377 0070 E387     		strh	r3, [r4, #62]	@ movhi
 476:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 1378              		.loc 1 476 0
 1379 0072 A4F83480 		strh	r8, [r4, #52]	@ movhi
 489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1380              		.loc 1 489 0
 1381 0076 2368     		ldr	r3, [r4]
 487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1382              		.loc 1 487 0
 1383 0078 5DD0     		beq	.L226
 1384              	.L176:
 501:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1385              		.loc 1 501 0
 1386 007a 1A68     		ldr	r2, [r3]
 1387 007c 5206     		lsls	r2, r2, #25
 1388 007e 03D4     		bmi	.L177
 504:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1389              		.loc 1 504 0
 1390 0080 1A68     		ldr	r2, [r3]
 1391 0082 42F04002 		orr	r2, r2, #64
 1392 0086 1A60     		str	r2, [r3]
 1393              	.L177:
 508:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1394              		.loc 1 508 0
 1395 0088 E268     		ldr	r2, [r4, #12]
 1396 008a B2F5006F 		cmp	r2, #2048
 510:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
ARM GAS  /tmp/ccMJVeMK.s 			page 87


 1397              		.loc 1 510 0
 1398 008e 6268     		ldr	r2, [r4, #4]
 508:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1399              		.loc 1 508 0
 1400 0090 2BD0     		beq	.L227
 540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1401              		.loc 1 540 0
 1402 0092 52B1     		cbz	r2, .L221
 540:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1403              		.loc 1 540 0 is_stmt 0 discriminator 1
 1404 0094 E28E     		ldrh	r2, [r4, #54]
 1405 0096 92B2     		uxth	r2, r2
 1406 0098 012A     		cmp	r2, #1
 1407 009a 06D0     		beq	.L221
 1408              	.L190:
 546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1409              		.loc 1 546 0 is_stmt 1
 1410 009c E38E     		ldrh	r3, [r4, #54]
 1411 009e 9BB2     		uxth	r3, r3
 1412 00a0 73B1     		cbz	r3, .L194
 1413              	.L193:
 549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 1414              		.loc 1 549 0
 1415 00a2 2368     		ldr	r3, [r4]
 1416 00a4 9A68     		ldr	r2, [r3, #8]
 1417 00a6 9207     		lsls	r2, r2, #30
 1418 00a8 15D5     		bpl	.L191
 1419              	.L221:
 551:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pData += sizeof(uint8_t);
 1420              		.loc 1 551 0
 1421 00aa 16F8012B 		ldrb	r2, [r6], #1	@ zero_extendqisi2
 1422              	.LVL107:
 1423 00ae 1A73     		strb	r2, [r3, #12]
 1424              	.LVL108:
 553:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 1425              		.loc 1 553 0
 1426 00b0 E38E     		ldrh	r3, [r4, #54]
 1427 00b2 013B     		subs	r3, r3, #1
 1428 00b4 9BB2     		uxth	r3, r3
 1429 00b6 E386     		strh	r3, [r4, #54]	@ movhi
 546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1430              		.loc 1 546 0
 1431 00b8 E38E     		ldrh	r3, [r4, #54]
 1432 00ba 9BB2     		uxth	r3, r3
 1433 00bc 002B     		cmp	r3, #0
 1434 00be F0D1     		bne	.L193
 1435              	.L194:
 568:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1436              		.loc 1 568 0
 1437 00c0 0097     		str	r7, [sp]
 1438 00c2 2B46     		mov	r3, r5
 1439 00c4 0122     		movs	r2, #1
 1440 00c6 0221     		movs	r1, #2
 1441 00c8 2046     		mov	r0, r4
 1442 00ca FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 1443              	.LVL109:
 1444 00ce 0028     		cmp	r0, #0
ARM GAS  /tmp/ccMJVeMK.s 			page 88


 1445 00d0 36D0     		beq	.L228
 1446              	.L185:
 531:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           goto error;
 1447              		.loc 1 531 0
 1448 00d2 0320     		movs	r0, #3
 1449 00d4 AFE7     		b	.L174
 1450              	.L191:
 558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1451              		.loc 1 558 0
 1452 00d6 002D     		cmp	r5, #0
 1453 00d8 FBD0     		beq	.L185
 558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1454              		.loc 1 558 0 is_stmt 0 discriminator 1
 1455 00da 6B1C     		adds	r3, r5, #1
 1456 00dc DED0     		beq	.L190
 558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1457              		.loc 1 558 0 discriminator 2
 1458 00de FFF7FEFF 		bl	HAL_GetTick
 1459              	.LVL110:
 1460 00e2 C01B     		subs	r0, r0, r7
 1461 00e4 8542     		cmp	r5, r0
 1462 00e6 D9D8     		bhi	.L190
 1463 00e8 F3E7     		b	.L185
 1464              	.L227:
 510:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1465              		.loc 1 510 0 is_stmt 1
 1466 00ea 5AB1     		cbz	r2, .L220
 510:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1467              		.loc 1 510 0 is_stmt 0 discriminator 1
 1468 00ec E28E     		ldrh	r2, [r4, #54]
 1469 00ee 92B2     		uxth	r2, r2
 1470 00f0 012A     		cmp	r2, #1
 1471 00f2 07D0     		beq	.L220
 1472              	.L181:
 517:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1473              		.loc 1 517 0 is_stmt 1
 1474 00f4 E38E     		ldrh	r3, [r4, #54]
 1475 00f6 9BB2     		uxth	r3, r3
 1476 00f8 002B     		cmp	r3, #0
 1477 00fa E1D0     		beq	.L194
 520:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 1478              		.loc 1 520 0
 1479 00fc 2368     		ldr	r3, [r4]
 1480 00fe 9A68     		ldr	r2, [r3, #8]
 1481 0100 9007     		lsls	r0, r2, #30
 1482 0102 0ED5     		bpl	.L182
 1483              	.L220:
 522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           pData += sizeof(uint16_t);
 1484              		.loc 1 522 0
 1485 0104 36F8022B 		ldrh	r2, [r6], #2
 1486              	.LVL111:
 1487 0108 DA60     		str	r2, [r3, #12]
 1488              	.LVL112:
 524:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 1489              		.loc 1 524 0
 1490 010a E38E     		ldrh	r3, [r4, #54]
 1491 010c 013B     		subs	r3, r3, #1
ARM GAS  /tmp/ccMJVeMK.s 			page 89


 1492 010e 9BB2     		uxth	r3, r3
 1493 0110 E386     		strh	r3, [r4, #54]	@ movhi
 517:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1494              		.loc 1 517 0
 1495 0112 E38E     		ldrh	r3, [r4, #54]
 1496 0114 9BB2     		uxth	r3, r3
 1497 0116 002B     		cmp	r3, #0
 1498 0118 D2D0     		beq	.L194
 520:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 1499              		.loc 1 520 0
 1500 011a 2368     		ldr	r3, [r4]
 1501 011c 9A68     		ldr	r2, [r3, #8]
 1502 011e 9007     		lsls	r0, r2, #30
 1503 0120 F0D4     		bmi	.L220
 1504              	.L182:
 529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1505              		.loc 1 529 0
 1506 0122 002D     		cmp	r5, #0
 1507 0124 D5D0     		beq	.L185
 529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1508              		.loc 1 529 0 is_stmt 0 discriminator 1
 1509 0126 691C     		adds	r1, r5, #1
 1510 0128 E4D0     		beq	.L181
 529:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1511              		.loc 1 529 0 discriminator 2
 1512 012a FFF7FEFF 		bl	HAL_GetTick
 1513              	.LVL113:
 1514 012e C01B     		subs	r0, r0, r7
 1515 0130 8542     		cmp	r5, r0
 1516 0132 DFD8     		bhi	.L181
 1517 0134 CDE7     		b	.L185
 1518              	.L226:
 489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1519              		.loc 1 489 0 is_stmt 1
 1520 0136 1A68     		ldr	r2, [r3]
 1521 0138 42F48042 		orr	r2, r2, #16384
 1522 013c 1A60     		str	r2, [r3]
 1523 013e 9CE7     		b	.L176
 1524              	.L228:
 1525              	.LVL114:
 1526              	.LBB39:
 1527              	.LBB40:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1528              		.loc 1 2981 0
 1529 0140 0246     		mov	r2, r0
 1530 0142 0097     		str	r7, [sp]
 1531 0144 2B46     		mov	r3, r5
 1532 0146 8021     		movs	r1, #128
 1533 0148 2046     		mov	r0, r4
 1534 014a FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 1535              	.LVL115:
 1536 014e 30B1     		cbz	r0, .L195
 1537              	.LBE40:
 1538              	.LBE39:
 578:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1539              		.loc 1 578 0
 1540 0150 2022     		movs	r2, #32
ARM GAS  /tmp/ccMJVeMK.s 			page 90


 1541              	.LBB43:
 1542              	.LBB41:
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 1543              		.loc 1 2983 0
 1544 0152 636D     		ldr	r3, [r4, #84]
 1545              	.LBE41:
 1546              	.LBE43:
 577:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->ErrorCode = HAL_SPI_ERROR_FLAG;
 1547              		.loc 1 577 0
 1548 0154 0120     		movs	r0, #1
 1549              	.LBB44:
 1550              	.LBB42:
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 1551              		.loc 1 2983 0
 1552 0156 1343     		orrs	r3, r3, r2
 1553 0158 6365     		str	r3, [r4, #84]
 1554              	.LVL116:
 1555              	.LBE42:
 1556              	.LBE44:
 578:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1557              		.loc 1 578 0
 1558 015a 6265     		str	r2, [r4, #84]
 579:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1559              		.loc 1 579 0
 1560 015c 6BE7     		b	.L174
 1561              	.LVL117:
 1562              	.L195:
 583:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1563              		.loc 1 583 0
 1564 015e A368     		ldr	r3, [r4, #8]
 1565 0160 33B9     		cbnz	r3, .L197
 1566              	.LBB45:
 585:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1567              		.loc 1 585 0
 1568 0162 2268     		ldr	r2, [r4]
 1569 0164 0393     		str	r3, [sp, #12]
 1570 0166 D368     		ldr	r3, [r2, #12]
 1571 0168 0393     		str	r3, [sp, #12]
 1572 016a 9368     		ldr	r3, [r2, #8]
 1573 016c 0393     		str	r3, [sp, #12]
 1574 016e 039B     		ldr	r3, [sp, #12]
 1575              	.L197:
 1576              	.LBE45:
 595:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1577              		.loc 1 595 0
 1578 0170 606D     		ldr	r0, [r4, #84]
 462:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1579              		.loc 1 462 0
 1580 0172 0030     		adds	r0, r0, #0
 1581 0174 18BF     		it	ne
 1582 0176 0120     		movne	r0, #1
 1583 0178 5DE7     		b	.L174
 1584              		.cfi_endproc
 1585              	.LFE68:
 1587 017a 00BF     		.section	.text.HAL_SPI_Receive,"ax",%progbits
 1588              		.align	1
 1589              		.p2align 2,,3
ARM GAS  /tmp/ccMJVeMK.s 			page 91


 1590              		.global	HAL_SPI_Receive
 1591              		.syntax unified
 1592              		.thumb
 1593              		.thumb_func
 1594              		.fpu softvfp
 1596              	HAL_SPI_Receive:
 1597              	.LFB69:
 617:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 1598              		.loc 1 617 0
 1599              		.cfi_startproc
 1600              		@ args = 0, pretend = 0, frame = 0
 1601              		@ frame_needed = 0, uses_anonymous_args = 0
 1602              	.LVL118:
 1603 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1604              		.cfi_def_cfa_offset 24
 1605              		.cfi_offset 4, -24
 1606              		.cfi_offset 5, -20
 1607              		.cfi_offset 6, -16
 1608              		.cfi_offset 7, -12
 1609              		.cfi_offset 8, -8
 1610              		.cfi_offset 14, -4
 624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1611              		.loc 1 624 0
 1612 0004 4568     		ldr	r5, [r0, #4]
 617:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 1613              		.loc 1 617 0
 1614 0006 82B0     		sub	sp, sp, #8
 1615              		.cfi_def_cfa_offset 32
 624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1616              		.loc 1 624 0
 1617 0008 B5F5827F 		cmp	r5, #260
 617:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 1618              		.loc 1 617 0
 1619 000c 0446     		mov	r4, r0
 1620 000e 9046     		mov	r8, r2
 1621 0010 1E46     		mov	r6, r3
 1622 0012 0F46     		mov	r7, r1
 624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1623              		.loc 1 624 0
 1624 0014 1CD0     		beq	.L274
 1625              	.LVL119:
 1626              	.L230:
 632:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1627              		.loc 1 632 0
 1628 0016 94F85030 		ldrb	r3, [r4, #80]	@ zero_extendqisi2
 1629 001a 012B     		cmp	r3, #1
 1630 001c 03D1     		bne	.L275
 1631              	.LVL120:
 1632              	.L233:
 1633              	.LBB46:
 1634              	.LBB47:
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1635              		.loc 1 838 0
 1636 001e 0220     		movs	r0, #2
 1637              	.LVL121:
 1638              	.L232:
 1639              	.LBE47:
ARM GAS  /tmp/ccMJVeMK.s 			page 92


 1640              	.LBE46:
 811:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1641              		.loc 1 811 0
 1642 0020 02B0     		add	sp, sp, #8
 1643              		.cfi_remember_state
 1644              		.cfi_def_cfa_offset 24
 1645              		@ sp needed
 1646 0022 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1647              	.LVL122:
 1648              	.L275:
 1649              		.cfi_restore_state
 632:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1650              		.loc 1 632 0 discriminator 2
 1651 0026 0123     		movs	r3, #1
 1652 0028 84F85030 		strb	r3, [r4, #80]
 635:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1653              		.loc 1 635 0 discriminator 2
 1654 002c FFF7FEFF 		bl	HAL_GetTick
 1655              	.LVL123:
 1656 0030 0546     		mov	r5, r0
 1657              	.LVL124:
 637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1658              		.loc 1 637 0 discriminator 2
 1659 0032 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 1660              	.LVL125:
 1661 0036 C0B2     		uxtb	r0, r0
 1662 0038 0128     		cmp	r0, #1
 1663 003a 19D0     		beq	.L276
 639:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1664              		.loc 1 639 0
 1665 003c 0220     		movs	r0, #2
 1666              	.L234:
 1667              	.LVL126:
 808:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 1668              		.loc 1 808 0
 1669 003e 0122     		movs	r2, #1
 809:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1670              		.loc 1 809 0
 1671 0040 0023     		movs	r3, #0
 808:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __HAL_UNLOCK(hspi);
 1672              		.loc 1 808 0
 1673 0042 84F85120 		strb	r2, [r4, #81]
 809:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1674              		.loc 1 809 0
 1675 0046 84F85030 		strb	r3, [r4, #80]
 811:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1676              		.loc 1 811 0
 1677 004a 02B0     		add	sp, sp, #8
 1678              		.cfi_remember_state
 1679              		.cfi_def_cfa_offset 24
 1680              		@ sp needed
 1681 004c BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1682              	.LVL127:
 1683              	.L274:
 1684              		.cfi_restore_state
 624:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1685              		.loc 1 624 0 discriminator 1
ARM GAS  /tmp/ccMJVeMK.s 			page 93


 1686 0050 8368     		ldr	r3, [r0, #8]
 1687              	.LVL128:
 1688 0052 002B     		cmp	r3, #0
 1689 0054 DFD1     		bne	.L230
 626:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 1690              		.loc 1 626 0
 1691 0056 0422     		movs	r2, #4
 1692              	.LVL129:
 1693              	.LBB50:
 1694              	.LBB48:
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1695              		.loc 1 838 0
 1696 0058 90F85030 		ldrb	r3, [r0, #80]	@ zero_extendqisi2
 1697              	.LBE48:
 1698              	.LBE50:
 626:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 1699              		.loc 1 626 0
 1700 005c 80F85120 		strb	r2, [r0, #81]
 1701              	.LVL130:
 1702              	.LBB51:
 1703              	.LBB49:
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1704              		.loc 1 838 0
 1705 0060 012B     		cmp	r3, #1
 1706 0062 DCD0     		beq	.L233
 1707 0064 0096     		str	r6, [sp]
 1708 0066 4346     		mov	r3, r8
 1709 0068 0A46     		mov	r2, r1
 1710 006a FFF7FEFF 		bl	HAL_SPI_TransmitReceive.part.1
 1711              	.LVL131:
 1712 006e D7E7     		b	.L232
 1713              	.LVL132:
 1714              	.L276:
 1715              	.LBE49:
 1716              	.LBE51:
 643:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1717              		.loc 1 643 0
 1718 0070 002F     		cmp	r7, #0
 1719 0072 E4D0     		beq	.L234
 643:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1720              		.loc 1 643 0 is_stmt 0 discriminator 1
 1721 0074 B8F1000F 		cmp	r8, #0
 1722 0078 E1D0     		beq	.L234
 651:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 1723              		.loc 1 651 0 is_stmt 1
 1724 007a 0023     		movs	r3, #0
 650:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1725              		.loc 1 650 0
 1726 007c 0421     		movs	r1, #4
 674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1727              		.loc 1 674 0
 1728 007e A268     		ldr	r2, [r4, #8]
 650:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1729              		.loc 1 650 0
 1730 0080 84F85110 		strb	r1, [r4, #81]
 674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1731              		.loc 1 674 0
ARM GAS  /tmp/ccMJVeMK.s 			page 94


 1732 0084 B2F5004F 		cmp	r2, #32768
 651:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 1733              		.loc 1 651 0
 1734 0088 6365     		str	r3, [r4, #84]
 657:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 1735              		.loc 1 657 0
 1736 008a 2363     		str	r3, [r4, #48]
 658:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 1737              		.loc 1 658 0
 1738 008c A386     		strh	r3, [r4, #52]	@ movhi
 660:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 1739              		.loc 1 660 0
 1740 008e 2364     		str	r3, [r4, #64]
 661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1741              		.loc 1 661 0
 1742 0090 6364     		str	r3, [r4, #68]
 654:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1743              		.loc 1 654 0
 1744 0092 A4F83E80 		strh	r8, [r4, #62]	@ movhi
 652:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 1745              		.loc 1 652 0
 1746 0096 A763     		str	r7, [r4, #56]
 659:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
 1747              		.loc 1 659 0
 1748 0098 E386     		strh	r3, [r4, #54]	@ movhi
 653:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 1749              		.loc 1 653 0
 1750 009a A4F83C80 		strh	r8, [r4, #60]	@ movhi
 676:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1751              		.loc 1 676 0
 1752 009e 2368     		ldr	r3, [r4]
 674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1753              		.loc 1 674 0
 1754 00a0 49D0     		beq	.L277
 1755              	.L236:
 680:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1756              		.loc 1 680 0
 1757 00a2 1A68     		ldr	r2, [r3]
 1758 00a4 5206     		lsls	r2, r2, #25
 1759 00a6 03D4     		bmi	.L237
 683:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1760              		.loc 1 683 0
 1761 00a8 1A68     		ldr	r2, [r3]
 1762 00aa 42F04002 		orr	r2, r2, #64
 1763 00ae 1A60     		str	r2, [r3]
 1764              	.L237:
 687:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1765              		.loc 1 687 0
 1766 00b0 E368     		ldr	r3, [r4, #12]
 1767 00b2 13BB     		cbnz	r3, .L239
 1768              	.L240:
 690:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1769              		.loc 1 690 0
 1770 00b4 E38F     		ldrh	r3, [r4, #62]
 1771 00b6 9BB2     		uxth	r3, r3
 1772 00b8 73B1     		cbz	r3, .L251
 1773              	.L245:
ARM GAS  /tmp/ccMJVeMK.s 			page 95


 693:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 1774              		.loc 1 693 0
 1775 00ba 2368     		ldr	r3, [r4]
 1776 00bc 9A68     		ldr	r2, [r3, #8]
 1777 00be D007     		lsls	r0, r2, #31
 1778 00c0 2FD5     		bpl	.L241
 696:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pData += sizeof(uint8_t);
 1779              		.loc 1 696 0
 1780 00c2 1B7B     		ldrb	r3, [r3, #12]	@ zero_extendqisi2
 1781 00c4 07F8013B 		strb	r3, [r7], #1
 1782              	.LVL133:
 698:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 1783              		.loc 1 698 0
 1784 00c8 E38F     		ldrh	r3, [r4, #62]
 1785 00ca 013B     		subs	r3, r3, #1
 1786 00cc 9BB2     		uxth	r3, r3
 1787 00ce E387     		strh	r3, [r4, #62]	@ movhi
 690:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1788              		.loc 1 690 0
 1789 00d0 E38F     		ldrh	r3, [r4, #62]
 1790 00d2 9BB2     		uxth	r3, r3
 1791 00d4 002B     		cmp	r3, #0
 1792 00d6 F0D1     		bne	.L245
 1793              	.L251:
 777:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1794              		.loc 1 777 0
 1795 00d8 6368     		ldr	r3, [r4, #4]
 1796 00da B3F5827F 		cmp	r3, #260
 1797 00de 2FD0     		beq	.L278
 1798              	.L247:
 802:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1799              		.loc 1 802 0
 1800 00e0 606D     		ldr	r0, [r4, #84]
 639:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1801              		.loc 1 639 0
 1802 00e2 0030     		adds	r0, r0, #0
 1803 00e4 18BF     		it	ne
 1804 00e6 0120     		movne	r0, #1
 1805 00e8 A9E7     		b	.L234
 1806              	.L248:
 726:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1807              		.loc 1 726 0
 1808 00ea 16B3     		cbz	r6, .L244
 726:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1809              		.loc 1 726 0 is_stmt 0 discriminator 1
 1810 00ec 731C     		adds	r3, r6, #1
 1811 00ee 04D0     		beq	.L239
 726:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1812              		.loc 1 726 0 discriminator 2
 1813 00f0 FFF7FEFF 		bl	HAL_GetTick
 1814              	.LVL134:
 1815 00f4 401B     		subs	r0, r0, r5
 1816 00f6 8642     		cmp	r6, r0
 1817 00f8 1BD9     		bls	.L244
 1818              	.L239:
 714:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1819              		.loc 1 714 0 is_stmt 1
ARM GAS  /tmp/ccMJVeMK.s 			page 96


 1820 00fa E38F     		ldrh	r3, [r4, #62]
 1821 00fc 9BB2     		uxth	r3, r3
 1822 00fe 002B     		cmp	r3, #0
 1823 0100 EAD0     		beq	.L251
 1824              	.L250:
 717:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 1825              		.loc 1 717 0
 1826 0102 2368     		ldr	r3, [r4]
 1827 0104 9A68     		ldr	r2, [r3, #8]
 1828 0106 D207     		lsls	r2, r2, #31
 1829 0108 EFD5     		bpl	.L248
 719:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         pData += sizeof(uint16_t);
 1830              		.loc 1 719 0
 1831 010a DB68     		ldr	r3, [r3, #12]
 1832 010c 27F8023B 		strh	r3, [r7], #2	@ movhi
 1833              	.LVL135:
 721:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 1834              		.loc 1 721 0
 1835 0110 E38F     		ldrh	r3, [r4, #62]
 1836 0112 013B     		subs	r3, r3, #1
 1837 0114 9BB2     		uxth	r3, r3
 1838 0116 E387     		strh	r3, [r4, #62]	@ movhi
 714:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 1839              		.loc 1 714 0
 1840 0118 E38F     		ldrh	r3, [r4, #62]
 1841 011a 9BB2     		uxth	r3, r3
 1842 011c 002B     		cmp	r3, #0
 1843 011e F0D1     		bne	.L250
 1844 0120 DAE7     		b	.L251
 1845              	.L241:
 703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1846              		.loc 1 703 0
 1847 0122 36B1     		cbz	r6, .L244
 703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1848              		.loc 1 703 0 is_stmt 0 discriminator 1
 1849 0124 711C     		adds	r1, r6, #1
 1850 0126 C5D0     		beq	.L240
 703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 1851              		.loc 1 703 0 discriminator 2
 1852 0128 FFF7FEFF 		bl	HAL_GetTick
 1853              	.LVL136:
 1854 012c 401B     		subs	r0, r0, r5
 1855 012e 8642     		cmp	r6, r0
 1856 0130 C0D8     		bhi	.L240
 1857              	.L244:
 705:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           goto error;
 1858              		.loc 1 705 0 is_stmt 1
 1859 0132 0320     		movs	r0, #3
 1860 0134 83E7     		b	.L234
 1861              	.L277:
 676:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1862              		.loc 1 676 0
 1863 0136 1A68     		ldr	r2, [r3]
 1864 0138 22F48042 		bic	r2, r2, #16384
 1865 013c 1A60     		str	r2, [r3]
 1866 013e B0E7     		b	.L236
 1867              	.L278:
ARM GAS  /tmp/ccMJVeMK.s 			page 97


 777:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1868              		.loc 1 777 0 discriminator 1
 1869 0140 A368     		ldr	r3, [r4, #8]
 1870 0142 B3F5004F 		cmp	r3, #32768
 1871 0146 02D0     		beq	.L252
 777:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1872              		.loc 1 777 0 is_stmt 0 discriminator 2
 1873 0148 B3F5806F 		cmp	r3, #1024
 1874 014c C8D1     		bne	.L247
 1875              	.L252:
 780:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 1876              		.loc 1 780 0 is_stmt 1
 1877 014e 2268     		ldr	r2, [r4]
 1878 0150 1368     		ldr	r3, [r2]
 1879 0152 23F04003 		bic	r3, r3, #64
 1880 0156 1360     		str	r3, [r2]
 1881 0158 C2E7     		b	.L247
 1882              		.cfi_endproc
 1883              	.LFE69:
 1885 015a 00BF     		.section	.text.HAL_SPI_TransmitReceive,"ax",%progbits
 1886              		.align	1
 1887              		.p2align 2,,3
 1888              		.global	HAL_SPI_TransmitReceive
 1889              		.syntax unified
 1890              		.thumb
 1891              		.thumb_func
 1892              		.fpu softvfp
 1894              	HAL_SPI_TransmitReceive:
 1895              	.LFB70:
 824:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 1896              		.loc 1 824 0
 1897              		.cfi_startproc
 1898              		@ args = 4, pretend = 0, frame = 0
 1899              		@ frame_needed = 0, uses_anonymous_args = 0
 1900              		@ link register save eliminated.
 1901              	.LVL137:
 1902 0000 30B4     		push	{r4, r5}
 1903              		.cfi_def_cfa_offset 8
 1904              		.cfi_offset 4, -8
 1905              		.cfi_offset 5, -4
 838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1906              		.loc 1 838 0
 1907 0002 90F85040 		ldrb	r4, [r0, #80]	@ zero_extendqisi2
 1908 0006 012C     		cmp	r4, #1
 1909 0008 02D1     		bne	.L282
1045:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1910              		.loc 1 1045 0
 1911 000a 30BC     		pop	{r4, r5}
 1912              		.cfi_remember_state
 1913              		.cfi_restore 5
 1914              		.cfi_restore 4
 1915              		.cfi_def_cfa_offset 0
 1916              	.LVL138:
 1917 000c 0220     		movs	r0, #2
 1918              	.LVL139:
 1919 000e 7047     		bx	lr
 1920              	.LVL140:
ARM GAS  /tmp/ccMJVeMK.s 			page 98


 1921              	.L282:
 1922              		.cfi_restore_state
1045:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1923              		.loc 1 1045 0 is_stmt 0 discriminator 2
 1924 0010 30BC     		pop	{r4, r5}
 1925              		.cfi_restore 5
 1926              		.cfi_restore 4
 1927              		.cfi_def_cfa_offset 0
 1928              	.LVL141:
 1929 0012 FFF7FEBF 		b	HAL_SPI_TransmitReceive.part.1
 1930              	.LVL142:
 1931              		.cfi_endproc
 1932              	.LFE70:
 1934 0016 00BF     		.section	.text.HAL_SPI_Transmit_IT,"ax",%progbits
 1935              		.align	1
 1936              		.p2align 2,,3
 1937              		.global	HAL_SPI_Transmit_IT
 1938              		.syntax unified
 1939              		.thumb
 1940              		.thumb_func
 1941              		.fpu softvfp
 1943              	HAL_SPI_Transmit_IT:
 1944              	.LFB71:
1056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 1945              		.loc 1 1056 0 is_stmt 1
 1946              		.cfi_startproc
 1947              		@ args = 0, pretend = 0, frame = 0
 1948              		@ frame_needed = 0, uses_anonymous_args = 0
 1949              		@ link register save eliminated.
 1950              	.LVL143:
 1951 0000 0346     		mov	r3, r0
1063:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1952              		.loc 1 1063 0
 1953 0002 90F85000 		ldrb	r0, [r0, #80]	@ zero_extendqisi2
 1954              	.LVL144:
 1955 0006 0128     		cmp	r0, #1
 1956 0008 0DD0     		beq	.L292
1063:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1957              		.loc 1 1063 0 is_stmt 0 discriminator 2
 1958 000a 0120     		movs	r0, #1
 1959 000c 83F85000 		strb	r0, [r3, #80]
1065:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1960              		.loc 1 1065 0 is_stmt 1 discriminator 2
 1961 0010 29B1     		cbz	r1, .L298
1065:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1962              		.loc 1 1065 0 is_stmt 0 discriminator 1
 1963 0012 22B1     		cbz	r2, .L298
1071:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1964              		.loc 1 1071 0 is_stmt 1
 1965 0014 93F85100 		ldrb	r0, [r3, #81]	@ zero_extendqisi2
 1966 0018 0128     		cmp	r0, #1
 1967 001a 06D0     		beq	.L302
1073:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 1968              		.loc 1 1073 0
 1969 001c 0220     		movs	r0, #2
 1970              	.L298:
 1971              	.LVL145:
ARM GAS  /tmp/ccMJVeMK.s 			page 99


1133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 1972              		.loc 1 1133 0
 1973 001e 0022     		movs	r2, #0
 1974              	.LVL146:
 1975 0020 83F85020 		strb	r2, [r3, #80]
1135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1976              		.loc 1 1135 0
 1977 0024 7047     		bx	lr
 1978              	.LVL147:
 1979              	.L292:
1063:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 1980              		.loc 1 1063 0
 1981 0026 0220     		movs	r0, #2
 1982 0028 7047     		bx	lr
 1983              	.L302:
1056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 1984              		.loc 1 1056 0
 1985 002a 30B4     		push	{r4, r5}
 1986              		.cfi_def_cfa_offset 8
 1987              		.cfi_offset 4, -8
 1988              		.cfi_offset 5, -4
1079:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 1989              		.loc 1 1079 0
 1990 002c 0020     		movs	r0, #0
1078:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1991              		.loc 1 1078 0
 1992 002e 0325     		movs	r5, #3
1091:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 1993              		.loc 1 1091 0
 1994 0030 DC68     		ldr	r4, [r3, #12]
1078:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 1995              		.loc 1 1078 0
 1996 0032 83F85150 		strb	r5, [r3, #81]
1080:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 1997              		.loc 1 1080 0
 1998 0036 1963     		str	r1, [r3, #48]
1079:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 1999              		.loc 1 1079 0
 2000 0038 5865     		str	r0, [r3, #84]
1081:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 2001              		.loc 1 1081 0
 2002 003a 9A86     		strh	r2, [r3, #52]	@ movhi
1082:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2003              		.loc 1 1082 0
 2004 003c DA86     		strh	r2, [r3, #54]	@ movhi
1085:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 2005              		.loc 1 1085 0
 2006 003e 9863     		str	r0, [r3, #56]
1086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 2007              		.loc 1 1086 0
 2008 0040 9887     		strh	r0, [r3, #60]	@ movhi
1088:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2009              		.loc 1 1088 0
 2010 0042 1864     		str	r0, [r3, #64]
1087:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
 2011              		.loc 1 1087 0
 2012 0044 D887     		strh	r0, [r3, #62]	@ movhi
ARM GAS  /tmp/ccMJVeMK.s 			page 100


1091:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2013              		.loc 1 1091 0
 2014 0046 C4B9     		cbnz	r4, .L303
1097:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2015              		.loc 1 1097 0
 2016 0048 144A     		ldr	r2, .L305
 2017              	.LVL148:
 2018 004a 5A64     		str	r2, [r3, #68]
 2019              	.L287:
1101:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2020              		.loc 1 1101 0
 2021 004c 9A68     		ldr	r2, [r3, #8]
 2022 004e B2F5004F 		cmp	r2, #32768
 2023 0052 17D0     		beq	.L304
1114:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2024              		.loc 1 1114 0
 2025 0054 02BB     		cbnz	r2, .L290
1117:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2026              		.loc 1 1117 0
 2027 0056 1A68     		ldr	r2, [r3]
 2028 0058 5168     		ldr	r1, [r2, #4]
 2029              	.LVL149:
 2030 005a 41F08001 		orr	r1, r1, #128
 2031 005e 5160     		str	r1, [r2, #4]
 2032              	.L291:
1126:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2033              		.loc 1 1126 0
 2034 0060 1068     		ldr	r0, [r2]
 2035 0062 10F04000 		ands	r0, r0, #64
 2036 0066 0BD1     		bne	.L296
1129:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2037              		.loc 1 1129 0
 2038 0068 1168     		ldr	r1, [r2]
 2039 006a 41F04001 		orr	r1, r1, #64
 2040 006e 1160     		str	r1, [r2]
 2041              	.L285:
 2042              	.LVL150:
1133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 2043              		.loc 1 1133 0
 2044 0070 0022     		movs	r2, #0
1135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2045              		.loc 1 1135 0
 2046 0072 30BC     		pop	{r4, r5}
 2047              		.cfi_remember_state
 2048              		.cfi_restore 5
 2049              		.cfi_restore 4
 2050              		.cfi_def_cfa_offset 0
1133:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 2051              		.loc 1 1133 0
 2052 0074 83F85020 		strb	r2, [r3, #80]
1135:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2053              		.loc 1 1135 0
 2054 0078 7047     		bx	lr
 2055              	.LVL151:
 2056              	.L303:
 2057              		.cfi_restore_state
1093:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
ARM GAS  /tmp/ccMJVeMK.s 			page 101


 2058              		.loc 1 1093 0
 2059 007a 094A     		ldr	r2, .L305+4
 2060              	.LVL152:
 2061 007c 5A64     		str	r2, [r3, #68]
 2062 007e E5E7     		b	.L287
 2063              	.LVL153:
 2064              	.L296:
1057:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2065              		.loc 1 1057 0
 2066 0080 0020     		movs	r0, #0
 2067 0082 F5E7     		b	.L285
 2068              	.LVL154:
 2069              	.L304:
1103:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2070              		.loc 1 1103 0
 2071 0084 1A68     		ldr	r2, [r3]
 2072 0086 1168     		ldr	r1, [r2]
 2073              	.LVL155:
 2074 0088 41F48041 		orr	r1, r1, #16384
 2075 008c 1160     		str	r1, [r2]
 2076              	.L289:
1122:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2077              		.loc 1 1122 0
 2078 008e 5168     		ldr	r1, [r2, #4]
 2079 0090 41F0A001 		orr	r1, r1, #160
 2080 0094 5160     		str	r1, [r2, #4]
 2081 0096 E3E7     		b	.L291
 2082              	.LVL156:
 2083              	.L290:
 2084 0098 1A68     		ldr	r2, [r3]
 2085 009a F8E7     		b	.L289
 2086              	.L306:
 2087              		.align	2
 2088              	.L305:
 2089 009c 00000000 		.word	SPI_TxISR_8BIT
 2090 00a0 00000000 		.word	SPI_TxISR_16BIT
 2091              		.cfi_endproc
 2092              	.LFE71:
 2094              		.section	.text.HAL_SPI_Receive_IT,"ax",%progbits
 2095              		.align	1
 2096              		.p2align 2,,3
 2097              		.global	HAL_SPI_Receive_IT
 2098              		.syntax unified
 2099              		.thumb
 2100              		.thumb_func
 2101              		.fpu softvfp
 2103              	HAL_SPI_Receive_IT:
 2104              	.LFB72:
1146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2105              		.loc 1 1146 0
 2106              		.cfi_startproc
 2107              		@ args = 0, pretend = 0, frame = 0
 2108              		@ frame_needed = 0, uses_anonymous_args = 0
 2109              		@ link register save eliminated.
 2110              	.LVL157:
 2111 0000 70B4     		push	{r4, r5, r6}
 2112              		.cfi_def_cfa_offset 12
ARM GAS  /tmp/ccMJVeMK.s 			page 102


 2113              		.cfi_offset 4, -12
 2114              		.cfi_offset 5, -8
 2115              		.cfi_offset 6, -4
1149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2116              		.loc 1 1149 0
 2117 0002 8568     		ldr	r5, [r0, #8]
1146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2118              		.loc 1 1146 0
 2119 0004 0446     		mov	r4, r0
 2120 0006 0E46     		mov	r6, r1
1149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2121              		.loc 1 1149 0
 2122 0008 1DB9     		cbnz	r5, .L308
1149:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2123              		.loc 1 1149 0 is_stmt 0 discriminator 1
 2124 000a 4368     		ldr	r3, [r0, #4]
 2125 000c B3F5827F 		cmp	r3, #260
 2126 0010 11D0     		beq	.L325
 2127              	.L308:
1157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2128              		.loc 1 1157 0 is_stmt 1
 2129 0012 94F85010 		ldrb	r1, [r4, #80]	@ zero_extendqisi2
 2130              	.LVL158:
 2131 0016 0129     		cmp	r1, #1
 2132 0018 14D0     		beq	.L311
1157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2133              		.loc 1 1157 0 is_stmt 0 discriminator 2
 2134 001a 0123     		movs	r3, #1
1159:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2135              		.loc 1 1159 0 is_stmt 1 discriminator 2
 2136 001c 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 2137              	.LVL159:
1157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2138              		.loc 1 1157 0 discriminator 2
 2139 0020 84F85030 		strb	r3, [r4, #80]
1159:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2140              		.loc 1 1159 0 discriminator 2
 2141 0024 C0B2     		uxtb	r0, r0
 2142 0026 9842     		cmp	r0, r3
 2143 0028 0FD0     		beq	.L326
1161:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 2144              		.loc 1 1161 0
 2145 002a 0220     		movs	r0, #2
 2146              	.LVL160:
 2147              	.L312:
1224:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 2148              		.loc 1 1224 0
 2149 002c 0023     		movs	r3, #0
 2150 002e 84F85030 		strb	r3, [r4, #80]
1226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2151              		.loc 1 1226 0
 2152 0032 70BC     		pop	{r4, r5, r6}
 2153              		.cfi_remember_state
 2154              		.cfi_restore 6
 2155              		.cfi_restore 5
 2156              		.cfi_restore 4
 2157              		.cfi_def_cfa_offset 0
ARM GAS  /tmp/ccMJVeMK.s 			page 103


 2158              	.LVL161:
 2159 0034 7047     		bx	lr
 2160              	.LVL162:
 2161              	.L325:
 2162              		.cfi_restore_state
1151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 2163              		.loc 1 1151 0
 2164 0036 0425     		movs	r5, #4
 2165              	.LBB52:
 2166              	.LBB53:
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2167              		.loc 1 1246 0
 2168 0038 90F85030 		ldrb	r3, [r0, #80]	@ zero_extendqisi2
 2169              	.LBE53:
 2170              	.LBE52:
1151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 2171              		.loc 1 1151 0
 2172 003c 80F85150 		strb	r5, [r0, #81]
 2173              	.LVL163:
 2174              	.LBB58:
 2175              	.LBB54:
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2176              		.loc 1 1246 0
 2177 0040 012B     		cmp	r3, #1
 2178 0042 27D1     		bne	.L309
 2179              	.LVL164:
 2180              	.L311:
 2181              	.LBE54:
 2182              	.LBE58:
1226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2183              		.loc 1 1226 0
 2184 0044 70BC     		pop	{r4, r5, r6}
 2185              		.cfi_remember_state
 2186              		.cfi_restore 4
 2187              		.cfi_restore 5
 2188              		.cfi_restore 6
 2189              		.cfi_def_cfa_offset 0
 2190              	.LVL165:
 2191              	.LBB59:
 2192              	.LBB55:
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2193              		.loc 1 1246 0
 2194 0046 0220     		movs	r0, #2
 2195              	.LVL166:
 2196              	.LBE55:
 2197              	.LBE59:
1226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2198              		.loc 1 1226 0
 2199 0048 7047     		bx	lr
 2200              	.LVL167:
 2201              	.L326:
 2202              		.cfi_restore_state
1165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2203              		.loc 1 1165 0
 2204 004a 002E     		cmp	r6, #0
 2205 004c EED0     		beq	.L312
1165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
ARM GAS  /tmp/ccMJVeMK.s 			page 104


 2206              		.loc 1 1165 0 is_stmt 0 discriminator 1
 2207 004e 002A     		cmp	r2, #0
 2208 0050 ECD0     		beq	.L312
1173:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 2209              		.loc 1 1173 0 is_stmt 1
 2210 0052 0023     		movs	r3, #0
1172:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2211              		.loc 1 1172 0
 2212 0054 0420     		movs	r0, #4
1185:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2213              		.loc 1 1185 0
 2214 0056 E168     		ldr	r1, [r4, #12]
1172:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2215              		.loc 1 1172 0
 2216 0058 84F85100 		strb	r0, [r4, #81]
1174:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 2217              		.loc 1 1174 0
 2218 005c A663     		str	r6, [r4, #56]
1173:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 2219              		.loc 1 1173 0
 2220 005e 6365     		str	r3, [r4, #84]
1175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 2221              		.loc 1 1175 0
 2222 0060 A287     		strh	r2, [r4, #60]	@ movhi
1176:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2223              		.loc 1 1176 0
 2224 0062 E287     		strh	r2, [r4, #62]	@ movhi
1179:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 2225              		.loc 1 1179 0
 2226 0064 2363     		str	r3, [r4, #48]
1180:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 2227              		.loc 1 1180 0
 2228 0066 A386     		strh	r3, [r4, #52]	@ movhi
1182:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2229              		.loc 1 1182 0
 2230 0068 6364     		str	r3, [r4, #68]
1181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 2231              		.loc 1 1181 0
 2232 006a E386     		strh	r3, [r4, #54]	@ movhi
1185:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2233              		.loc 1 1185 0
 2234 006c B9B9     		cbnz	r1, .L327
1191:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2235              		.loc 1 1191 0
 2236 006e 114B     		ldr	r3, .L329
 2237 0070 2364     		str	r3, [r4, #64]
 2238              	.L314:
1195:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2239              		.loc 1 1195 0
 2240 0072 B5F5004F 		cmp	r5, #32768
1197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2241              		.loc 1 1197 0
 2242 0076 2368     		ldr	r3, [r4]
1195:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2243              		.loc 1 1195 0
 2244 0078 16D0     		beq	.L328
 2245              	.LVL168:
ARM GAS  /tmp/ccMJVeMK.s 			page 105


 2246              	.L316:
1209:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2247              		.loc 1 1209 0
 2248 007a 5A68     		ldr	r2, [r3, #4]
 2249 007c 42F06002 		orr	r2, r2, #96
 2250 0080 5A60     		str	r2, [r3, #4]
1216:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2251              		.loc 1 1216 0
 2252 0082 1868     		ldr	r0, [r3]
 2253 0084 10F04000 		ands	r0, r0, #64
 2254 0088 0CD1     		bne	.L320
1219:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2255              		.loc 1 1219 0
 2256 008a 1A68     		ldr	r2, [r3]
 2257 008c 42F04002 		orr	r2, r2, #64
 2258 0090 1A60     		str	r2, [r3]
 2259 0092 CBE7     		b	.L312
 2260              	.LVL169:
 2261              	.L309:
 2262              	.LBB60:
 2263              	.LBB56:
 2264 0094 1346     		mov	r3, r2
 2265              	.LBE56:
 2266              	.LBE60:
1226:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2267              		.loc 1 1226 0
 2268 0096 70BC     		pop	{r4, r5, r6}
 2269              		.cfi_remember_state
 2270              		.cfi_restore 6
 2271              		.cfi_restore 5
 2272              		.cfi_restore 4
 2273              		.cfi_def_cfa_offset 0
 2274              	.LBB61:
 2275              	.LBB57:
 2276 0098 0A46     		mov	r2, r1
 2277              	.LVL170:
 2278 009a FFF7FEBF 		b	HAL_SPI_TransmitReceive_IT.part.2
 2279              	.LVL171:
 2280              	.L327:
 2281              		.cfi_restore_state
 2282              	.LBE57:
 2283              	.LBE61:
1187:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2284              		.loc 1 1187 0
 2285 009e 064B     		ldr	r3, .L329+4
 2286 00a0 2364     		str	r3, [r4, #64]
 2287 00a2 E6E7     		b	.L314
 2288              	.LVL172:
 2289              	.L320:
1147:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2290              		.loc 1 1147 0
 2291 00a4 0020     		movs	r0, #0
 2292 00a6 C1E7     		b	.L312
 2293              	.LVL173:
 2294              	.L328:
1197:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2295              		.loc 1 1197 0
ARM GAS  /tmp/ccMJVeMK.s 			page 106


 2296 00a8 1A68     		ldr	r2, [r3]
 2297              	.LVL174:
 2298 00aa 22F48042 		bic	r2, r2, #16384
 2299 00ae 1A60     		str	r2, [r3]
 2300 00b0 E3E7     		b	.L316
 2301              	.L330:
 2302 00b2 00BF     		.align	2
 2303              	.L329:
 2304 00b4 00000000 		.word	SPI_RxISR_8BIT
 2305 00b8 00000000 		.word	SPI_RxISR_16BIT
 2306              		.cfi_endproc
 2307              	.LFE72:
 2309              		.section	.text.HAL_SPI_TransmitReceive_IT,"ax",%progbits
 2310              		.align	1
 2311              		.p2align 2,,3
 2312              		.global	HAL_SPI_TransmitReceive_IT
 2313              		.syntax unified
 2314              		.thumb
 2315              		.thumb_func
 2316              		.fpu softvfp
 2318              	HAL_SPI_TransmitReceive_IT:
 2319              	.LFB73:
1238:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 2320              		.loc 1 1238 0
 2321              		.cfi_startproc
 2322              		@ args = 0, pretend = 0, frame = 0
 2323              		@ frame_needed = 0, uses_anonymous_args = 0
 2324              		@ link register save eliminated.
 2325              	.LVL175:
 2326 0000 10B4     		push	{r4}
 2327              		.cfi_def_cfa_offset 4
 2328              		.cfi_offset 4, -4
1246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2329              		.loc 1 1246 0
 2330 0002 90F85040 		ldrb	r4, [r0, #80]	@ zero_extendqisi2
 2331 0006 012C     		cmp	r4, #1
 2332 0008 02D0     		beq	.L332
1313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2333              		.loc 1 1313 0 discriminator 2
 2334 000a 10BC     		pop	{r4}
 2335              		.cfi_remember_state
 2336              		.cfi_restore 4
 2337              		.cfi_def_cfa_offset 0
 2338 000c FFF7FEBF 		b	HAL_SPI_TransmitReceive_IT.part.2
 2339              	.LVL176:
 2340              	.L332:
 2341              		.cfi_restore_state
1313:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2342              		.loc 1 1313 0 is_stmt 0
 2343 0010 0220     		movs	r0, #2
 2344              	.LVL177:
 2345 0012 10BC     		pop	{r4}
 2346              		.cfi_restore 4
 2347              		.cfi_def_cfa_offset 0
 2348 0014 7047     		bx	lr
 2349              		.cfi_endproc
 2350              	.LFE73:
ARM GAS  /tmp/ccMJVeMK.s 			page 107


 2352 0016 00BF     		.section	.text.HAL_SPI_Transmit_DMA,"ax",%progbits
 2353              		.align	1
 2354              		.p2align 2,,3
 2355              		.global	HAL_SPI_Transmit_DMA
 2356              		.syntax unified
 2357              		.thumb
 2358              		.thumb_func
 2359              		.fpu softvfp
 2361              	HAL_SPI_Transmit_DMA:
 2362              	.LFB74:
1324:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2363              		.loc 1 1324 0 is_stmt 1
 2364              		.cfi_startproc
 2365              		@ args = 0, pretend = 0, frame = 0
 2366              		@ frame_needed = 0, uses_anonymous_args = 0
 2367              	.LVL178:
 2368 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2369              		.cfi_def_cfa_offset 24
 2370              		.cfi_offset 3, -24
 2371              		.cfi_offset 4, -20
 2372              		.cfi_offset 5, -16
 2373              		.cfi_offset 6, -12
 2374              		.cfi_offset 7, -8
 2375              		.cfi_offset 14, -4
1331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2376              		.loc 1 1331 0
 2377 0002 90F85030 		ldrb	r3, [r0, #80]	@ zero_extendqisi2
 2378 0006 012B     		cmp	r3, #1
 2379 0008 0DD0     		beq	.L340
1331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2380              		.loc 1 1331 0 is_stmt 0 discriminator 2
 2381 000a 0123     		movs	r3, #1
 2382 000c 0446     		mov	r4, r0
1333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2383              		.loc 1 1333 0 is_stmt 1 discriminator 2
 2384 000e 90F85100 		ldrb	r0, [r0, #81]	@ zero_extendqisi2
 2385              	.LVL179:
1331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2386              		.loc 1 1331 0 discriminator 2
 2387 0012 84F85030 		strb	r3, [r4, #80]
1333:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2388              		.loc 1 1333 0 discriminator 2
 2389 0016 C0B2     		uxtb	r0, r0
 2390 0018 9842     		cmp	r0, r3
 2391 001a 06D0     		beq	.L345
1335:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 2392              		.loc 1 1335 0
 2393 001c 0220     		movs	r0, #2
 2394              	.LVL180:
 2395              	.L336:
1403:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 2396              		.loc 1 1403 0
 2397 001e 0023     		movs	r3, #0
 2398 0020 84F85030 		strb	r3, [r4, #80]
1404:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 2399              		.loc 1 1404 0
 2400 0024 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
ARM GAS  /tmp/ccMJVeMK.s 			page 108


 2401              	.LVL181:
 2402              	.L340:
1331:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2403              		.loc 1 1331 0
 2404 0026 0220     		movs	r0, #2
 2405              	.LVL182:
1405:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2406              		.loc 1 1405 0
 2407 0028 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 2408              	.LVL183:
 2409              	.L345:
1339:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2410              		.loc 1 1339 0
 2411 002a 0029     		cmp	r1, #0
 2412 002c F7D0     		beq	.L336
1339:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2413              		.loc 1 1339 0 is_stmt 0 discriminator 1
 2414 002e 002A     		cmp	r2, #0
 2415 0030 F5D0     		beq	.L336
1347:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 2416              		.loc 1 1347 0 is_stmt 1
 2417 0032 0023     		movs	r3, #0
1346:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2418              		.loc 1 1346 0
 2419 0034 0325     		movs	r5, #3
1360:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2420              		.loc 1 1360 0
 2421 0036 A068     		ldr	r0, [r4, #8]
1346:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2422              		.loc 1 1346 0
 2423 0038 84F85150 		strb	r5, [r4, #81]
1360:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2424              		.loc 1 1360 0
 2425 003c B0F5004F 		cmp	r0, #32768
1347:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr  = (uint8_t *)pData;
 2426              		.loc 1 1347 0
 2427 0040 6365     		str	r3, [r4, #84]
1349:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = Size;
 2428              		.loc 1 1349 0
 2429 0042 A286     		strh	r2, [r4, #52]	@ movhi
1350:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2430              		.loc 1 1350 0
 2431 0044 E286     		strh	r2, [r4, #54]	@ movhi
1348:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = Size;
 2432              		.loc 1 1348 0
 2433 0046 2163     		str	r1, [r4, #48]
1353:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 2434              		.loc 1 1353 0
 2435 0048 A363     		str	r3, [r4, #56]
1354:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxISR       = NULL;
 2436              		.loc 1 1354 0
 2437 004a 6364     		str	r3, [r4, #68]
1355:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = 0U;
 2438              		.loc 1 1355 0
 2439 004c 2364     		str	r3, [r4, #64]
1356:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
 2440              		.loc 1 1356 0
ARM GAS  /tmp/ccMJVeMK.s 			page 109


 2441 004e A387     		strh	r3, [r4, #60]	@ movhi
1357:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2442              		.loc 1 1357 0
 2443 0050 E387     		strh	r3, [r4, #62]	@ movhi
1362:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2444              		.loc 1 1362 0
 2445 0052 2268     		ldr	r2, [r4]
 2446              	.LVL184:
1360:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2447              		.loc 1 1360 0
 2448 0054 1FD0     		beq	.L346
 2449              	.L338:
1383:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2450              		.loc 1 1383 0
 2451 0056 0023     		movs	r3, #0
1374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2452              		.loc 1 1374 0
 2453 0058 A06C     		ldr	r0, [r4, #72]
 2454 005a 114F     		ldr	r7, .L347
1383:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2455              		.loc 1 1383 0
 2456 005c 4363     		str	r3, [r0, #52]
1377:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2457              		.loc 1 1377 0
 2458 005e 114E     		ldr	r6, .L347+4
1386:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2459              		.loc 1 1386 0
 2460 0060 E38E     		ldrh	r3, [r4, #54]
1380:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2461              		.loc 1 1380 0
 2462 0062 114D     		ldr	r5, .L347+8
1386:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2463              		.loc 1 1386 0
 2464 0064 0C32     		adds	r2, r2, #12
 2465 0066 9BB2     		uxth	r3, r3
1374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2466              		.loc 1 1374 0
 2467 0068 C762     		str	r7, [r0, #44]
1377:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2468              		.loc 1 1377 0
 2469 006a 8662     		str	r6, [r0, #40]
1380:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2470              		.loc 1 1380 0
 2471 006c 0563     		str	r5, [r0, #48]
1386:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2472              		.loc 1 1386 0
 2473 006e FFF7FEFF 		bl	HAL_DMA_Start_IT
 2474              	.LVL185:
1389:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2475              		.loc 1 1389 0
 2476 0072 2368     		ldr	r3, [r4]
 2477 0074 1A68     		ldr	r2, [r3]
 2478 0076 5206     		lsls	r2, r2, #25
 2479 0078 03D4     		bmi	.L339
1392:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2480              		.loc 1 1392 0
 2481 007a 1A68     		ldr	r2, [r3]
ARM GAS  /tmp/ccMJVeMK.s 			page 110


 2482 007c 42F04002 		orr	r2, r2, #64
 2483 0080 1A60     		str	r2, [r3]
 2484              	.L339:
1396:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2485              		.loc 1 1396 0
 2486 0082 5A68     		ldr	r2, [r3, #4]
1325:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2487              		.loc 1 1325 0
 2488 0084 0020     		movs	r0, #0
1396:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2489              		.loc 1 1396 0
 2490 0086 42F02002 		orr	r2, r2, #32
 2491 008a 5A60     		str	r2, [r3, #4]
1399:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2492              		.loc 1 1399 0
 2493 008c 5A68     		ldr	r2, [r3, #4]
 2494 008e 42F00202 		orr	r2, r2, #2
 2495 0092 5A60     		str	r2, [r3, #4]
 2496 0094 C3E7     		b	.L336
 2497              	.LVL186:
 2498              	.L346:
1362:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2499              		.loc 1 1362 0
 2500 0096 1368     		ldr	r3, [r2]
 2501 0098 43F48043 		orr	r3, r3, #16384
 2502 009c 1360     		str	r3, [r2]
 2503 009e DAE7     		b	.L338
 2504              	.L348:
 2505              		.align	2
 2506              	.L347:
 2507 00a0 00000000 		.word	SPI_DMAHalfTransmitCplt
 2508 00a4 00000000 		.word	SPI_DMATransmitCplt
 2509 00a8 00000000 		.word	SPI_DMAError
 2510              		.cfi_endproc
 2511              	.LFE74:
 2513              		.section	.text.HAL_SPI_Receive_DMA,"ax",%progbits
 2514              		.align	1
 2515              		.p2align 2,,3
 2516              		.global	HAL_SPI_Receive_DMA
 2517              		.syntax unified
 2518              		.thumb
 2519              		.thumb_func
 2520              		.fpu softvfp
 2522              	HAL_SPI_Receive_DMA:
 2523              	.LFB75:
1417:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2524              		.loc 1 1417 0
 2525              		.cfi_startproc
 2526              		@ args = 0, pretend = 0, frame = 0
 2527              		@ frame_needed = 0, uses_anonymous_args = 0
 2528              	.LVL187:
 2529 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 2530              		.cfi_def_cfa_offset 24
 2531              		.cfi_offset 4, -24
 2532              		.cfi_offset 5, -20
 2533              		.cfi_offset 6, -16
 2534              		.cfi_offset 7, -12
ARM GAS  /tmp/ccMJVeMK.s 			page 111


 2535              		.cfi_offset 8, -8
 2536              		.cfi_offset 14, -4
1420:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2537              		.loc 1 1420 0
 2538 0004 8668     		ldr	r6, [r0, #8]
1417:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_StatusTypeDef errorcode = HAL_OK;
 2539              		.loc 1 1417 0
 2540 0006 0446     		mov	r4, r0
 2541 0008 0D46     		mov	r5, r1
1420:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2542              		.loc 1 1420 0
 2543 000a 1EB9     		cbnz	r6, .L350
1420:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2544              		.loc 1 1420 0 is_stmt 0 discriminator 1
 2545 000c 4368     		ldr	r3, [r0, #4]
 2546 000e B3F5827F 		cmp	r3, #260
 2547 0012 11D0     		beq	.L365
 2548              	.L350:
1428:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2549              		.loc 1 1428 0 is_stmt 1
 2550 0014 94F85030 		ldrb	r3, [r4, #80]	@ zero_extendqisi2
 2551 0018 012B     		cmp	r3, #1
 2552 001a 14D0     		beq	.L353
1428:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2553              		.loc 1 1428 0 is_stmt 0 discriminator 2
 2554 001c 0123     		movs	r3, #1
1430:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2555              		.loc 1 1430 0 is_stmt 1 discriminator 2
 2556 001e 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 2557              	.LVL188:
1428:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2558              		.loc 1 1428 0 discriminator 2
 2559 0022 84F85030 		strb	r3, [r4, #80]
1430:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2560              		.loc 1 1430 0 discriminator 2
 2561 0026 C0B2     		uxtb	r0, r0
 2562 0028 9842     		cmp	r0, r3
 2563 002a 0FD0     		beq	.L366
1432:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     goto error;
 2564              		.loc 1 1432 0
 2565 002c 0220     		movs	r0, #2
 2566              	.LVL189:
 2567              	.L354:
1499:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return errorcode;
 2568              		.loc 1 1499 0
 2569 002e 0023     		movs	r3, #0
 2570 0030 84F85030 		strb	r3, [r4, #80]
1501:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2571              		.loc 1 1501 0
 2572 0034 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2573              	.LVL190:
 2574              	.L365:
1422:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 2575              		.loc 1 1422 0
 2576 0038 0426     		movs	r6, #4
 2577              	.LBB62:
 2578              	.LBB63:
ARM GAS  /tmp/ccMJVeMK.s 			page 112


1522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2579              		.loc 1 1522 0
 2580 003a 90F85030 		ldrb	r3, [r0, #80]	@ zero_extendqisi2
 2581              	.LBE63:
 2582              	.LBE62:
1422:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      /* Call transmit-receive function to send Dummy data on Tx line and generate clock on CLK line
 2583              		.loc 1 1422 0
 2584 003e 80F85160 		strb	r6, [r0, #81]
 2585              	.LVL191:
 2586              	.LBB67:
 2587              	.LBB64:
1522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2588              		.loc 1 1522 0
 2589 0042 012B     		cmp	r3, #1
 2590 0044 39D1     		bne	.L351
 2591              	.LVL192:
 2592              	.L353:
 2593 0046 0220     		movs	r0, #2
 2594              	.LVL193:
 2595 0048 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 2596              	.LVL194:
 2597              	.L366:
 2598              	.LBE64:
 2599              	.LBE67:
1436:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2600              		.loc 1 1436 0
 2601 004c 002D     		cmp	r5, #0
 2602 004e EED0     		beq	.L354
1436:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2603              		.loc 1 1436 0 is_stmt 0 discriminator 1
 2604 0050 002A     		cmp	r2, #0
 2605 0052 ECD0     		beq	.L354
1444:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 2606              		.loc 1 1444 0 is_stmt 1
 2607 0054 0023     		movs	r3, #0
1443:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2608              		.loc 1 1443 0
 2609 0056 0421     		movs	r1, #4
 2610              	.LVL195:
1456:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2611              		.loc 1 1456 0
 2612 0058 B6F5004F 		cmp	r6, #32768
1443:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->ErrorCode   = HAL_SPI_ERROR_NONE;
 2613              		.loc 1 1443 0
 2614 005c 84F85110 		strb	r1, [r4, #81]
1445:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferSize  = Size;
 2615              		.loc 1 1445 0
 2616 0060 A563     		str	r5, [r4, #56]
1444:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr  = (uint8_t *)pData;
 2617              		.loc 1 1444 0
 2618 0062 6365     		str	r3, [r4, #84]
1446:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = Size;
 2619              		.loc 1 1446 0
 2620 0064 A287     		strh	r2, [r4, #60]	@ movhi
1447:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2621              		.loc 1 1447 0
 2622 0066 E287     		strh	r2, [r4, #62]	@ movhi
ARM GAS  /tmp/ccMJVeMK.s 			page 113


1450:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxISR       = NULL;
 2623              		.loc 1 1450 0
 2624 0068 2364     		str	r3, [r4, #64]
1451:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferSize  = 0U;
 2625              		.loc 1 1451 0
 2626 006a 6364     		str	r3, [r4, #68]
1452:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 2627              		.loc 1 1452 0
 2628 006c A386     		strh	r3, [r4, #52]	@ movhi
1453:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2629              		.loc 1 1453 0
 2630 006e E386     		strh	r3, [r4, #54]	@ movhi
1458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2631              		.loc 1 1458 0
 2632 0070 2168     		ldr	r1, [r4]
1456:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2633              		.loc 1 1456 0
 2634 0072 28D0     		beq	.L367
 2635              	.L356:
1479:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2636              		.loc 1 1479 0
 2637 0074 0023     		movs	r3, #0
1470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2638              		.loc 1 1470 0
 2639 0076 E06C     		ldr	r0, [r4, #76]
 2640 0078 DFF85CE0 		ldr	lr, .L368+8
1479:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2641              		.loc 1 1479 0
 2642 007c 4363     		str	r3, [r0, #52]
1473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2643              		.loc 1 1473 0
 2644 007e 144F     		ldr	r7, .L368
1482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2645              		.loc 1 1482 0
 2646 0080 E38F     		ldrh	r3, [r4, #62]
1476:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2647              		.loc 1 1476 0
 2648 0082 144E     		ldr	r6, .L368+4
1482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2649              		.loc 1 1482 0
 2650 0084 2A46     		mov	r2, r5
 2651              	.LVL196:
 2652 0086 9BB2     		uxth	r3, r3
 2653 0088 0C31     		adds	r1, r1, #12
1470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2654              		.loc 1 1470 0
 2655 008a C0F82CE0 		str	lr, [r0, #44]
1473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2656              		.loc 1 1473 0
 2657 008e 8762     		str	r7, [r0, #40]
1476:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2658              		.loc 1 1476 0
 2659 0090 0663     		str	r6, [r0, #48]
1482:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2660              		.loc 1 1482 0
 2661 0092 FFF7FEFF 		bl	HAL_DMA_Start_IT
 2662              	.LVL197:
ARM GAS  /tmp/ccMJVeMK.s 			page 114


1485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2663              		.loc 1 1485 0
 2664 0096 2368     		ldr	r3, [r4]
 2665 0098 1A68     		ldr	r2, [r3]
 2666 009a 5206     		lsls	r2, r2, #25
 2667 009c 03D4     		bmi	.L357
1488:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2668              		.loc 1 1488 0
 2669 009e 1A68     		ldr	r2, [r3]
 2670 00a0 42F04002 		orr	r2, r2, #64
 2671 00a4 1A60     		str	r2, [r3]
 2672              	.L357:
1492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2673              		.loc 1 1492 0
 2674 00a6 5A68     		ldr	r2, [r3, #4]
1418:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2675              		.loc 1 1418 0
 2676 00a8 0020     		movs	r0, #0
1492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2677              		.loc 1 1492 0
 2678 00aa 42F02002 		orr	r2, r2, #32
 2679 00ae 5A60     		str	r2, [r3, #4]
1495:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2680              		.loc 1 1495 0
 2681 00b0 5A68     		ldr	r2, [r3, #4]
 2682 00b2 42F00102 		orr	r2, r2, #1
 2683 00b6 5A60     		str	r2, [r3, #4]
 2684 00b8 B9E7     		b	.L354
 2685              	.LVL198:
 2686              	.L351:
 2687              	.LBB68:
 2688              	.LBB65:
 2689 00ba 1346     		mov	r3, r2
 2690              	.LBE65:
 2691              	.LBE68:
1501:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2692              		.loc 1 1501 0
 2693 00bc BDE8F041 		pop	{r4, r5, r6, r7, r8, lr}
 2694              		.cfi_remember_state
 2695              		.cfi_restore 14
 2696              		.cfi_restore 8
 2697              		.cfi_restore 7
 2698              		.cfi_restore 6
 2699              		.cfi_restore 5
 2700              		.cfi_restore 4
 2701              		.cfi_def_cfa_offset 0
 2702              	.LBB69:
 2703              	.LBB66:
 2704 00c0 0A46     		mov	r2, r1
 2705              	.LVL199:
 2706 00c2 FFF7FEBF 		b	HAL_SPI_TransmitReceive_DMA.part.3
 2707              	.LVL200:
 2708              	.L367:
 2709              		.cfi_restore_state
 2710              	.LBE66:
 2711              	.LBE69:
1458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
ARM GAS  /tmp/ccMJVeMK.s 			page 115


 2712              		.loc 1 1458 0
 2713 00c6 0B68     		ldr	r3, [r1]
 2714 00c8 23F48043 		bic	r3, r3, #16384
 2715 00cc 0B60     		str	r3, [r1]
 2716 00ce D1E7     		b	.L356
 2717              	.L369:
 2718              		.align	2
 2719              	.L368:
 2720 00d0 00000000 		.word	SPI_DMAReceiveCplt
 2721 00d4 00000000 		.word	SPI_DMAError
 2722 00d8 00000000 		.word	SPI_DMAHalfReceiveCplt
 2723              		.cfi_endproc
 2724              	.LFE75:
 2726              		.section	.text.HAL_SPI_TransmitReceive_DMA,"ax",%progbits
 2727              		.align	1
 2728              		.p2align 2,,3
 2729              		.global	HAL_SPI_TransmitReceive_DMA
 2730              		.syntax unified
 2731              		.thumb
 2732              		.thumb_func
 2733              		.fpu softvfp
 2735              	HAL_SPI_TransmitReceive_DMA:
 2736              	.LFB76:
1514:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tmp = 0U, tmp1 = 0U;
 2737              		.loc 1 1514 0
 2738              		.cfi_startproc
 2739              		@ args = 0, pretend = 0, frame = 0
 2740              		@ frame_needed = 0, uses_anonymous_args = 0
 2741              		@ link register save eliminated.
 2742              	.LVL201:
 2743 0000 10B4     		push	{r4}
 2744              		.cfi_def_cfa_offset 4
 2745              		.cfi_offset 4, -4
1522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2746              		.loc 1 1522 0
 2747 0002 90F85040 		ldrb	r4, [r0, #80]	@ zero_extendqisi2
 2748 0006 012C     		cmp	r4, #1
 2749 0008 02D0     		beq	.L371
1618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2750              		.loc 1 1618 0 discriminator 2
 2751 000a 10BC     		pop	{r4}
 2752              		.cfi_remember_state
 2753              		.cfi_restore 4
 2754              		.cfi_def_cfa_offset 0
 2755 000c FFF7FEBF 		b	HAL_SPI_TransmitReceive_DMA.part.3
 2756              	.LVL202:
 2757              	.L371:
 2758              		.cfi_restore_state
1618:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2759              		.loc 1 1618 0 is_stmt 0
 2760 0010 0220     		movs	r0, #2
 2761              	.LVL203:
 2762 0012 10BC     		pop	{r4}
 2763              		.cfi_restore 4
 2764              		.cfi_def_cfa_offset 0
 2765 0014 7047     		bx	lr
 2766              		.cfi_endproc
ARM GAS  /tmp/ccMJVeMK.s 			page 116


 2767              	.LFE76:
 2769 0016 00BF     		.section	.text.HAL_SPI_Abort,"ax",%progbits
 2770              		.align	1
 2771              		.p2align 2,,3
 2772              		.global	HAL_SPI_Abort
 2773              		.syntax unified
 2774              		.thumb
 2775              		.thumb_func
 2776              		.fpu softvfp
 2778              	HAL_SPI_Abort:
 2779              	.LFB77:
1636:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 2780              		.loc 1 1636 0 is_stmt 1
 2781              		.cfi_startproc
 2782              		@ args = 0, pretend = 0, frame = 8
 2783              		@ frame_needed = 0, uses_anonymous_args = 0
 2784              	.LVL204:
1637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2785              		.loc 1 1637 0
 2786 0000 6421     		movs	r1, #100
1636:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 2787              		.loc 1 1636 0
 2788 0002 10B5     		push	{r4, lr}
 2789              		.cfi_def_cfa_offset 8
 2790              		.cfi_offset 4, -8
 2791              		.cfi_offset 14, -4
 2792 0004 0446     		mov	r4, r0
1637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2793              		.loc 1 1637 0
 2794 0006 2D4B     		ldr	r3, .L397
 2795 0008 2D48     		ldr	r0, .L397+4
 2796              	.LVL205:
 2797 000a 1B68     		ldr	r3, [r3]
1640:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2798              		.loc 1 1640 0
 2799 000c 2268     		ldr	r2, [r4]
1637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2800              		.loc 1 1637 0
 2801 000e A0FB0303 		umull	r0, r3, r0, r3
 2802 0012 5B0A     		lsrs	r3, r3, #9
 2803 0014 01FB03F3 		mul	r3, r1, r3
1636:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 2804              		.loc 1 1636 0
 2805 0018 82B0     		sub	sp, sp, #8
 2806              		.cfi_def_cfa_offset 16
1637:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2807              		.loc 1 1637 0
 2808 001a 0093     		str	r3, [sp]
1640:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2809              		.loc 1 1640 0
 2810 001c 5168     		ldr	r1, [r2, #4]
 2811 001e 1346     		mov	r3, r2
 2812 0020 0806     		lsls	r0, r1, #24
1642:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2813              		.loc 1 1642 0
 2814 0022 44BF     		itt	mi
 2815 0024 2749     		ldrmi	r1, .L397+8
ARM GAS  /tmp/ccMJVeMK.s 			page 117


 2816 0026 6164     		strmi	r1, [r4, #68]
1645:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2817              		.loc 1 1645 0
 2818 0028 5168     		ldr	r1, [r2, #4]
 2819 002a 4906     		lsls	r1, r1, #25
1647:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 2820              		.loc 1 1647 0
 2821 002c 44BF     		itt	mi
 2822 002e 2649     		ldrmi	r1, .L397+12
 2823 0030 2164     		strmi	r1, [r4, #64]
1651:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2824              		.loc 1 1651 0
 2825 0032 5168     		ldr	r1, [r2, #4]
 2826 0034 21F02001 		bic	r1, r1, #32
 2827 0038 5160     		str	r1, [r2, #4]
1654:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2828              		.loc 1 1654 0
 2829 003a 5168     		ldr	r1, [r2, #4]
 2830 003c 8807     		lsls	r0, r1, #30
 2831 003e 02D4     		bmi	.L376
1654:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 2832              		.loc 1 1654 0 is_stmt 0 discriminator 1
 2833 0040 5168     		ldr	r1, [r2, #4]
 2834 0042 C907     		lsls	r1, r1, #31
 2835 0044 28D5     		bpl	.L377
 2836              	.L376:
1657:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 2837              		.loc 1 1657 0 is_stmt 1
 2838 0046 A36C     		ldr	r3, [r4, #72]
 2839 0048 B3B1     		cbz	r3, .L379
1661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
 2840              		.loc 1 1661 0
 2841 004a 0022     		movs	r2, #0
1664:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2842              		.loc 1 1664 0
 2843 004c 1846     		mov	r0, r3
1661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
 2844              		.loc 1 1661 0
 2845 004e 5A63     		str	r2, [r3, #52]
1664:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2846              		.loc 1 1664 0
 2847 0050 FFF7FEFF 		bl	HAL_DMA_Abort
 2848              	.LVL206:
1667:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2849              		.loc 1 1667 0
 2850 0054 2268     		ldr	r2, [r4]
 2851 0056 5368     		ldr	r3, [r2, #4]
 2852 0058 23F00203 		bic	r3, r3, #2
 2853 005c 5360     		str	r3, [r2, #4]
 2854 005e 02E0     		b	.L381
 2855              	.L380:
1678:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 2856              		.loc 1 1678 0
 2857 0060 9368     		ldr	r3, [r2, #8]
 2858 0062 9B07     		lsls	r3, r3, #30
 2859 0064 08D4     		bmi	.L379
 2860              	.L381:
ARM GAS  /tmp/ccMJVeMK.s 			page 118


1672:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 2861              		.loc 1 1672 0
 2862 0066 009B     		ldr	r3, [sp]
 2863 0068 591E     		subs	r1, r3, #1
 2864 006a 0091     		str	r1, [sp]
 2865 006c 002B     		cmp	r3, #0
 2866 006e F7D1     		bne	.L380
1674:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           break;
 2867              		.loc 1 1674 0
 2868 0070 636D     		ldr	r3, [r4, #84]
 2869 0072 43F02003 		orr	r3, r3, #32
 2870 0076 6365     		str	r3, [r4, #84]
 2871              	.L379:
1681:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 2872              		.loc 1 1681 0
 2873 0078 E36C     		ldr	r3, [r4, #76]
 2874 007a E3B1     		cbz	r3, .L396
1685:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
 2875              		.loc 1 1685 0
 2876 007c 0022     		movs	r2, #0
1688:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2877              		.loc 1 1688 0
 2878 007e 1846     		mov	r0, r3
1685:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
 2879              		.loc 1 1685 0
 2880 0080 5A63     		str	r2, [r3, #52]
1688:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2881              		.loc 1 1688 0
 2882 0082 FFF7FEFF 		bl	HAL_DMA_Abort
 2883              	.LVL207:
1691:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2884              		.loc 1 1691 0
 2885 0086 2368     		ldr	r3, [r4]
 2886 0088 1A68     		ldr	r2, [r3]
 2887 008a 22F04002 		bic	r2, r2, #64
 2888 008e 1A60     		str	r2, [r3]
1694:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       
 2889              		.loc 1 1694 0
 2890 0090 5A68     		ldr	r2, [r3, #4]
 2891 0092 22F00102 		bic	r2, r2, #1
 2892 0096 5A60     		str	r2, [r3, #4]
 2893              	.L377:
1699:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 2894              		.loc 1 1699 0
 2895 0098 0020     		movs	r0, #0
1709:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2896              		.loc 1 1709 0
 2897 009a 0122     		movs	r2, #1
1699:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 2898              		.loc 1 1699 0
 2899 009c E087     		strh	r0, [r4, #62]	@ movhi
1700:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2900              		.loc 1 1700 0
 2901 009e E086     		strh	r0, [r4, #54]	@ movhi
1703:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2902              		.loc 1 1703 0
 2903 00a0 6065     		str	r0, [r4, #84]
ARM GAS  /tmp/ccMJVeMK.s 			page 119


 2904              	.LBB70:
1706:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2905              		.loc 1 1706 0
 2906 00a2 0190     		str	r0, [sp, #4]
 2907 00a4 D968     		ldr	r1, [r3, #12]
 2908 00a6 0191     		str	r1, [sp, #4]
 2909 00a8 9B68     		ldr	r3, [r3, #8]
 2910 00aa 0193     		str	r3, [sp, #4]
 2911 00ac 019B     		ldr	r3, [sp, #4]
 2912              	.LBE70:
1709:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2913              		.loc 1 1709 0
 2914 00ae 84F85120 		strb	r2, [r4, #81]
1712:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2915              		.loc 1 1712 0
 2916 00b2 02B0     		add	sp, sp, #8
 2917              		.cfi_remember_state
 2918              		.cfi_def_cfa_offset 8
 2919              		@ sp needed
 2920 00b4 10BD     		pop	{r4, pc}
 2921              	.LVL208:
 2922              	.L396:
 2923              		.cfi_restore_state
 2924 00b6 1346     		mov	r3, r2
 2925 00b8 EEE7     		b	.L377
 2926              	.L398:
 2927 00ba 00BF     		.align	2
 2928              	.L397:
 2929 00bc 00000000 		.word	SystemCoreClock
 2930 00c0 F1197605 		.word	91625969
 2931 00c4 00000000 		.word	SPI_AbortTx_ISR
 2932 00c8 00000000 		.word	SPI_AbortRx_ISR
 2933              		.cfi_endproc
 2934              	.LFE77:
 2936              		.section	.text.HAL_SPI_DMAPause,"ax",%progbits
 2937              		.align	1
 2938              		.p2align 2,,3
 2939              		.global	HAL_SPI_DMAPause
 2940              		.syntax unified
 2941              		.thumb
 2942              		.thumb_func
 2943              		.fpu softvfp
 2945              	HAL_SPI_DMAPause:
 2946              	.LFB79:
1877:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 2947              		.loc 1 1877 0
 2948              		.cfi_startproc
 2949              		@ args = 0, pretend = 0, frame = 0
 2950              		@ frame_needed = 0, uses_anonymous_args = 0
 2951              		@ link register save eliminated.
 2952              	.LVL209:
1879:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2953              		.loc 1 1879 0
 2954 0000 90F85020 		ldrb	r2, [r0, #80]	@ zero_extendqisi2
 2955 0004 012A     		cmp	r2, #1
 2956 0006 0CD0     		beq	.L401
 2957 0008 0346     		mov	r3, r0
ARM GAS  /tmp/ccMJVeMK.s 			page 120


1885:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2958              		.loc 1 1885 0 discriminator 2
 2959 000a 0021     		movs	r1, #0
1877:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 2960              		.loc 1 1877 0 discriminator 2
 2961 000c 10B4     		push	{r4}
 2962              		.cfi_def_cfa_offset 4
 2963              		.cfi_offset 4, -4
1882:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2964              		.loc 1 1882 0 discriminator 2
 2965 000e 0468     		ldr	r4, [r0]
1887:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 2966              		.loc 1 1887 0 discriminator 2
 2967 0010 0846     		mov	r0, r1
 2968              	.LVL210:
1882:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2969              		.loc 1 1882 0 discriminator 2
 2970 0012 6268     		ldr	r2, [r4, #4]
 2971 0014 22F00302 		bic	r2, r2, #3
 2972 0018 6260     		str	r2, [r4, #4]
1885:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2973              		.loc 1 1885 0 discriminator 2
 2974 001a 83F85010 		strb	r1, [r3, #80]
1888:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2975              		.loc 1 1888 0 discriminator 2
 2976 001e 10BC     		pop	{r4}
 2977              		.cfi_restore 4
 2978              		.cfi_def_cfa_offset 0
 2979 0020 7047     		bx	lr
 2980              	.LVL211:
 2981              	.L401:
1879:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 2982              		.loc 1 1879 0
 2983 0022 0220     		movs	r0, #2
 2984              	.LVL212:
 2985 0024 7047     		bx	lr
 2986              		.cfi_endproc
 2987              	.LFE79:
 2989 0026 00BF     		.section	.text.HAL_SPI_DMAResume,"ax",%progbits
 2990              		.align	1
 2991              		.p2align 2,,3
 2992              		.global	HAL_SPI_DMAResume
 2993              		.syntax unified
 2994              		.thumb
 2995              		.thumb_func
 2996              		.fpu softvfp
 2998              	HAL_SPI_DMAResume:
 2999              	.LFB80:
1897:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 3000              		.loc 1 1897 0
 3001              		.cfi_startproc
 3002              		@ args = 0, pretend = 0, frame = 0
 3003              		@ frame_needed = 0, uses_anonymous_args = 0
 3004              		@ link register save eliminated.
 3005              	.LVL213:
1899:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3006              		.loc 1 1899 0
ARM GAS  /tmp/ccMJVeMK.s 			page 121


 3007 0000 90F85020 		ldrb	r2, [r0, #80]	@ zero_extendqisi2
 3008 0004 012A     		cmp	r2, #1
 3009 0006 0CD0     		beq	.L408
 3010 0008 0346     		mov	r3, r0
1905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3011              		.loc 1 1905 0 discriminator 2
 3012 000a 0021     		movs	r1, #0
1897:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Process Locked */
 3013              		.loc 1 1897 0 discriminator 2
 3014 000c 10B4     		push	{r4}
 3015              		.cfi_def_cfa_offset 4
 3016              		.cfi_offset 4, -4
1902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3017              		.loc 1 1902 0 discriminator 2
 3018 000e 0468     		ldr	r4, [r0]
1907:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 3019              		.loc 1 1907 0 discriminator 2
 3020 0010 0846     		mov	r0, r1
 3021              	.LVL214:
1902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3022              		.loc 1 1902 0 discriminator 2
 3023 0012 6268     		ldr	r2, [r4, #4]
 3024 0014 42F00302 		orr	r2, r2, #3
 3025 0018 6260     		str	r2, [r4, #4]
1905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3026              		.loc 1 1905 0 discriminator 2
 3027 001a 83F85010 		strb	r1, [r3, #80]
1908:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3028              		.loc 1 1908 0 discriminator 2
 3029 001e 10BC     		pop	{r4}
 3030              		.cfi_restore 4
 3031              		.cfi_def_cfa_offset 0
 3032 0020 7047     		bx	lr
 3033              	.LVL215:
 3034              	.L408:
1899:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3035              		.loc 1 1899 0
 3036 0022 0220     		movs	r0, #2
 3037              	.LVL216:
 3038 0024 7047     		bx	lr
 3039              		.cfi_endproc
 3040              	.LFE80:
 3042 0026 00BF     		.section	.text.HAL_SPI_DMAStop,"ax",%progbits
 3043              		.align	1
 3044              		.p2align 2,,3
 3045              		.global	HAL_SPI_DMAStop
 3046              		.syntax unified
 3047              		.thumb
 3048              		.thumb_func
 3049              		.fpu softvfp
 3051              	HAL_SPI_DMAStop:
 3052              	.LFB81:
1917:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* The Lock is not implemented on this API to allow the user application
 3053              		.loc 1 1917 0
 3054              		.cfi_startproc
 3055              		@ args = 0, pretend = 0, frame = 0
 3056              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /tmp/ccMJVeMK.s 			page 122


 3057              	.LVL217:
 3058 0000 10B5     		push	{r4, lr}
 3059              		.cfi_def_cfa_offset 8
 3060              		.cfi_offset 4, -8
 3061              		.cfi_offset 14, -4
1917:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* The Lock is not implemented on this API to allow the user application
 3062              		.loc 1 1917 0
 3063 0002 0446     		mov	r4, r0
1925:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3064              		.loc 1 1925 0
 3065 0004 806C     		ldr	r0, [r0, #72]
 3066              	.LVL218:
 3067 0006 08B1     		cbz	r0, .L414
1927:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3068              		.loc 1 1927 0
 3069 0008 FFF7FEFF 		bl	HAL_DMA_Abort
 3070              	.LVL219:
 3071              	.L414:
1930:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3072              		.loc 1 1930 0
 3073 000c E06C     		ldr	r0, [r4, #76]
 3074 000e 08B1     		cbz	r0, .L415
1932:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3075              		.loc 1 1932 0
 3076 0010 FFF7FEFF 		bl	HAL_DMA_Abort
 3077              	.LVL220:
 3078              	.L415:
1937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
 3079              		.loc 1 1937 0
 3080 0014 0121     		movs	r1, #1
1936:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 3081              		.loc 1 1936 0
 3082 0016 2268     		ldr	r2, [r4]
1939:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3083              		.loc 1 1939 0
 3084 0018 0020     		movs	r0, #0
1936:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 3085              		.loc 1 1936 0
 3086 001a 5368     		ldr	r3, [r2, #4]
 3087 001c 23F00303 		bic	r3, r3, #3
 3088 0020 5360     		str	r3, [r2, #4]
1937:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return HAL_OK;
 3089              		.loc 1 1937 0
 3090 0022 84F85110 		strb	r1, [r4, #81]
1939:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3091              		.loc 1 1939 0
 3092 0026 10BD     		pop	{r4, pc}
 3093              		.cfi_endproc
 3094              	.LFE81:
 3096              		.section	.text.HAL_SPI_TxCpltCallback,"ax",%progbits
 3097              		.align	1
 3098              		.p2align 2,,3
 3099              		.weak	HAL_SPI_TxCpltCallback
 3100              		.syntax unified
 3101              		.thumb
 3102              		.thumb_func
 3103              		.fpu softvfp
ARM GAS  /tmp/ccMJVeMK.s 			page 123


 3105              	HAL_SPI_TxCpltCallback:
 3106              	.LFB138:
 3107              		.cfi_startproc
 3108              		@ args = 0, pretend = 0, frame = 0
 3109              		@ frame_needed = 0, uses_anonymous_args = 0
 3110              		@ link register save eliminated.
 3111 0000 7047     		bx	lr
 3112              		.cfi_endproc
 3113              	.LFE138:
 3115 0002 00BF     		.section	.text.HAL_SPI_RxCpltCallback,"ax",%progbits
 3116              		.align	1
 3117              		.p2align 2,,3
 3118              		.weak	HAL_SPI_RxCpltCallback
 3119              		.syntax unified
 3120              		.thumb
 3121              		.thumb_func
 3122              		.fpu softvfp
 3124              	HAL_SPI_RxCpltCallback:
 3125              	.LFB136:
 3126              		.cfi_startproc
 3127              		@ args = 0, pretend = 0, frame = 0
 3128              		@ frame_needed = 0, uses_anonymous_args = 0
 3129              		@ link register save eliminated.
 3130 0000 7047     		bx	lr
 3131              		.cfi_endproc
 3132              	.LFE136:
 3134 0002 00BF     		.section	.text.HAL_SPI_TxRxCpltCallback,"ax",%progbits
 3135              		.align	1
 3136              		.p2align 2,,3
 3137              		.weak	HAL_SPI_TxRxCpltCallback
 3138              		.syntax unified
 3139              		.thumb
 3140              		.thumb_func
 3141              		.fpu softvfp
 3143              	HAL_SPI_TxRxCpltCallback:
 3144              	.LFB134:
 3145              		.cfi_startproc
 3146              		@ args = 0, pretend = 0, frame = 0
 3147              		@ frame_needed = 0, uses_anonymous_args = 0
 3148              		@ link register save eliminated.
 3149 0000 7047     		bx	lr
 3150              		.cfi_endproc
 3151              	.LFE134:
 3153 0002 00BF     		.section	.text.HAL_SPI_TxHalfCpltCallback,"ax",%progbits
 3154              		.align	1
 3155              		.p2align 2,,3
 3156              		.weak	HAL_SPI_TxHalfCpltCallback
 3157              		.syntax unified
 3158              		.thumb
 3159              		.thumb_func
 3160              		.fpu softvfp
 3162              	HAL_SPI_TxHalfCpltCallback:
 3163              	.LFB132:
 3164              		.cfi_startproc
 3165              		@ args = 0, pretend = 0, frame = 0
 3166              		@ frame_needed = 0, uses_anonymous_args = 0
 3167              		@ link register save eliminated.
ARM GAS  /tmp/ccMJVeMK.s 			page 124


 3168 0000 7047     		bx	lr
 3169              		.cfi_endproc
 3170              	.LFE132:
 3172 0002 00BF     		.section	.text.SPI_DMAHalfTransmitCplt,"ax",%progbits
 3173              		.align	1
 3174              		.p2align 2,,3
 3175              		.syntax unified
 3176              		.thumb
 3177              		.thumb_func
 3178              		.fpu softvfp
 3180              	SPI_DMAHalfTransmitCplt:
 3181              	.LFB96:
2411:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 3182              		.loc 1 2411 0
 3183              		.cfi_startproc
 3184              		@ args = 0, pretend = 0, frame = 0
 3185              		@ frame_needed = 0, uses_anonymous_args = 0
 3186              	.LVL221:
2411:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 3187              		.loc 1 2411 0
 3188 0000 08B5     		push	{r3, lr}
 3189              		.cfi_def_cfa_offset 8
 3190              		.cfi_offset 3, -8
 3191              		.cfi_offset 14, -4
2414:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 3192              		.loc 1 2414 0
 3193 0002 406A     		ldr	r0, [r0, #36]
 3194              	.LVL222:
 3195 0004 FFF7FEFF 		bl	HAL_SPI_TxHalfCpltCallback
 3196              	.LVL223:
 3197 0008 08BD     		pop	{r3, pc}
 3198              		.cfi_endproc
 3199              	.LFE96:
 3201 000a 00BF     		.section	.text.HAL_SPI_RxHalfCpltCallback,"ax",%progbits
 3202              		.align	1
 3203              		.p2align 2,,3
 3204              		.weak	HAL_SPI_RxHalfCpltCallback
 3205              		.syntax unified
 3206              		.thumb
 3207              		.thumb_func
 3208              		.fpu softvfp
 3210              	HAL_SPI_RxHalfCpltCallback:
 3211              	.LFB130:
 3212              		.cfi_startproc
 3213              		@ args = 0, pretend = 0, frame = 0
 3214              		@ frame_needed = 0, uses_anonymous_args = 0
 3215              		@ link register save eliminated.
 3216 0000 7047     		bx	lr
 3217              		.cfi_endproc
 3218              	.LFE130:
 3220 0002 00BF     		.section	.text.SPI_DMAHalfReceiveCplt,"ax",%progbits
 3221              		.align	1
 3222              		.p2align 2,,3
 3223              		.syntax unified
 3224              		.thumb
 3225              		.thumb_func
 3226              		.fpu softvfp
ARM GAS  /tmp/ccMJVeMK.s 			page 125


 3228              	SPI_DMAHalfReceiveCplt:
 3229              	.LFB97:
2424:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 3230              		.loc 1 2424 0
 3231              		.cfi_startproc
 3232              		@ args = 0, pretend = 0, frame = 0
 3233              		@ frame_needed = 0, uses_anonymous_args = 0
 3234              	.LVL224:
2424:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 3235              		.loc 1 2424 0
 3236 0000 08B5     		push	{r3, lr}
 3237              		.cfi_def_cfa_offset 8
 3238              		.cfi_offset 3, -8
 3239              		.cfi_offset 14, -4
2427:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 3240              		.loc 1 2427 0
 3241 0002 406A     		ldr	r0, [r0, #36]
 3242              	.LVL225:
 3243 0004 FFF7FEFF 		bl	HAL_SPI_RxHalfCpltCallback
 3244              	.LVL226:
 3245 0008 08BD     		pop	{r3, pc}
 3246              		.cfi_endproc
 3247              	.LFE97:
 3249 000a 00BF     		.section	.text.HAL_SPI_TxRxHalfCpltCallback,"ax",%progbits
 3250              		.align	1
 3251              		.p2align 2,,3
 3252              		.weak	HAL_SPI_TxRxHalfCpltCallback
 3253              		.syntax unified
 3254              		.thumb
 3255              		.thumb_func
 3256              		.fpu softvfp
 3258              	HAL_SPI_TxRxHalfCpltCallback:
 3259              	.LFB128:
 3260              		.cfi_startproc
 3261              		@ args = 0, pretend = 0, frame = 0
 3262              		@ frame_needed = 0, uses_anonymous_args = 0
 3263              		@ link register save eliminated.
 3264 0000 7047     		bx	lr
 3265              		.cfi_endproc
 3266              	.LFE128:
 3268 0002 00BF     		.section	.text.SPI_DMAHalfTransmitReceiveCplt,"ax",%progbits
 3269              		.align	1
 3270              		.p2align 2,,3
 3271              		.syntax unified
 3272              		.thumb
 3273              		.thumb_func
 3274              		.fpu softvfp
 3276              	SPI_DMAHalfTransmitReceiveCplt:
 3277              	.LFB98:
2437:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 3278              		.loc 1 2437 0
 3279              		.cfi_startproc
 3280              		@ args = 0, pretend = 0, frame = 0
 3281              		@ frame_needed = 0, uses_anonymous_args = 0
 3282              	.LVL227:
2437:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 3283              		.loc 1 2437 0
ARM GAS  /tmp/ccMJVeMK.s 			page 126


 3284 0000 08B5     		push	{r3, lr}
 3285              		.cfi_def_cfa_offset 8
 3286              		.cfi_offset 3, -8
 3287              		.cfi_offset 14, -4
2440:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 3288              		.loc 1 2440 0
 3289 0002 406A     		ldr	r0, [r0, #36]
 3290              	.LVL228:
 3291 0004 FFF7FEFF 		bl	HAL_SPI_TxRxHalfCpltCallback
 3292              	.LVL229:
 3293 0008 08BD     		pop	{r3, pc}
 3294              		.cfi_endproc
 3295              	.LFE98:
 3297 000a 00BF     		.section	.text.HAL_SPI_ErrorCallback,"ax",%progbits
 3298              		.align	1
 3299              		.p2align 2,,3
 3300              		.weak	HAL_SPI_ErrorCallback
 3301              		.syntax unified
 3302              		.thumb
 3303              		.thumb_func
 3304              		.fpu softvfp
 3306              	HAL_SPI_ErrorCallback:
 3307              	.LFB126:
 3308              		.cfi_startproc
 3309              		@ args = 0, pretend = 0, frame = 0
 3310              		@ frame_needed = 0, uses_anonymous_args = 0
 3311              		@ link register save eliminated.
 3312 0000 7047     		bx	lr
 3313              		.cfi_endproc
 3314              	.LFE126:
 3316 0002 00BF     		.section	.text.SPI_CloseTx_ISR,"ax",%progbits
 3317              		.align	1
 3318              		.p2align 2,,3
 3319              		.syntax unified
 3320              		.thumb
 3321              		.thumb_func
 3322              		.fpu softvfp
 3324              	SPI_CloseTx_ISR:
 3325              	.LFB115:
3141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 3326              		.loc 1 3141 0
 3327              		.cfi_startproc
 3328              		@ args = 0, pretend = 0, frame = 8
 3329              		@ frame_needed = 0, uses_anonymous_args = 0
 3330              	.LVL230:
3143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3331              		.loc 1 3143 0
 3332 0000 6422     		movs	r2, #100
3141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 3333              		.loc 1 3141 0
 3334 0002 10B5     		push	{r4, lr}
 3335              		.cfi_def_cfa_offset 8
 3336              		.cfi_offset 4, -8
 3337              		.cfi_offset 14, -4
 3338 0004 0446     		mov	r4, r0
3143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3339              		.loc 1 3143 0
ARM GAS  /tmp/ccMJVeMK.s 			page 127


 3340 0006 224B     		ldr	r3, .L451
 3341 0008 2249     		ldr	r1, .L451+4
 3342 000a 1B68     		ldr	r3, [r3]
3141:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 3343              		.loc 1 3141 0
 3344 000c 84B0     		sub	sp, sp, #16
 3345              		.cfi_def_cfa_offset 24
3143:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3346              		.loc 1 3143 0
 3347 000e A1FB0313 		umull	r1, r3, r1, r3
 3348 0012 5B0A     		lsrs	r3, r3, #9
 3349 0014 02FB03F3 		mul	r3, r2, r3
 3350 0018 0293     		str	r3, [sp, #8]
3146:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3351              		.loc 1 3146 0
 3352 001a FFF7FEFF 		bl	HAL_GetTick
 3353              	.LVL231:
 3354 001e 2168     		ldr	r1, [r4]
 3355 0020 02E0     		b	.L439
 3356              	.L437:
3157:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3357              		.loc 1 3157 0
 3358 0022 8B68     		ldr	r3, [r1, #8]
 3359 0024 9B07     		lsls	r3, r3, #30
 3360 0026 08D4     		bmi	.L438
 3361              	.L439:
3151:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3362              		.loc 1 3151 0
 3363 0028 029B     		ldr	r3, [sp, #8]
 3364 002a 5A1E     		subs	r2, r3, #1
 3365 002c 0292     		str	r2, [sp, #8]
 3366 002e 002B     		cmp	r3, #0
 3367 0030 F7D1     		bne	.L437
3153:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
 3368              		.loc 1 3153 0
 3369 0032 636D     		ldr	r3, [r4, #84]
 3370 0034 43F02003 		orr	r3, r3, #32
 3371 0038 6365     		str	r3, [r4, #84]
 3372              	.L438:
3160:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3373              		.loc 1 3160 0
 3374 003a 4A68     		ldr	r2, [r1, #4]
 3375              	.LBB71:
 3376              	.LBB72:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3377              		.loc 1 2981 0
 3378 003c 6423     		movs	r3, #100
 3379              	.LBE72:
 3380              	.LBE71:
3160:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3381              		.loc 1 3160 0
 3382 003e 22F0A002 		bic	r2, r2, #160
 3383 0042 4A60     		str	r2, [r1, #4]
 3384              	.LVL232:
 3385              	.LBB74:
 3386              	.LBB73:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
ARM GAS  /tmp/ccMJVeMK.s 			page 128


 3387              		.loc 1 2981 0
 3388 0044 0090     		str	r0, [sp]
 3389 0046 0022     		movs	r2, #0
 3390 0048 8021     		movs	r1, #128
 3391 004a 2046     		mov	r0, r4
 3392              	.LVL233:
 3393 004c FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 3394              	.LVL234:
 3395 0050 38B1     		cbz	r0, .L440
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 3396              		.loc 1 2983 0
 3397 0052 636D     		ldr	r3, [r4, #84]
 3398 0054 43F02003 		orr	r3, r3, #32
 3399 0058 6365     		str	r3, [r4, #84]
 3400              	.LVL235:
 3401              	.LBE73:
 3402              	.LBE74:
3165:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3403              		.loc 1 3165 0
 3404 005a 636D     		ldr	r3, [r4, #84]
 3405 005c 43F02003 		orr	r3, r3, #32
 3406 0060 6365     		str	r3, [r4, #84]
 3407              	.L440:
3169:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3408              		.loc 1 3169 0
 3409 0062 A368     		ldr	r3, [r4, #8]
 3410 0064 33B9     		cbnz	r3, .L441
 3411              	.LBB75:
3171:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3412              		.loc 1 3171 0
 3413 0066 2268     		ldr	r2, [r4]
 3414 0068 0393     		str	r3, [sp, #12]
 3415 006a D368     		ldr	r3, [r2, #12]
 3416 006c 0393     		str	r3, [sp, #12]
 3417 006e 9368     		ldr	r3, [r2, #8]
 3418 0070 0393     		str	r3, [sp, #12]
 3419 0072 039B     		ldr	r3, [sp, #12]
 3420              	.L441:
 3421              	.LBE75:
3174:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   if(hspi->ErrorCode != HAL_SPI_ERROR_NONE)
 3422              		.loc 1 3174 0
 3423 0074 0123     		movs	r3, #1
 3424 0076 84F85130 		strb	r3, [r4, #81]
3175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3425              		.loc 1 3175 0
 3426 007a 636D     		ldr	r3, [r4, #84]
3177:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3427              		.loc 1 3177 0
 3428 007c 2046     		mov	r0, r4
3175:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3429              		.loc 1 3175 0
 3430 007e 1BB9     		cbnz	r3, .L450
 3431              	.LVL236:
3181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3432              		.loc 1 3181 0
 3433 0080 FFF7FEFF 		bl	HAL_SPI_TxCpltCallback
 3434              	.LVL237:
ARM GAS  /tmp/ccMJVeMK.s 			page 129


3183:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3435              		.loc 1 3183 0
 3436 0084 04B0     		add	sp, sp, #16
 3437              		.cfi_remember_state
 3438              		.cfi_def_cfa_offset 8
 3439              		@ sp needed
 3440 0086 10BD     		pop	{r4, pc}
 3441              	.LVL238:
 3442              	.L450:
 3443              		.cfi_restore_state
3177:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3444              		.loc 1 3177 0
 3445 0088 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 3446              	.LVL239:
3183:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3447              		.loc 1 3183 0
 3448 008c 04B0     		add	sp, sp, #16
 3449              		.cfi_def_cfa_offset 8
 3450              		@ sp needed
 3451 008e 10BD     		pop	{r4, pc}
 3452              	.LVL240:
 3453              	.L452:
 3454              		.align	2
 3455              	.L451:
 3456 0090 00000000 		.word	SystemCoreClock
 3457 0094 F1197605 		.word	91625969
 3458              		.cfi_endproc
 3459              	.LFE115:
 3461              		.section	.text.SPI_TxISR_8BIT,"ax",%progbits
 3462              		.align	1
 3463              		.p2align 2,,3
 3464              		.syntax unified
 3465              		.thumb
 3466              		.thumb_func
 3467              		.fpu softvfp
 3469              	SPI_TxISR_8BIT:
 3470              	.LFB109:
2878:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
 3471              		.loc 1 2878 0
 3472              		.cfi_startproc
 3473              		@ args = 0, pretend = 0, frame = 0
 3474              		@ frame_needed = 0, uses_anonymous_args = 0
 3475              		@ link register save eliminated.
 3476              	.LVL241:
 3477 0000 10B4     		push	{r4}
 3478              		.cfi_def_cfa_offset 4
 3479              		.cfi_offset 4, -4
2879:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
 3480              		.loc 1 2879 0
 3481 0002 026B     		ldr	r2, [r0, #48]
 3482 0004 0168     		ldr	r1, [r0]
 3483 0006 541C     		adds	r4, r2, #1
 3484 0008 0463     		str	r4, [r0, #48]
 3485 000a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3486 000c 0A73     		strb	r2, [r1, #12]
2880:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3487              		.loc 1 2880 0
ARM GAS  /tmp/ccMJVeMK.s 			page 130


 3488 000e C28E     		ldrh	r2, [r0, #54]
 3489 0010 013A     		subs	r2, r2, #1
 3490 0012 92B2     		uxth	r2, r2
 3491 0014 C286     		strh	r2, [r0, #54]	@ movhi
2882:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3492              		.loc 1 2882 0
 3493 0016 C38E     		ldrh	r3, [r0, #54]
 3494 0018 9BB2     		uxth	r3, r3
 3495 001a 0BB1     		cbz	r3, .L456
2893:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3496              		.loc 1 2893 0
 3497 001c 10BC     		pop	{r4}
 3498              		.cfi_remember_state
 3499              		.cfi_restore 4
 3500              		.cfi_def_cfa_offset 0
 3501 001e 7047     		bx	lr
 3502              	.L456:
 3503              		.cfi_restore_state
 3504 0020 10BC     		pop	{r4}
 3505              		.cfi_restore 4
 3506              		.cfi_def_cfa_offset 0
2891:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3507              		.loc 1 2891 0
 3508 0022 FFF7FEBF 		b	SPI_CloseTx_ISR
 3509              	.LVL242:
 3510              		.cfi_endproc
 3511              	.LFE109:
 3513 0026 00BF     		.section	.text.SPI_TxISR_16BIT,"ax",%progbits
 3514              		.align	1
 3515              		.p2align 2,,3
 3516              		.syntax unified
 3517              		.thumb
 3518              		.thumb_func
 3519              		.fpu softvfp
 3521              	SPI_TxISR_16BIT:
 3522              	.LFB110:
2902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 3523              		.loc 1 2902 0
 3524              		.cfi_startproc
 3525              		@ args = 0, pretend = 0, frame = 0
 3526              		@ frame_needed = 0, uses_anonymous_args = 0
 3527              		@ link register save eliminated.
 3528              	.LVL243:
2904:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
 3529              		.loc 1 2904 0
 3530 0000 016B     		ldr	r1, [r0, #48]
2902:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 3531              		.loc 1 2902 0
 3532 0002 10B4     		push	{r4}
 3533              		.cfi_def_cfa_offset 4
 3534              		.cfi_offset 4, -4
2904:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
 3535              		.loc 1 2904 0
 3536 0004 0268     		ldr	r2, [r0]
 3537 0006 31F8024B 		ldrh	r4, [r1], #2
 3538 000a D460     		str	r4, [r2, #12]
2906:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 131


 3539              		.loc 1 2906 0
 3540 000c C28E     		ldrh	r2, [r0, #54]
2905:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
 3541              		.loc 1 2905 0
 3542 000e 0163     		str	r1, [r0, #48]
2906:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3543              		.loc 1 2906 0
 3544 0010 013A     		subs	r2, r2, #1
 3545 0012 92B2     		uxth	r2, r2
 3546 0014 C286     		strh	r2, [r0, #54]	@ movhi
2908:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3547              		.loc 1 2908 0
 3548 0016 C38E     		ldrh	r3, [r0, #54]
 3549 0018 9BB2     		uxth	r3, r3
 3550 001a 0BB1     		cbz	r3, .L460
2919:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3551              		.loc 1 2919 0
 3552 001c 10BC     		pop	{r4}
 3553              		.cfi_remember_state
 3554              		.cfi_restore 4
 3555              		.cfi_def_cfa_offset 0
 3556 001e 7047     		bx	lr
 3557              	.L460:
 3558              		.cfi_restore_state
 3559 0020 10BC     		pop	{r4}
 3560              		.cfi_restore 4
 3561              		.cfi_def_cfa_offset 0
2917:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3562              		.loc 1 2917 0
 3563 0022 FFF7FEBF 		b	SPI_CloseTx_ISR
 3564              	.LVL244:
 3565              		.cfi_endproc
 3566              	.LFE110:
 3568 0026 00BF     		.section	.text.SPI_CloseRx_ISR,"ax",%progbits
 3569              		.align	1
 3570              		.p2align 2,,3
 3571              		.syntax unified
 3572              		.thumb
 3573              		.thumb_func
 3574              		.fpu softvfp
 3576              	SPI_CloseRx_ISR:
 3577              	.LFB114:
3081:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable RXNE and ERR interrupt */
 3578              		.loc 1 3081 0
 3579              		.cfi_startproc
 3580              		@ args = 0, pretend = 0, frame = 8
 3581              		@ frame_needed = 0, uses_anonymous_args = 0
 3582              	.LVL245:
 3583 0000 00B5     		push	{lr}
 3584              		.cfi_def_cfa_offset 4
 3585              		.cfi_offset 14, -4
3083:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3586              		.loc 1 3083 0
 3587 0002 0368     		ldr	r3, [r0]
3086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3588              		.loc 1 3086 0
 3589 0004 4168     		ldr	r1, [r0, #4]
ARM GAS  /tmp/ccMJVeMK.s 			page 132


3083:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3590              		.loc 1 3083 0
 3591 0006 5A68     		ldr	r2, [r3, #4]
3086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3592              		.loc 1 3086 0
 3593 0008 B1F5827F 		cmp	r1, #260
3083:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3594              		.loc 1 3083 0
 3595 000c 22F06002 		bic	r2, r2, #96
 3596 0010 5A60     		str	r2, [r3, #4]
3081:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     /* Disable RXNE and ERR interrupt */
 3597              		.loc 1 3081 0
 3598 0012 83B0     		sub	sp, sp, #12
 3599              		.cfi_def_cfa_offset 16
3086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3600              		.loc 1 3086 0
 3601 0014 8268     		ldr	r2, [r0, #8]
 3602 0016 10D0     		beq	.L472
 3603              	.L463:
3093:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3604              		.loc 1 3093 0
 3605 0018 2AB9     		cbnz	r2, .L465
 3606              	.LBB76:
3095:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 3607              		.loc 1 3095 0
 3608 001a 0192     		str	r2, [sp, #4]
 3609 001c DA68     		ldr	r2, [r3, #12]
 3610 001e 0192     		str	r2, [sp, #4]
 3611 0020 9B68     		ldr	r3, [r3, #8]
 3612 0022 0193     		str	r3, [sp, #4]
 3613 0024 019B     		ldr	r3, [sp, #4]
 3614              	.L465:
 3615              	.LBE76:
3097:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3616              		.loc 1 3097 0
 3617 0026 0123     		movs	r3, #1
 3618 0028 80F85130 		strb	r3, [r0, #81]
3121:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 3619              		.loc 1 3121 0
 3620 002c 436D     		ldr	r3, [r0, #84]
 3621 002e 7BB1     		cbz	r3, .L473
3127:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 3622              		.loc 1 3127 0
 3623 0030 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 3624              	.LVL246:
3132:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3625              		.loc 1 3132 0
 3626 0034 03B0     		add	sp, sp, #12
 3627              		.cfi_remember_state
 3628              		.cfi_def_cfa_offset 4
 3629              		@ sp needed
 3630 0036 5DF804FB 		ldr	pc, [sp], #4
 3631              	.LVL247:
 3632              	.L472:
 3633              		.cfi_restore_state
3086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3634              		.loc 1 3086 0 discriminator 1
ARM GAS  /tmp/ccMJVeMK.s 			page 133


 3635 003a B2F5004F 		cmp	r2, #32768
 3636 003e 02D0     		beq	.L464
3086:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3637              		.loc 1 3086 0 is_stmt 0 discriminator 2
 3638 0040 B2F5806F 		cmp	r2, #1024
 3639 0044 E8D1     		bne	.L463
 3640              	.L464:
3089:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 3641              		.loc 1 3089 0 is_stmt 1
 3642 0046 1968     		ldr	r1, [r3]
 3643 0048 21F04001 		bic	r1, r1, #64
 3644 004c 1960     		str	r1, [r3]
 3645 004e E3E7     		b	.L463
 3646              	.L473:
3123:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 3647              		.loc 1 3123 0
 3648 0050 FFF7FEFF 		bl	HAL_SPI_RxCpltCallback
 3649              	.LVL248:
3132:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3650              		.loc 1 3132 0
 3651 0054 03B0     		add	sp, sp, #12
 3652              		.cfi_def_cfa_offset 4
 3653              		@ sp needed
 3654 0056 5DF804FB 		ldr	pc, [sp], #4
 3655              		.cfi_endproc
 3656              	.LFE114:
 3658              		.section	.text.SPI_RxISR_8BIT,"ax",%progbits
 3659              		.align	1
 3660              		.p2align 2,,3
 3661              		.syntax unified
 3662              		.thumb
 3663              		.thumb_func
 3664              		.fpu softvfp
 3666              	SPI_RxISR_8BIT:
 3667              	.LFB107:
2789:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *hspi->pRxBuffPtr++ = (*(__IO uint8_t *)&hspi->Instance->DR);
 3668              		.loc 1 2789 0
 3669              		.cfi_startproc
 3670              		@ args = 0, pretend = 0, frame = 0
 3671              		@ frame_needed = 0, uses_anonymous_args = 0
 3672              		@ link register save eliminated.
 3673              	.LVL249:
 3674 0000 10B4     		push	{r4}
 3675              		.cfi_def_cfa_offset 4
 3676              		.cfi_offset 4, -4
2790:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
 3677              		.loc 1 2790 0
 3678 0002 826B     		ldr	r2, [r0, #56]
 3679 0004 0168     		ldr	r1, [r0]
 3680 0006 541C     		adds	r4, r2, #1
 3681 0008 8463     		str	r4, [r0, #56]
 3682 000a 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
 3683 000c 1170     		strb	r1, [r2]
2791:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3684              		.loc 1 2791 0
 3685 000e C28F     		ldrh	r2, [r0, #62]
 3686 0010 013A     		subs	r2, r2, #1
ARM GAS  /tmp/ccMJVeMK.s 			page 134


 3687 0012 92B2     		uxth	r2, r2
 3688 0014 C287     		strh	r2, [r0, #62]	@ movhi
2801:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3689              		.loc 1 2801 0
 3690 0016 C38F     		ldrh	r3, [r0, #62]
 3691 0018 9BB2     		uxth	r3, r3
 3692 001a 0BB1     		cbz	r3, .L477
2812:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3693              		.loc 1 2812 0
 3694 001c 10BC     		pop	{r4}
 3695              		.cfi_remember_state
 3696              		.cfi_restore 4
 3697              		.cfi_def_cfa_offset 0
 3698 001e 7047     		bx	lr
 3699              	.L477:
 3700              		.cfi_restore_state
 3701 0020 10BC     		pop	{r4}
 3702              		.cfi_restore 4
 3703              		.cfi_def_cfa_offset 0
2810:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3704              		.loc 1 2810 0
 3705 0022 FFF7FEBF 		b	SPI_CloseRx_ISR
 3706              	.LVL250:
 3707              		.cfi_endproc
 3708              	.LFE107:
 3710 0026 00BF     		.section	.text.SPI_RxISR_16BIT,"ax",%progbits
 3711              		.align	1
 3712              		.p2align 2,,3
 3713              		.syntax unified
 3714              		.thumb
 3715              		.thumb_func
 3716              		.fpu softvfp
 3718              	SPI_RxISR_16BIT:
 3719              	.LFB108:
2845:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *((uint16_t *)hspi->pRxBuffPtr) = hspi->Instance->DR;
 3720              		.loc 1 2845 0
 3721              		.cfi_startproc
 3722              		@ args = 0, pretend = 0, frame = 0
 3723              		@ frame_needed = 0, uses_anonymous_args = 0
 3724              		@ link register save eliminated.
 3725              	.LVL251:
2846:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
 3726              		.loc 1 2846 0
 3727 0000 0268     		ldr	r2, [r0]
 3728 0002 816B     		ldr	r1, [r0, #56]
 3729 0004 D268     		ldr	r2, [r2, #12]
 3730 0006 21F8022B 		strh	r2, [r1], #2	@ movhi
2848:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3731              		.loc 1 2848 0
 3732 000a C28F     		ldrh	r2, [r0, #62]
2847:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
 3733              		.loc 1 2847 0
 3734 000c 8163     		str	r1, [r0, #56]
2848:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3735              		.loc 1 2848 0
 3736 000e 013A     		subs	r2, r2, #1
 3737 0010 92B2     		uxth	r2, r2
ARM GAS  /tmp/ccMJVeMK.s 			page 135


 3738 0012 C287     		strh	r2, [r0, #62]	@ movhi
2858:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3739              		.loc 1 2858 0
 3740 0014 C38F     		ldrh	r3, [r0, #62]
 3741 0016 9BB2     		uxth	r3, r3
 3742 0018 03B1     		cbz	r3, .L480
 3743 001a 7047     		bx	lr
 3744              	.L480:
2867:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3745              		.loc 1 2867 0
 3746 001c FFF7FEBF 		b	SPI_CloseRx_ISR
 3747              	.LVL252:
 3748              		.cfi_endproc
 3749              	.LFE108:
 3751              		.section	.text.SPI_CloseRxTx_ISR,"ax",%progbits
 3752              		.align	1
 3753              		.p2align 2,,3
 3754              		.syntax unified
 3755              		.thumb
 3756              		.thumb_func
 3757              		.fpu softvfp
 3759              	SPI_CloseRxTx_ISR:
 3760              	.LFB113:
2996:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 3761              		.loc 1 2996 0
 3762              		.cfi_startproc
 3763              		@ args = 0, pretend = 0, frame = 8
 3764              		@ frame_needed = 0, uses_anonymous_args = 0
 3765              	.LVL253:
2998:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
 3766              		.loc 1 2998 0
 3767 0000 6422     		movs	r2, #100
2996:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 3768              		.loc 1 2996 0
 3769 0002 10B5     		push	{r4, lr}
 3770              		.cfi_def_cfa_offset 8
 3771              		.cfi_offset 4, -8
 3772              		.cfi_offset 14, -4
 3773 0004 0446     		mov	r4, r0
2998:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
 3774              		.loc 1 2998 0
 3775 0006 294B     		ldr	r3, .L497
 3776 0008 2949     		ldr	r1, .L497+4
 3777 000a 1B68     		ldr	r3, [r3]
2996:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 3778              		.loc 1 2996 0
 3779 000c 84B0     		sub	sp, sp, #16
 3780              		.cfi_def_cfa_offset 24
2998:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Init tickstart for timeout managment*/
 3781              		.loc 1 2998 0
 3782 000e A1FB0313 		umull	r1, r3, r1, r3
 3783 0012 5B0A     		lsrs	r3, r3, #9
 3784 0014 02FB03F3 		mul	r3, r2, r3
 3785 0018 0293     		str	r3, [sp, #8]
3000:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3786              		.loc 1 3000 0
 3787 001a FFF7FEFF 		bl	HAL_GetTick
ARM GAS  /tmp/ccMJVeMK.s 			page 136


 3788              	.LVL254:
3003:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3789              		.loc 1 3003 0
 3790 001e 2168     		ldr	r1, [r4]
 3791 0020 4B68     		ldr	r3, [r1, #4]
 3792 0022 23F02003 		bic	r3, r3, #32
 3793 0026 4B60     		str	r3, [r1, #4]
 3794 0028 02E0     		b	.L484
 3795              	.L482:
3014:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 3796              		.loc 1 3014 0
 3797 002a 8B68     		ldr	r3, [r1, #8]
 3798 002c 9B07     		lsls	r3, r3, #30
 3799 002e 08D4     		bmi	.L483
 3800              	.L484:
3008:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3801              		.loc 1 3008 0
 3802 0030 029B     		ldr	r3, [sp, #8]
 3803 0032 5A1E     		subs	r2, r3, #1
 3804 0034 0292     		str	r2, [sp, #8]
 3805 0036 002B     		cmp	r3, #0
 3806 0038 F7D1     		bne	.L482
3010:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
 3807              		.loc 1 3010 0
 3808 003a 636D     		ldr	r3, [r4, #84]
 3809 003c 43F02003 		orr	r3, r3, #32
 3810 0040 6365     		str	r3, [r4, #84]
 3811              	.L483:
 3812              	.LVL255:
 3813              	.LBB77:
 3814              	.LBB78:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3815              		.loc 1 2981 0
 3816 0042 0090     		str	r0, [sp]
 3817 0044 6423     		movs	r3, #100
 3818 0046 0022     		movs	r2, #0
 3819 0048 8021     		movs	r1, #128
 3820 004a 2046     		mov	r0, r4
 3821              	.LVL256:
 3822 004c FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 3823              	.LVL257:
 3824 0050 38B1     		cbz	r0, .L485
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 3825              		.loc 1 2983 0
 3826 0052 636D     		ldr	r3, [r4, #84]
 3827 0054 43F02003 		orr	r3, r3, #32
 3828 0058 6365     		str	r3, [r4, #84]
 3829              	.LVL258:
 3830              	.LBE78:
 3831              	.LBE77:
3019:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3832              		.loc 1 3019 0
 3833 005a 636D     		ldr	r3, [r4, #84]
 3834 005c 43F02003 		orr	r3, r3, #32
 3835 0060 6365     		str	r3, [r4, #84]
 3836              	.L485:
3023:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
ARM GAS  /tmp/ccMJVeMK.s 			page 137


 3837              		.loc 1 3023 0
 3838 0062 A368     		ldr	r3, [r4, #8]
 3839 0064 33B9     		cbnz	r3, .L486
 3840              	.LBB79:
3025:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 3841              		.loc 1 3025 0
 3842 0066 2268     		ldr	r2, [r4]
 3843 0068 0393     		str	r3, [sp, #12]
 3844 006a D368     		ldr	r3, [r2, #12]
 3845 006c 0393     		str	r3, [sp, #12]
 3846 006e 9368     		ldr	r3, [r2, #8]
 3847 0070 0393     		str	r3, [sp, #12]
 3848 0072 039B     		ldr	r3, [sp, #12]
 3849              	.L486:
 3850              	.LBE79:
3051:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3851              		.loc 1 3051 0
 3852 0074 636D     		ldr	r3, [r4, #84]
 3853 0076 63B9     		cbnz	r3, .L487
3053:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 3854              		.loc 1 3053 0
 3855 0078 94F85130 		ldrb	r3, [r4, #81]	@ zero_extendqisi2
3056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 3856              		.loc 1 3056 0
 3857 007c 2046     		mov	r0, r4
3053:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 3858              		.loc 1 3053 0
 3859 007e 042B     		cmp	r3, #4
3055:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         HAL_SPI_RxCpltCallback(hspi);
 3860              		.loc 1 3055 0
 3861 0080 4FF00103 		mov	r3, #1
 3862 0084 84F85130 		strb	r3, [r4, #81]
3053:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 3863              		.loc 1 3053 0
 3864 0088 0BD0     		beq	.L496
 3865              	.LVL259:
3061:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 3866              		.loc 1 3061 0
 3867 008a FFF7FEFF 		bl	HAL_SPI_TxRxCpltCallback
 3868              	.LVL260:
3072:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3869              		.loc 1 3072 0
 3870 008e 04B0     		add	sp, sp, #16
 3871              		.cfi_remember_state
 3872              		.cfi_def_cfa_offset 8
 3873              		@ sp needed
 3874 0090 10BD     		pop	{r4, pc}
 3875              	.LVL261:
 3876              	.L487:
 3877              		.cfi_restore_state
3066:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
 3878              		.loc 1 3066 0
 3879 0092 0123     		movs	r3, #1
3067:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 3880              		.loc 1 3067 0
 3881 0094 2046     		mov	r0, r4
3066:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       HAL_SPI_ErrorCallback(hspi);
ARM GAS  /tmp/ccMJVeMK.s 			page 138


 3882              		.loc 1 3066 0
 3883 0096 84F85130 		strb	r3, [r4, #81]
3067:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 3884              		.loc 1 3067 0
 3885 009a FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 3886              	.LVL262:
3072:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3887              		.loc 1 3072 0
 3888 009e 04B0     		add	sp, sp, #16
 3889              		.cfi_remember_state
 3890              		.cfi_def_cfa_offset 8
 3891              		@ sp needed
 3892 00a0 10BD     		pop	{r4, pc}
 3893              	.LVL263:
 3894              	.L496:
 3895              		.cfi_restore_state
3056:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 3896              		.loc 1 3056 0
 3897 00a2 FFF7FEFF 		bl	HAL_SPI_RxCpltCallback
 3898              	.LVL264:
3072:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3899              		.loc 1 3072 0
 3900 00a6 04B0     		add	sp, sp, #16
 3901              		.cfi_def_cfa_offset 8
 3902              		@ sp needed
 3903 00a8 10BD     		pop	{r4, pc}
 3904              	.LVL265:
 3905              	.L498:
 3906 00aa 00BF     		.align	2
 3907              	.L497:
 3908 00ac 00000000 		.word	SystemCoreClock
 3909 00b0 F1197605 		.word	91625969
 3910              		.cfi_endproc
 3911              	.LFE113:
 3913              		.section	.text.SPI_2linesTxISR_8BIT,"ax",%progbits
 3914              		.align	1
 3915              		.p2align 2,,3
 3916              		.syntax unified
 3917              		.thumb
 3918              		.thumb_func
 3919              		.fpu softvfp
 3921              	SPI_2linesTxISR_8BIT:
 3922              	.LFB104:
2642:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *(__IO uint8_t *)&hspi->Instance->DR = (*hspi->pTxBuffPtr++);
 3923              		.loc 1 2642 0
 3924              		.cfi_startproc
 3925              		@ args = 0, pretend = 0, frame = 0
 3926              		@ frame_needed = 0, uses_anonymous_args = 0
 3927              		@ link register save eliminated.
 3928              	.LVL266:
 3929 0000 10B4     		push	{r4}
 3930              		.cfi_def_cfa_offset 4
 3931              		.cfi_offset 4, -4
2643:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
 3932              		.loc 1 2643 0
 3933 0002 026B     		ldr	r2, [r0, #48]
 3934 0004 0168     		ldr	r1, [r0]
ARM GAS  /tmp/ccMJVeMK.s 			page 139


 3935 0006 541C     		adds	r4, r2, #1
 3936 0008 0463     		str	r4, [r0, #48]
 3937 000a 1278     		ldrb	r2, [r2]	@ zero_extendqisi2
 3938 000c 0A73     		strb	r2, [r1, #12]
2644:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3939              		.loc 1 2644 0
 3940 000e C28E     		ldrh	r2, [r0, #54]
 3941 0010 013A     		subs	r2, r2, #1
 3942 0012 92B2     		uxth	r2, r2
 3943 0014 C286     		strh	r2, [r0, #54]	@ movhi
2647:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 3944              		.loc 1 2647 0
 3945 0016 C28E     		ldrh	r2, [r0, #54]
 3946 0018 92B2     		uxth	r2, r2
 3947 001a 3AB9     		cbnz	r2, .L499
 3948              	.LVL267:
 3949              	.LBB82:
 3950              	.LBB83:
2659:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3951              		.loc 1 2659 0
 3952 001c 0168     		ldr	r1, [r0]
 3953 001e 4A68     		ldr	r2, [r1, #4]
 3954 0020 22F08002 		bic	r2, r2, #128
 3955 0024 4A60     		str	r2, [r1, #4]
2661:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 3956              		.loc 1 2661 0
 3957 0026 C38F     		ldrh	r3, [r0, #62]
 3958 0028 9BB2     		uxth	r3, r3
 3959 002a 0BB1     		cbz	r3, .L504
 3960              	.LVL268:
 3961              	.L499:
 3962              	.LBE83:
 3963              	.LBE82:
2666:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 3964              		.loc 1 2666 0
 3965 002c 10BC     		pop	{r4}
 3966              		.cfi_remember_state
 3967              		.cfi_restore 4
 3968              		.cfi_def_cfa_offset 0
 3969 002e 7047     		bx	lr
 3970              	.LVL269:
 3971              	.L504:
 3972              		.cfi_restore_state
 3973 0030 10BC     		pop	{r4}
 3974              		.cfi_restore 4
 3975              		.cfi_def_cfa_offset 0
 3976              	.LBB85:
 3977              	.LBB84:
2663:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 3978              		.loc 1 2663 0
 3979 0032 FFF7FEBF 		b	SPI_CloseRxTx_ISR
 3980              	.LVL270:
 3981              	.LBE84:
 3982              	.LBE85:
 3983              		.cfi_endproc
 3984              	.LFE104:
 3986 0036 00BF     		.section	.text.SPI_2linesRxISR_8BIT,"ax",%progbits
ARM GAS  /tmp/ccMJVeMK.s 			page 140


 3987              		.align	1
 3988              		.p2align 2,,3
 3989              		.syntax unified
 3990              		.thumb
 3991              		.thumb_func
 3992              		.fpu softvfp
 3994              	SPI_2linesRxISR_8BIT:
 3995              	.LFB103:
2581:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Receive data in 8bit mode */
 3996              		.loc 1 2581 0
 3997              		.cfi_startproc
 3998              		@ args = 0, pretend = 0, frame = 0
 3999              		@ frame_needed = 0, uses_anonymous_args = 0
 4000              		@ link register save eliminated.
 4001              	.LVL271:
 4002 0000 10B4     		push	{r4}
 4003              		.cfi_def_cfa_offset 4
 4004              		.cfi_offset 4, -4
2583:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
 4005              		.loc 1 2583 0
 4006 0002 826B     		ldr	r2, [r0, #56]
 4007 0004 0168     		ldr	r1, [r0]
 4008 0006 541C     		adds	r4, r2, #1
 4009 0008 8463     		str	r4, [r0, #56]
 4010 000a 097B     		ldrb	r1, [r1, #12]	@ zero_extendqisi2
 4011 000c 1170     		strb	r1, [r2]
2584:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4012              		.loc 1 2584 0
 4013 000e C28F     		ldrh	r2, [r0, #62]
 4014 0010 013A     		subs	r2, r2, #1
 4015 0012 92B2     		uxth	r2, r2
 4016 0014 C287     		strh	r2, [r0, #62]	@ movhi
2587:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4017              		.loc 1 2587 0
 4018 0016 C28F     		ldrh	r2, [r0, #62]
 4019 0018 92B2     		uxth	r2, r2
 4020 001a 3AB9     		cbnz	r2, .L505
 4021              	.LVL272:
 4022              	.LBB88:
 4023              	.LBB89:
2598:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4024              		.loc 1 2598 0
 4025 001c 0168     		ldr	r1, [r0]
 4026 001e 4A68     		ldr	r2, [r1, #4]
 4027 0020 22F06002 		bic	r2, r2, #96
 4028 0024 4A60     		str	r2, [r1, #4]
2600:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4029              		.loc 1 2600 0
 4030 0026 C38E     		ldrh	r3, [r0, #54]
 4031 0028 9BB2     		uxth	r3, r3
 4032 002a 0BB1     		cbz	r3, .L510
 4033              	.LVL273:
 4034              	.L505:
 4035              	.LBE89:
 4036              	.LBE88:
2605:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4037              		.loc 1 2605 0
ARM GAS  /tmp/ccMJVeMK.s 			page 141


 4038 002c 10BC     		pop	{r4}
 4039              		.cfi_remember_state
 4040              		.cfi_restore 4
 4041              		.cfi_def_cfa_offset 0
 4042 002e 7047     		bx	lr
 4043              	.LVL274:
 4044              	.L510:
 4045              		.cfi_restore_state
 4046 0030 10BC     		pop	{r4}
 4047              		.cfi_restore 4
 4048              		.cfi_def_cfa_offset 0
 4049              	.LBB91:
 4050              	.LBB90:
2602:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4051              		.loc 1 2602 0
 4052 0032 FFF7FEBF 		b	SPI_CloseRxTx_ISR
 4053              	.LVL275:
 4054              	.LBE90:
 4055              	.LBE91:
 4056              		.cfi_endproc
 4057              	.LFE103:
 4059 0036 00BF     		.section	.text.SPI_2linesTxISR_16BIT,"ax",%progbits
 4060              		.align	1
 4061              		.p2align 2,,3
 4062              		.syntax unified
 4063              		.thumb
 4064              		.thumb_func
 4065              		.fpu softvfp
 4067              	SPI_2linesTxISR_16BIT:
 4068              	.LFB106:
2733:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 4069              		.loc 1 2733 0
 4070              		.cfi_startproc
 4071              		@ args = 0, pretend = 0, frame = 0
 4072              		@ frame_needed = 0, uses_anonymous_args = 0
 4073              		@ link register save eliminated.
 4074              	.LVL276:
2735:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
 4075              		.loc 1 2735 0
 4076 0000 016B     		ldr	r1, [r0, #48]
2733:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Transmit data in 16 Bit mode */
 4077              		.loc 1 2733 0
 4078 0002 10B4     		push	{r4}
 4079              		.cfi_def_cfa_offset 4
 4080              		.cfi_offset 4, -4
2735:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pTxBuffPtr += sizeof(uint16_t);
 4081              		.loc 1 2735 0
 4082 0004 31F8022B 		ldrh	r2, [r1], #2
 4083 0008 0468     		ldr	r4, [r0]
 4084 000a E260     		str	r2, [r4, #12]
2737:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4085              		.loc 1 2737 0
 4086 000c C28E     		ldrh	r2, [r0, #54]
2736:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount--;
 4087              		.loc 1 2736 0
 4088 000e 0163     		str	r1, [r0, #48]
2737:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 142


 4089              		.loc 1 2737 0
 4090 0010 013A     		subs	r2, r2, #1
 4091 0012 92B2     		uxth	r2, r2
 4092 0014 C286     		strh	r2, [r0, #54]	@ movhi
2740:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4093              		.loc 1 2740 0
 4094 0016 C28E     		ldrh	r2, [r0, #54]
 4095 0018 92B2     		uxth	r2, r2
 4096 001a 32B9     		cbnz	r2, .L511
2752:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4097              		.loc 1 2752 0
 4098 001c 6268     		ldr	r2, [r4, #4]
 4099 001e 22F08002 		bic	r2, r2, #128
 4100 0022 6260     		str	r2, [r4, #4]
2754:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4101              		.loc 1 2754 0
 4102 0024 C38F     		ldrh	r3, [r0, #62]
 4103 0026 9BB2     		uxth	r3, r3
 4104 0028 0BB1     		cbz	r3, .L516
 4105              	.L511:
2759:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4106              		.loc 1 2759 0
 4107 002a 10BC     		pop	{r4}
 4108              		.cfi_remember_state
 4109              		.cfi_restore 4
 4110              		.cfi_def_cfa_offset 0
 4111 002c 7047     		bx	lr
 4112              	.L516:
 4113              		.cfi_restore_state
 4114 002e 10BC     		pop	{r4}
 4115              		.cfi_restore 4
 4116              		.cfi_def_cfa_offset 0
2756:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4117              		.loc 1 2756 0
 4118 0030 FFF7FEBF 		b	SPI_CloseRxTx_ISR
 4119              	.LVL277:
 4120              		.cfi_endproc
 4121              	.LFE106:
 4123              		.section	.text.SPI_2linesRxISR_16BIT,"ax",%progbits
 4124              		.align	1
 4125              		.p2align 2,,3
 4126              		.syntax unified
 4127              		.thumb
 4128              		.thumb_func
 4129              		.fpu softvfp
 4131              	SPI_2linesRxISR_16BIT:
 4132              	.LFB105:
2675:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Receive data in 16 Bit mode */
 4133              		.loc 1 2675 0
 4134              		.cfi_startproc
 4135              		@ args = 0, pretend = 0, frame = 0
 4136              		@ frame_needed = 0, uses_anonymous_args = 0
 4137              		@ link register save eliminated.
 4138              	.LVL278:
 4139 0000 10B4     		push	{r4}
 4140              		.cfi_def_cfa_offset 4
 4141              		.cfi_offset 4, -4
ARM GAS  /tmp/ccMJVeMK.s 			page 143


2677:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->pRxBuffPtr += sizeof(uint16_t);
 4142              		.loc 1 2677 0
 4143 0002 0468     		ldr	r4, [r0]
 4144 0004 816B     		ldr	r1, [r0, #56]
 4145 0006 E268     		ldr	r2, [r4, #12]
 4146 0008 21F8022B 		strh	r2, [r1], #2	@ movhi
2679:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4147              		.loc 1 2679 0
 4148 000c C28F     		ldrh	r2, [r0, #62]
2678:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount--;
 4149              		.loc 1 2678 0
 4150 000e 8163     		str	r1, [r0, #56]
2679:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4151              		.loc 1 2679 0
 4152 0010 013A     		subs	r2, r2, #1
 4153 0012 92B2     		uxth	r2, r2
 4154 0014 C287     		strh	r2, [r0, #62]	@ movhi
2681:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4155              		.loc 1 2681 0
 4156 0016 C28F     		ldrh	r2, [r0, #62]
 4157 0018 92B2     		uxth	r2, r2
 4158 001a 32B9     		cbnz	r2, .L517
2692:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4159              		.loc 1 2692 0
 4160 001c 6268     		ldr	r2, [r4, #4]
 4161 001e 22F04002 		bic	r2, r2, #64
 4162 0022 6260     		str	r2, [r4, #4]
2694:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4163              		.loc 1 2694 0
 4164 0024 C38E     		ldrh	r3, [r0, #54]
 4165 0026 9BB2     		uxth	r3, r3
 4166 0028 0BB1     		cbz	r3, .L522
 4167              	.L517:
2699:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4168              		.loc 1 2699 0
 4169 002a 10BC     		pop	{r4}
 4170              		.cfi_remember_state
 4171              		.cfi_restore 4
 4172              		.cfi_def_cfa_offset 0
 4173 002c 7047     		bx	lr
 4174              	.L522:
 4175              		.cfi_restore_state
 4176 002e 10BC     		pop	{r4}
 4177              		.cfi_restore 4
 4178              		.cfi_def_cfa_offset 0
2696:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4179              		.loc 1 2696 0
 4180 0030 FFF7FEBF 		b	SPI_CloseRxTx_ISR
 4181              	.LVL279:
 4182              		.cfi_endproc
 4183              	.LFE105:
 4185              		.section	.text.SPI_DMAError,"ax",%progbits
 4186              		.align	1
 4187              		.p2align 2,,3
 4188              		.syntax unified
 4189              		.thumb
 4190              		.thumb_func
ARM GAS  /tmp/ccMJVeMK.s 			page 144


 4191              		.fpu softvfp
 4193              	SPI_DMAError:
 4194              	.LFB99:
2450:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = (SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 4195              		.loc 1 2450 0
 4196              		.cfi_startproc
 4197              		@ args = 0, pretend = 0, frame = 0
 4198              		@ frame_needed = 0, uses_anonymous_args = 0
 4199              	.LVL280:
 4200 0000 10B5     		push	{r4, lr}
 4201              		.cfi_def_cfa_offset 8
 4202              		.cfi_offset 4, -8
 4203              		.cfi_offset 14, -4
2457:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
 4204              		.loc 1 2457 0
 4205 0002 0124     		movs	r4, #1
2451:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4206              		.loc 1 2451 0
 4207 0004 436A     		ldr	r3, [r0, #36]
 4208              	.LVL281:
2454:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4209              		.loc 1 2454 0
 4210 0006 1968     		ldr	r1, [r3]
2458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4211              		.loc 1 2458 0
 4212 0008 1846     		mov	r0, r3
 4213              	.LVL282:
2454:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4214              		.loc 1 2454 0
 4215 000a 4A68     		ldr	r2, [r1, #4]
 4216 000c 22F00302 		bic	r2, r2, #3
 4217 0010 4A60     		str	r2, [r1, #4]
2456:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->State = HAL_SPI_STATE_READY;
 4218              		.loc 1 2456 0
 4219 0012 5A6D     		ldr	r2, [r3, #84]
 4220 0014 42F01002 		orr	r2, r2, #16
 4221 0018 5A65     		str	r2, [r3, #84]
2457:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   HAL_SPI_ErrorCallback(hspi);
 4222              		.loc 1 2457 0
 4223 001a 83F85140 		strb	r4, [r3, #81]
2458:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4224              		.loc 1 2458 0
 4225 001e FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4226              	.LVL283:
 4227 0022 10BD     		pop	{r4, pc}
 4228              		.cfi_endproc
 4229              	.LFE99:
 4231              		.section	.text.SPI_DMATransmitCplt,"ax",%progbits
 4232              		.align	1
 4233              		.p2align 2,,3
 4234              		.syntax unified
 4235              		.thumb
 4236              		.thumb_func
 4237              		.fpu softvfp
 4239              	SPI_DMATransmitCplt:
 4240              	.LFB93:
2216:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
ARM GAS  /tmp/ccMJVeMK.s 			page 145


 4241              		.loc 1 2216 0
 4242              		.cfi_startproc
 4243              		@ args = 0, pretend = 0, frame = 8
 4244              		@ frame_needed = 0, uses_anonymous_args = 0
 4245              	.LVL284:
 4246 0000 30B5     		push	{r4, r5, lr}
 4247              		.cfi_def_cfa_offset 12
 4248              		.cfi_offset 4, -12
 4249              		.cfi_offset 5, -8
 4250              		.cfi_offset 14, -4
 4251 0002 0546     		mov	r5, r0
 4252 0004 85B0     		sub	sp, sp, #20
 4253              		.cfi_def_cfa_offset 32
2217:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 4254              		.loc 1 2217 0
 4255 0006 446A     		ldr	r4, [r0, #36]
 4256              	.LVL285:
2221:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4257              		.loc 1 2221 0
 4258 0008 FFF7FEFF 		bl	HAL_GetTick
 4259              	.LVL286:
2224:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4260              		.loc 1 2224 0
 4261 000c 2B68     		ldr	r3, [r5]
 4262 000e 1A68     		ldr	r2, [r3]
 4263 0010 12F02002 		ands	r2, r2, #32
 4264 0014 23D1     		bne	.L526
2227:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4265              		.loc 1 2227 0
 4266 0016 2568     		ldr	r5, [r4]
 4267              	.LVL287:
 4268              	.LBB92:
 4269              	.LBB93:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4270              		.loc 1 2981 0
 4271 0018 6423     		movs	r3, #100
 4272              	.LBE93:
 4273              	.LBE92:
2227:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4274              		.loc 1 2227 0
 4275 001a 6968     		ldr	r1, [r5, #4]
 4276 001c 21F00201 		bic	r1, r1, #2
 4277 0020 6960     		str	r1, [r5, #4]
 4278              	.LVL288:
 4279              	.LBB95:
 4280              	.LBB94:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4281              		.loc 1 2981 0
 4282 0022 0090     		str	r0, [sp]
 4283 0024 8021     		movs	r1, #128
 4284 0026 2046     		mov	r0, r4
 4285              	.LVL289:
 4286 0028 FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 4287              	.LVL290:
 4288 002c 38B1     		cbz	r0, .L527
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 4289              		.loc 1 2983 0
ARM GAS  /tmp/ccMJVeMK.s 			page 146


 4290 002e 636D     		ldr	r3, [r4, #84]
 4291 0030 43F02003 		orr	r3, r3, #32
 4292 0034 6365     		str	r3, [r4, #84]
 4293              	.LVL291:
 4294              	.LBE94:
 4295              	.LBE95:
2232:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4296              		.loc 1 2232 0
 4297 0036 636D     		ldr	r3, [r4, #84]
 4298 0038 43F02003 		orr	r3, r3, #32
 4299 003c 6365     		str	r3, [r4, #84]
 4300              	.L527:
2236:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4301              		.loc 1 2236 0
 4302 003e A368     		ldr	r3, [r4, #8]
 4303 0040 33B9     		cbnz	r3, .L528
 4304              	.LBB96:
2238:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4305              		.loc 1 2238 0
 4306 0042 2268     		ldr	r2, [r4]
 4307 0044 0393     		str	r3, [sp, #12]
 4308 0046 D368     		ldr	r3, [r2, #12]
 4309 0048 0393     		str	r3, [sp, #12]
 4310 004a 9368     		ldr	r3, [r2, #8]
 4311 004c 0393     		str	r3, [sp, #12]
 4312 004e 039B     		ldr	r3, [sp, #12]
 4313              	.L528:
 4314              	.LBE96:
2242:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4315              		.loc 1 2242 0
 4316 0050 0123     		movs	r3, #1
2241:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
 4317              		.loc 1 2241 0
 4318 0052 0022     		movs	r2, #0
 4319 0054 E286     		strh	r2, [r4, #54]	@ movhi
2242:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4320              		.loc 1 2242 0
 4321 0056 84F85130 		strb	r3, [r4, #81]
2244:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4322              		.loc 1 2244 0
 4323 005a 636D     		ldr	r3, [r4, #84]
 4324 005c 23B9     		cbnz	r3, .L537
 4325              	.L526:
2250:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4326              		.loc 1 2250 0
 4327 005e 2046     		mov	r0, r4
 4328 0060 FFF7FEFF 		bl	HAL_SPI_TxCpltCallback
 4329              	.LVL292:
2251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4330              		.loc 1 2251 0
 4331 0064 05B0     		add	sp, sp, #20
 4332              		.cfi_remember_state
 4333              		.cfi_def_cfa_offset 12
 4334              		@ sp needed
 4335 0066 30BD     		pop	{r4, r5, pc}
 4336              	.LVL293:
 4337              	.L537:
ARM GAS  /tmp/ccMJVeMK.s 			page 147


 4338              		.cfi_restore_state
2246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
 4339              		.loc 1 2246 0
 4340 0068 2046     		mov	r0, r4
 4341 006a FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4342              	.LVL294:
2251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4343              		.loc 1 2251 0
 4344 006e 05B0     		add	sp, sp, #20
 4345              		.cfi_def_cfa_offset 12
 4346              		@ sp needed
 4347 0070 30BD     		pop	{r4, r5, pc}
 4348              		.cfi_endproc
 4349              	.LFE93:
 4351 0072 00BF     		.section	.text.SPI_DMAReceiveCplt,"ax",%progbits
 4352              		.align	1
 4353              		.p2align 2,,3
 4354              		.syntax unified
 4355              		.thumb
 4356              		.thumb_func
 4357              		.fpu softvfp
 4359              	SPI_DMAReceiveCplt:
 4360              	.LFB94:
2260:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 4361              		.loc 1 2260 0
 4362              		.cfi_startproc
 4363              		@ args = 0, pretend = 0, frame = 0
 4364              		@ frame_needed = 0, uses_anonymous_args = 0
 4365              	.LVL295:
 4366 0000 08B5     		push	{r3, lr}
 4367              		.cfi_def_cfa_offset 8
 4368              		.cfi_offset 3, -8
 4369              		.cfi_offset 14, -4
2270:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4370              		.loc 1 2270 0
 4371 0002 0368     		ldr	r3, [r0]
2261:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** #if (USE_SPI_CRC != 0U)
 4372              		.loc 1 2261 0
 4373 0004 406A     		ldr	r0, [r0, #36]
 4374              	.LVL296:
2270:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4375              		.loc 1 2270 0
 4376 0006 1B68     		ldr	r3, [r3]
 4377 0008 9B06     		lsls	r3, r3, #26
 4378 000a 0FD4     		bmi	.L539
2290:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4379              		.loc 1 2290 0
 4380 000c 0268     		ldr	r2, [r0]
2293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4381              		.loc 1 2293 0
 4382 000e 4168     		ldr	r1, [r0, #4]
2290:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4383              		.loc 1 2290 0
 4384 0010 5368     		ldr	r3, [r2, #4]
2293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4385              		.loc 1 2293 0
 4386 0012 B1F5827F 		cmp	r1, #260
ARM GAS  /tmp/ccMJVeMK.s 			page 148


2290:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4387              		.loc 1 2290 0
 4388 0016 23F00303 		bic	r3, r3, #3
 4389 001a 5360     		str	r3, [r2, #4]
2293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4390              		.loc 1 2293 0
 4391 001c 09D0     		beq	.L550
 4392              	.L540:
2300:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4393              		.loc 1 2300 0
 4394 001e 0123     		movs	r3, #1
2299:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
 4395              		.loc 1 2299 0
 4396 0020 0022     		movs	r2, #0
 4397 0022 C287     		strh	r2, [r0, #62]	@ movhi
2300:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4398              		.loc 1 2300 0
 4399 0024 80F85130 		strb	r3, [r0, #81]
2321:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4400              		.loc 1 2321 0
 4401 0028 436D     		ldr	r3, [r0, #84]
 4402 002a 73B9     		cbnz	r3, .L551
 4403              	.L539:
2327:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4404              		.loc 1 2327 0
 4405 002c FFF7FEFF 		bl	HAL_SPI_RxCpltCallback
 4406              	.LVL297:
 4407 0030 08BD     		pop	{r3, pc}
 4408              	.LVL298:
 4409              	.L550:
2293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4410              		.loc 1 2293 0 discriminator 1
 4411 0032 8368     		ldr	r3, [r0, #8]
 4412 0034 B3F5004F 		cmp	r3, #32768
 4413 0038 02D0     		beq	.L541
2293:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4414              		.loc 1 2293 0 is_stmt 0 discriminator 2
 4415 003a B3F5806F 		cmp	r3, #1024
 4416 003e EED1     		bne	.L540
 4417              	.L541:
2296:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4418              		.loc 1 2296 0 is_stmt 1
 4419 0040 1368     		ldr	r3, [r2]
 4420 0042 23F04003 		bic	r3, r3, #64
 4421 0046 1360     		str	r3, [r2]
 4422 0048 E9E7     		b	.L540
 4423              	.L551:
2323:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
 4424              		.loc 1 2323 0
 4425 004a FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4426              	.LVL299:
2324:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4427              		.loc 1 2324 0
 4428 004e 08BD     		pop	{r3, pc}
 4429              		.cfi_endproc
 4430              	.LFE94:
 4432              		.section	.text.SPI_DMATransmitReceiveCplt,"ax",%progbits
ARM GAS  /tmp/ccMJVeMK.s 			page 149


 4433              		.align	1
 4434              		.p2align 2,,3
 4435              		.syntax unified
 4436              		.thumb
 4437              		.thumb_func
 4438              		.fpu softvfp
 4440              	SPI_DMATransmitReceiveCplt:
 4441              	.LFB95:
2337:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 4442              		.loc 1 2337 0
 4443              		.cfi_startproc
 4444              		@ args = 0, pretend = 0, frame = 0
 4445              		@ frame_needed = 0, uses_anonymous_args = 0
 4446              	.LVL300:
 4447 0000 30B5     		push	{r4, r5, lr}
 4448              		.cfi_def_cfa_offset 12
 4449              		.cfi_offset 4, -12
 4450              		.cfi_offset 5, -8
 4451              		.cfi_offset 14, -4
 4452 0002 0546     		mov	r5, r0
 4453 0004 83B0     		sub	sp, sp, #12
 4454              		.cfi_def_cfa_offset 24
2338:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t tickstart = 0U;
 4455              		.loc 1 2338 0
 4456 0006 446A     		ldr	r4, [r0, #36]
 4457              	.LVL301:
2344:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4458              		.loc 1 2344 0
 4459 0008 FFF7FEFF 		bl	HAL_GetTick
 4460              	.LVL302:
2346:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4461              		.loc 1 2346 0
 4462 000c 2B68     		ldr	r3, [r5]
 4463 000e 1A68     		ldr	r2, [r3]
 4464 0010 12F02002 		ands	r2, r2, #32
 4465 0014 1BD1     		bne	.L553
 4466              	.LVL303:
 4467              	.LBB97:
 4468              	.LBB98:
2981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4469              		.loc 1 2981 0
 4470 0016 0090     		str	r0, [sp]
 4471 0018 6423     		movs	r3, #100
 4472 001a 8021     		movs	r1, #128
 4473 001c 2046     		mov	r0, r4
 4474              	.LVL304:
 4475 001e FFF7FEFF 		bl	SPI_WaitFlagStateUntilTimeout
 4476              	.LVL305:
 4477 0022 38B1     		cbz	r0, .L554
2983:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return HAL_TIMEOUT;
 4478              		.loc 1 2983 0
 4479 0024 636D     		ldr	r3, [r4, #84]
 4480 0026 43F02003 		orr	r3, r3, #32
 4481 002a 6365     		str	r3, [r4, #84]
 4482              	.LVL306:
 4483              	.LBE98:
 4484              	.LBE97:
ARM GAS  /tmp/ccMJVeMK.s 			page 150


2366:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4485              		.loc 1 2366 0
 4486 002c 636D     		ldr	r3, [r4, #84]
 4487 002e 43F02003 		orr	r3, r3, #32
 4488 0032 6365     		str	r3, [r4, #84]
 4489              	.L554:
2372:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxXferCount = 0U;
 4490              		.loc 1 2372 0
 4491 0034 0022     		movs	r2, #0
2374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4492              		.loc 1 2374 0
 4493 0036 0120     		movs	r0, #1
2370:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4494              		.loc 1 2370 0
 4495 0038 2168     		ldr	r1, [r4]
 4496 003a 4B68     		ldr	r3, [r1, #4]
 4497 003c 23F00303 		bic	r3, r3, #3
 4498 0040 4B60     		str	r3, [r1, #4]
2372:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->RxXferCount = 0U;
 4499              		.loc 1 2372 0
 4500 0042 E286     		strh	r2, [r4, #54]	@ movhi
2373:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->State = HAL_SPI_STATE_READY;
 4501              		.loc 1 2373 0
 4502 0044 E287     		strh	r2, [r4, #62]	@ movhi
2374:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4503              		.loc 1 2374 0
 4504 0046 84F85100 		strb	r0, [r4, #81]
2395:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4505              		.loc 1 2395 0
 4506 004a 636D     		ldr	r3, [r4, #84]
 4507 004c 23B9     		cbnz	r3, .L563
 4508              	.L553:
2401:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4509              		.loc 1 2401 0
 4510 004e 2046     		mov	r0, r4
 4511 0050 FFF7FEFF 		bl	HAL_SPI_TxRxCpltCallback
 4512              	.LVL307:
2402:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4513              		.loc 1 2402 0
 4514 0054 03B0     		add	sp, sp, #12
 4515              		.cfi_remember_state
 4516              		.cfi_def_cfa_offset 12
 4517              		@ sp needed
 4518 0056 30BD     		pop	{r4, r5, pc}
 4519              	.LVL308:
 4520              	.L563:
 4521              		.cfi_restore_state
2397:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       return;
 4522              		.loc 1 2397 0
 4523 0058 2046     		mov	r0, r4
 4524 005a FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4525              	.LVL309:
2402:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4526              		.loc 1 2402 0
 4527 005e 03B0     		add	sp, sp, #12
 4528              		.cfi_def_cfa_offset 12
 4529              		@ sp needed
ARM GAS  /tmp/ccMJVeMK.s 			page 151


 4530 0060 30BD     		pop	{r4, r5, pc}
 4531              		.cfi_endproc
 4532              	.LFE95:
 4534 0062 00BF     		.section	.text.HAL_SPI_IRQHandler,"ax",%progbits
 4535              		.align	1
 4536              		.p2align 2,,3
 4537              		.global	HAL_SPI_IRQHandler
 4538              		.syntax unified
 4539              		.thumb
 4540              		.thumb_func
 4541              		.fpu softvfp
 4543              	HAL_SPI_IRQHandler:
 4544              	.LFB82:
1948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
 4545              		.loc 1 1948 0
 4546              		.cfi_startproc
 4547              		@ args = 0, pretend = 0, frame = 16
 4548              		@ frame_needed = 0, uses_anonymous_args = 0
 4549              	.LVL310:
1949:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itflag   = hspi->Instance->SR;
 4550              		.loc 1 1949 0
 4551 0000 0268     		ldr	r2, [r0]
1948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
 4552              		.loc 1 1948 0
 4553 0002 30B5     		push	{r4, r5, lr}
 4554              		.cfi_def_cfa_offset 12
 4555              		.cfi_offset 4, -12
 4556              		.cfi_offset 5, -8
 4557              		.cfi_offset 14, -4
1949:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itflag   = hspi->Instance->SR;
 4558              		.loc 1 1949 0
 4559 0004 5168     		ldr	r1, [r2, #4]
 4560              	.LVL311:
1950:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4561              		.loc 1 1950 0
 4562 0006 9368     		ldr	r3, [r2, #8]
 4563              	.LVL312:
1948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
 4564              		.loc 1 1948 0
 4565 0008 85B0     		sub	sp, sp, #20
 4566              		.cfi_def_cfa_offset 32
1953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      ((itflag & SPI_FLAG_RXNE) != RESET) && ((itsource & SPI_IT_RXNE) != RESET))
 4567              		.loc 1 1953 0
 4568 000a 03F04105 		and	r5, r3, #65
 4569 000e 012D     		cmp	r5, #1
1948:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t itsource = hspi->Instance->CR2;
 4570              		.loc 1 1948 0
 4571 0010 0446     		mov	r4, r0
1953:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****      ((itflag & SPI_FLAG_RXNE) != RESET) && ((itsource & SPI_IT_RXNE) != RESET))
 4572              		.loc 1 1953 0
 4573 0012 4BD0     		beq	.L603
 4574              	.L565:
1961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4575              		.loc 1 1961 0
 4576 0014 9807     		lsls	r0, r3, #30
 4577              	.LVL313:
 4578 0016 43D4     		bmi	.L604
ARM GAS  /tmp/ccMJVeMK.s 			page 152


 4579              	.L567:
1968:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4580              		.loc 1 1968 0
 4581 0018 13F0600F 		tst	r3, #96
 4582 001c 3ED0     		beq	.L564
1968:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4583              		.loc 1 1968 0 is_stmt 0 discriminator 1
 4584 001e 8806     		lsls	r0, r1, #26
 4585 0020 3CD5     		bpl	.L564
1971:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4586              		.loc 1 1971 0 is_stmt 1
 4587 0022 5D06     		lsls	r5, r3, #25
 4588 0024 0ED5     		bpl	.L570
1973:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4589              		.loc 1 1973 0
 4590 0026 94F85100 		ldrb	r0, [r4, #81]	@ zero_extendqisi2
 4591 002a 0328     		cmp	r0, #3
 4592 002c 47D0     		beq	.L571
 4593              	.LBB99:
1976:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4594              		.loc 1 1976 0
 4595 002e 0025     		movs	r5, #0
 4596              	.LBE99:
1975:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         __HAL_SPI_CLEAR_OVRFLAG(hspi);
 4597              		.loc 1 1975 0
 4598 0030 606D     		ldr	r0, [r4, #84]
 4599 0032 40F00400 		orr	r0, r0, #4
 4600 0036 6065     		str	r0, [r4, #84]
 4601              	.LBB100:
1976:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4602              		.loc 1 1976 0
 4603 0038 0195     		str	r5, [sp, #4]
 4604 003a D068     		ldr	r0, [r2, #12]
 4605 003c 0190     		str	r0, [sp, #4]
 4606 003e 9068     		ldr	r0, [r2, #8]
 4607 0040 0190     		str	r0, [sp, #4]
 4608 0042 0198     		ldr	r0, [sp, #4]
 4609              	.L570:
 4610              	.LBE100:
1986:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4611              		.loc 1 1986 0
 4612 0044 9806     		lsls	r0, r3, #26
 4613 0046 0CD5     		bpl	.L572
 4614              	.LBB101:
1989:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4615              		.loc 1 1989 0
 4616 0048 0020     		movs	r0, #0
 4617              	.LBE101:
1988:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       __HAL_SPI_CLEAR_MODFFLAG(hspi);
 4618              		.loc 1 1988 0
 4619 004a 636D     		ldr	r3, [r4, #84]
 4620              	.LVL314:
 4621 004c 43F00103 		orr	r3, r3, #1
 4622 0050 6365     		str	r3, [r4, #84]
 4623              	.LBB102:
1989:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4624              		.loc 1 1989 0
ARM GAS  /tmp/ccMJVeMK.s 			page 153


 4625 0052 0390     		str	r0, [sp, #12]
 4626 0054 9368     		ldr	r3, [r2, #8]
 4627 0056 0393     		str	r3, [sp, #12]
 4628 0058 1368     		ldr	r3, [r2]
 4629 005a 23F04003 		bic	r3, r3, #64
 4630 005e 1360     		str	r3, [r2]
 4631 0060 039B     		ldr	r3, [sp, #12]
 4632              	.L572:
 4633              	.LBE102:
1992:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4634              		.loc 1 1992 0
 4635 0062 636D     		ldr	r3, [r4, #84]
 4636 0064 D3B1     		cbz	r3, .L564
1997:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable the SPI DMA requests if enabled */
 4637              		.loc 1 1997 0
 4638 0066 0120     		movs	r0, #1
1995:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4639              		.loc 1 1995 0
 4640 0068 5368     		ldr	r3, [r2, #4]
 4641 006a 23F0E003 		bic	r3, r3, #224
 4642 006e 5360     		str	r3, [r2, #4]
1999:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4643              		.loc 1 1999 0
 4644 0070 8B07     		lsls	r3, r1, #30
1997:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       /* Disable the SPI DMA requests if enabled */
 4645              		.loc 1 1997 0
 4646 0072 84F85100 		strb	r0, [r4, #81]
1999:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4647              		.loc 1 1999 0
 4648 0076 1ED0     		beq	.L573
2001:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4649              		.loc 1 2001 0
 4650 0078 5368     		ldr	r3, [r2, #4]
2004:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 4651              		.loc 1 2004 0
 4652 007a E16C     		ldr	r1, [r4, #76]
 4653              	.LVL315:
2001:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4654              		.loc 1 2001 0
 4655 007c 23F00303 		bic	r3, r3, #3
 4656 0080 5360     		str	r3, [r2, #4]
2004:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 4657              		.loc 1 2004 0
 4658 0082 21B1     		cbz	r1, .L574
2008:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmarx);
 4659              		.loc 1 2008 0
 4660 0084 124B     		ldr	r3, .L605
2009:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 4661              		.loc 1 2009 0
 4662 0086 0846     		mov	r0, r1
2008:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmarx);
 4663              		.loc 1 2008 0
 4664 0088 4B63     		str	r3, [r1, #52]
2009:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 4665              		.loc 1 2009 0
 4666 008a FFF7FEFF 		bl	HAL_DMA_Abort_IT
 4667              	.LVL316:
ARM GAS  /tmp/ccMJVeMK.s 			page 154


 4668              	.L574:
2012:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         {
 4669              		.loc 1 2012 0
 4670 008e A36C     		ldr	r3, [r4, #72]
 4671 0090 23B1     		cbz	r3, .L564
2016:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmatx);
 4672              		.loc 1 2016 0
 4673 0092 0F4A     		ldr	r2, .L605
2017:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 4674              		.loc 1 2017 0
 4675 0094 1846     		mov	r0, r3
2016:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****           HAL_DMA_Abort_IT(hspi->hdmatx);
 4676              		.loc 1 2016 0
 4677 0096 5A63     		str	r2, [r3, #52]
2017:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         }
 4678              		.loc 1 2017 0
 4679 0098 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 4680              	.LVL317:
 4681              	.L564:
2028:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4682              		.loc 1 2028 0
 4683 009c 05B0     		add	sp, sp, #20
 4684              		.cfi_remember_state
 4685              		.cfi_def_cfa_offset 12
 4686              		@ sp needed
 4687 009e 30BD     		pop	{r4, r5, pc}
 4688              	.LVL318:
 4689              	.L604:
 4690              		.cfi_restore_state
1961:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4691              		.loc 1 1961 0 discriminator 1
 4692 00a0 0D06     		lsls	r5, r1, #24
 4693 00a2 B9D5     		bpl	.L567
1963:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return;
 4694              		.loc 1 1963 0
 4695 00a4 636C     		ldr	r3, [r4, #68]
 4696              	.LVL319:
 4697 00a6 2046     		mov	r0, r4
 4698 00a8 9847     		blx	r3
 4699              	.LVL320:
1964:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 4700              		.loc 1 1964 0
 4701 00aa F7E7     		b	.L564
 4702              	.LVL321:
 4703              	.L603:
1954:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4704              		.loc 1 1954 0
 4705 00ac 4D06     		lsls	r5, r1, #25
 4706 00ae B1D5     		bpl	.L565
1956:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     return;
 4707              		.loc 1 1956 0
 4708 00b0 036C     		ldr	r3, [r0, #64]
 4709              	.LVL322:
 4710 00b2 9847     		blx	r3
 4711              	.LVL323:
1957:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 4712              		.loc 1 1957 0
ARM GAS  /tmp/ccMJVeMK.s 			page 155


 4713 00b4 F2E7     		b	.L564
 4714              	.LVL324:
 4715              	.L573:
2023:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4716              		.loc 1 2023 0
 4717 00b6 2046     		mov	r0, r4
 4718 00b8 FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4719              	.LVL325:
 4720 00bc EEE7     		b	.L564
 4721              	.LVL326:
 4722              	.L571:
 4723              	.LBB103:
1980:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         return;
 4724              		.loc 1 1980 0
 4725 00be 0023     		movs	r3, #0
 4726              	.LVL327:
 4727 00c0 0293     		str	r3, [sp, #8]
 4728 00c2 D368     		ldr	r3, [r2, #12]
 4729 00c4 0293     		str	r3, [sp, #8]
 4730 00c6 9368     		ldr	r3, [r2, #8]
 4731 00c8 0293     		str	r3, [sp, #8]
 4732 00ca 029B     		ldr	r3, [sp, #8]
 4733              	.LBE103:
1981:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4734              		.loc 1 1981 0
 4735 00cc E6E7     		b	.L564
 4736              	.L606:
 4737 00ce 00BF     		.align	2
 4738              	.L605:
 4739 00d0 00000000 		.word	SPI_DMAAbortOnError
 4740              		.cfi_endproc
 4741              	.LFE82:
 4743              		.section	.text.SPI_DMAAbortOnError,"ax",%progbits
 4744              		.align	1
 4745              		.p2align 2,,3
 4746              		.syntax unified
 4747              		.thumb
 4748              		.thumb_func
 4749              		.fpu softvfp
 4751              	SPI_DMAAbortOnError:
 4752              	.LFB100:
2468:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 4753              		.loc 1 2468 0
 4754              		.cfi_startproc
 4755              		@ args = 0, pretend = 0, frame = 0
 4756              		@ frame_needed = 0, uses_anonymous_args = 0
 4757              	.LVL328:
2470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 4758              		.loc 1 2470 0
 4759 0000 0022     		movs	r2, #0
2468:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 4760              		.loc 1 2468 0
 4761 0002 08B5     		push	{r3, lr}
 4762              		.cfi_def_cfa_offset 8
 4763              		.cfi_offset 3, -8
 4764              		.cfi_offset 14, -4
2469:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->RxXferCount = 0U;
ARM GAS  /tmp/ccMJVeMK.s 			page 156


 4765              		.loc 1 2469 0
 4766 0004 436A     		ldr	r3, [r0, #36]
 4767              	.LVL329:
2470:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 4768              		.loc 1 2470 0
 4769 0006 DA87     		strh	r2, [r3, #62]	@ movhi
2473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4770              		.loc 1 2473 0
 4771 0008 1846     		mov	r0, r3
 4772              	.LVL330:
2471:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4773              		.loc 1 2471 0
 4774 000a DA86     		strh	r2, [r3, #54]	@ movhi
2473:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 4775              		.loc 1 2473 0
 4776 000c FFF7FEFF 		bl	HAL_SPI_ErrorCallback
 4777              	.LVL331:
 4778 0010 08BD     		pop	{r3, pc}
 4779              		.cfi_endproc
 4780              	.LFE100:
 4782 0012 00BF     		.section	.text.HAL_SPI_AbortCpltCallback,"ax",%progbits
 4783              		.align	1
 4784              		.p2align 2,,3
 4785              		.weak	HAL_SPI_AbortCpltCallback
 4786              		.syntax unified
 4787              		.thumb
 4788              		.thumb_func
 4789              		.fpu softvfp
 4791              	HAL_SPI_AbortCpltCallback:
 4792              	.LFB90:
2144:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
 4793              		.loc 1 2144 0
 4794              		.cfi_startproc
 4795              		@ args = 0, pretend = 0, frame = 0
 4796              		@ frame_needed = 0, uses_anonymous_args = 0
 4797              		@ link register save eliminated.
 4798              	.LVL332:
 4799 0000 7047     		bx	lr
 4800              		.cfi_endproc
 4801              	.LFE90:
 4803 0002 00BF     		.section	.text.HAL_SPI_Abort_IT,"ax",%progbits
 4804              		.align	1
 4805              		.p2align 2,,3
 4806              		.global	HAL_SPI_Abort_IT
 4807              		.syntax unified
 4808              		.thumb
 4809              		.thumb_func
 4810              		.fpu softvfp
 4812              	HAL_SPI_Abort_IT:
 4813              	.LFB78:
1732:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t abortcplt;
 4814              		.loc 1 1732 0
 4815              		.cfi_startproc
 4816              		@ args = 0, pretend = 0, frame = 8
 4817              		@ frame_needed = 0, uses_anonymous_args = 0
 4818              	.LVL333:
1732:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t abortcplt;
ARM GAS  /tmp/ccMJVeMK.s 			page 157


 4819              		.loc 1 1732 0
 4820 0000 30B5     		push	{r4, r5, lr}
 4821              		.cfi_def_cfa_offset 12
 4822              		.cfi_offset 4, -12
 4823              		.cfi_offset 5, -8
 4824              		.cfi_offset 14, -4
 4825 0002 0446     		mov	r4, r0
1736:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4826              		.loc 1 1736 0
 4827 0004 0368     		ldr	r3, [r0]
1732:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   uint32_t abortcplt;
 4828              		.loc 1 1732 0
 4829 0006 83B0     		sub	sp, sp, #12
 4830              		.cfi_def_cfa_offset 24
1736:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4831              		.loc 1 1736 0
 4832 0008 5A68     		ldr	r2, [r3, #4]
 4833 000a 1006     		lsls	r0, r2, #24
 4834              	.LVL334:
1738:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 4835              		.loc 1 1738 0
 4836 000c 48BF     		it	mi
 4837 000e 3B4A     		ldrmi	r2, .L666
1754:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4838              		.loc 1 1754 0
 4839 0010 A06C     		ldr	r0, [r4, #72]
1738:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 4840              		.loc 1 1738 0
 4841 0012 48BF     		it	mi
 4842 0014 6264     		strmi	r2, [r4, #68]
1741:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4843              		.loc 1 1741 0
 4844 0016 5A68     		ldr	r2, [r3, #4]
 4845 0018 5106     		lsls	r1, r2, #25
1743:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 4846              		.loc 1 1743 0
 4847 001a 44BF     		itt	mi
 4848 001c 384A     		ldrmi	r2, .L666+4
 4849 001e 2264     		strmi	r2, [r4, #64]
1747:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4850              		.loc 1 1747 0
 4851 0020 5A68     		ldr	r2, [r3, #4]
 4852 0022 22F02002 		bic	r2, r2, #32
 4853 0026 5A60     		str	r2, [r3, #4]
 4854              	.LVL335:
1754:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4855              		.loc 1 1754 0
 4856 0028 28B1     		cbz	r0, .L613
1758:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4857              		.loc 1 1758 0
 4858 002a 5A68     		ldr	r2, [r3, #4]
 4859 002c 12F00202 		ands	r2, r2, #2
1760:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4860              		.loc 1 1760 0
 4861 0030 18BF     		it	ne
 4862 0032 344A     		ldrne	r2, .L666+8
1764:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
ARM GAS  /tmp/ccMJVeMK.s 			page 158


 4863              		.loc 1 1764 0
 4864 0034 4263     		str	r2, [r0, #52]
 4865              	.L613:
1768:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4866              		.loc 1 1768 0
 4867 0036 E16C     		ldr	r1, [r4, #76]
 4868 0038 29B1     		cbz	r1, .L615
1772:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4869              		.loc 1 1772 0
 4870 003a 5A68     		ldr	r2, [r3, #4]
 4871 003c 12F00102 		ands	r2, r2, #1
1774:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4872              		.loc 1 1774 0
 4873 0040 18BF     		it	ne
 4874 0042 314A     		ldrne	r2, .L666+12
1778:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     }
 4875              		.loc 1 1778 0
 4876 0044 4A63     		str	r2, [r1, #52]
 4877              	.L615:
1783:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4878              		.loc 1 1783 0
 4879 0046 5A68     		ldr	r2, [r3, #4]
 4880 0048 9207     		lsls	r2, r2, #30
 4881 004a 02D5     		bpl	.L630
1783:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4882              		.loc 1 1783 0 is_stmt 0 discriminator 1
 4883 004c 5A68     		ldr	r2, [r3, #4]
 4884 004e D507     		lsls	r5, r2, #31
 4885 0050 24D4     		bmi	.L663
 4886              	.L630:
1749:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 4887              		.loc 1 1749 0 is_stmt 1
 4888 0052 0125     		movs	r5, #1
 4889              	.LVL336:
 4890              	.L617:
1815:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4891              		.loc 1 1815 0
 4892 0054 5A68     		ldr	r2, [r3, #4]
 4893 0056 9107     		lsls	r1, r2, #30
 4894 0058 10D5     		bpl	.L622
1818:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4895              		.loc 1 1818 0
 4896 005a A06C     		ldr	r0, [r4, #72]
 4897 005c 70B1     		cbz	r0, .L622
1821:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4898              		.loc 1 1821 0
 4899 005e FFF7FEFF 		bl	HAL_DMA_Abort_IT
 4900              	.LVL337:
 4901 0062 38B9     		cbnz	r0, .L664
 4902              	.LVL338:
1832:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4903              		.loc 1 1832 0
 4904 0064 2368     		ldr	r3, [r4]
 4905 0066 5B68     		ldr	r3, [r3, #4]
 4906 0068 DB07     		lsls	r3, r3, #31
 4907 006a 14D5     		bpl	.L651
1835:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
ARM GAS  /tmp/ccMJVeMK.s 			page 159


 4908              		.loc 1 1835 0
 4909 006c E36C     		ldr	r3, [r4, #76]
 4910 006e 93B1     		cbz	r3, .L651
1827:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4911              		.loc 1 1827 0
 4912 0070 0546     		mov	r5, r0
 4913 0072 08E0     		b	.L628
 4914              	.LVL339:
 4915              	.L664:
1823:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4916              		.loc 1 1823 0
 4917 0074 0021     		movs	r1, #0
 4918 0076 A26C     		ldr	r2, [r4, #72]
 4919 0078 2368     		ldr	r3, [r4]
 4920 007a 5163     		str	r1, [r2, #52]
 4921              	.L622:
1832:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4922              		.loc 1 1832 0
 4923 007c 5B68     		ldr	r3, [r3, #4]
 4924 007e DA07     		lsls	r2, r3, #31
 4925 0080 08D5     		bpl	.L624
1835:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4926              		.loc 1 1835 0
 4927 0082 E36C     		ldr	r3, [r4, #76]
 4928 0084 33B1     		cbz	r3, .L624
 4929              	.LVL340:
 4930              	.L628:
1838:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4931              		.loc 1 1838 0
 4932 0086 1846     		mov	r0, r3
 4933 0088 FFF7FEFF 		bl	HAL_DMA_Abort_IT
 4934              	.LVL341:
 4935 008c 18B1     		cbz	r0, .L651
1840:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4936              		.loc 1 1840 0
 4937 008e 0022     		movs	r2, #0
 4938 0090 E36C     		ldr	r3, [r4, #76]
 4939 0092 5A63     		str	r2, [r3, #52]
 4940              	.L624:
 4941              	.LVL342:
1849:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 4942              		.loc 1 1849 0
 4943 0094 95B9     		cbnz	r5, .L665
 4944              	.LVL343:
 4945              	.L651:
1868:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4946              		.loc 1 1868 0
 4947 0096 0020     		movs	r0, #0
 4948 0098 03B0     		add	sp, sp, #12
 4949              		.cfi_remember_state
 4950              		.cfi_def_cfa_offset 12
 4951              		@ sp needed
 4952 009a 30BD     		pop	{r4, r5, pc}
 4953              	.LVL344:
 4954              	.L663:
 4955              		.cfi_restore_state
1786:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
ARM GAS  /tmp/ccMJVeMK.s 			page 160


 4956              		.loc 1 1786 0
 4957 009c 60B1     		cbz	r0, .L631
1789:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4958              		.loc 1 1789 0
 4959 009e FFF7FEFF 		bl	HAL_DMA_Abort_IT
 4960              	.LVL345:
 4961 00a2 F0B9     		cbnz	r0, .L619
1795:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4962              		.loc 1 1795 0
 4963 00a4 0546     		mov	r5, r0
 4964 00a6 E16C     		ldr	r1, [r4, #76]
 4965              	.L618:
 4966              	.LVL346:
1799:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 4967              		.loc 1 1799 0
 4968 00a8 21B1     		cbz	r1, .L662
1802:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       {
 4969              		.loc 1 1802 0
 4970 00aa 0846     		mov	r0, r1
 4971 00ac FFF7FEFF 		bl	HAL_DMA_Abort_IT
 4972              	.LVL347:
 4973 00b0 E8B9     		cbnz	r0, .L621
1809:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 4974              		.loc 1 1809 0
 4975 00b2 0546     		mov	r5, r0
 4976              	.LVL348:
 4977              	.L662:
 4978 00b4 2368     		ldr	r3, [r4]
 4979 00b6 CDE7     		b	.L617
 4980              	.LVL349:
 4981              	.L631:
1749:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 4982              		.loc 1 1749 0
 4983 00b8 0125     		movs	r5, #1
 4984 00ba F5E7     		b	.L618
 4985              	.LVL350:
 4986              	.L665:
1852:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxXferCount = 0U;
 4987              		.loc 1 1852 0
 4988 00bc 0023     		movs	r3, #0
 4989              	.LBB104:
1859:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4990              		.loc 1 1859 0
 4991 00be 2268     		ldr	r2, [r4]
 4992              	.LBE104:
1852:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     hspi->TxXferCount = 0U;
 4993              		.loc 1 1852 0
 4994 00c0 E387     		strh	r3, [r4, #62]	@ movhi
1853:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4995              		.loc 1 1853 0
 4996 00c2 E386     		strh	r3, [r4, #54]	@ movhi
1856:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 4997              		.loc 1 1856 0
 4998 00c4 6365     		str	r3, [r4, #84]
 4999              	.LBB105:
1859:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5000              		.loc 1 1859 0
ARM GAS  /tmp/ccMJVeMK.s 			page 161


 5001 00c6 0193     		str	r3, [sp, #4]
 5002 00c8 D368     		ldr	r3, [r2, #12]
 5003              	.LBE105:
1865:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 5004              		.loc 1 1865 0
 5005 00ca 2046     		mov	r0, r4
 5006              	.LBB106:
1859:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5007              		.loc 1 1859 0
 5008 00cc 0193     		str	r3, [sp, #4]
 5009 00ce 9368     		ldr	r3, [r2, #8]
 5010 00d0 0193     		str	r3, [sp, #4]
 5011 00d2 019B     		ldr	r3, [sp, #4]
 5012              	.LBE106:
1862:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5013              		.loc 1 1862 0
 5014 00d4 84F85150 		strb	r5, [r4, #81]
1865:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   }
 5015              		.loc 1 1865 0
 5016 00d8 FFF7FEFF 		bl	HAL_SPI_AbortCpltCallback
 5017              	.LVL351:
1868:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5018              		.loc 1 1868 0
 5019 00dc 0020     		movs	r0, #0
 5020 00de 03B0     		add	sp, sp, #12
 5021              		.cfi_remember_state
 5022              		.cfi_def_cfa_offset 12
 5023              		@ sp needed
 5024 00e0 30BD     		pop	{r4, r5, pc}
 5025              	.LVL352:
 5026              	.L619:
 5027              		.cfi_restore_state
1791:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 5028              		.loc 1 1791 0
 5029 00e2 0022     		movs	r2, #0
 5030 00e4 A36C     		ldr	r3, [r4, #72]
 5031 00e6 E16C     		ldr	r1, [r4, #76]
1749:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
 5032              		.loc 1 1749 0
 5033 00e8 0125     		movs	r5, #1
1791:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 5034              		.loc 1 1791 0
 5035 00ea 5A63     		str	r2, [r3, #52]
 5036 00ec DCE7     		b	.L618
 5037              	.LVL353:
 5038              	.L621:
1804:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 1U;
 5039              		.loc 1 1804 0
 5040 00ee 0021     		movs	r1, #0
 5041 00f0 E26C     		ldr	r2, [r4, #76]
 5042 00f2 2368     		ldr	r3, [r4]
1805:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       }
 5043              		.loc 1 1805 0
 5044 00f4 0125     		movs	r5, #1
 5045              	.LVL354:
1804:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****         abortcplt = 1U;
 5046              		.loc 1 1804 0
ARM GAS  /tmp/ccMJVeMK.s 			page 162


 5047 00f6 5163     		str	r1, [r2, #52]
 5048              	.LVL355:
 5049 00f8 ACE7     		b	.L617
 5050              	.L667:
 5051 00fa 00BF     		.align	2
 5052              	.L666:
 5053 00fc 00000000 		.word	SPI_AbortTx_ISR
 5054 0100 00000000 		.word	SPI_AbortRx_ISR
 5055 0104 00000000 		.word	SPI_DMATxAbortCallback
 5056 0108 00000000 		.word	SPI_DMARxAbortCallback
 5057              		.cfi_endproc
 5058              	.LFE78:
 5060              		.section	.text.SPI_DMARxAbortCallback,"ax",%progbits
 5061              		.align	1
 5062              		.p2align 2,,3
 5063              		.syntax unified
 5064              		.thumb
 5065              		.thumb_func
 5066              		.fpu softvfp
 5068              	SPI_DMARxAbortCallback:
 5069              	.LFB102:
2537:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 5070              		.loc 1 2537 0
 5071              		.cfi_startproc
 5072              		@ args = 0, pretend = 0, frame = 8
 5073              		@ frame_needed = 0, uses_anonymous_args = 0
 5074              	.LVL356:
 5075 0000 30B5     		push	{r4, r5, lr}
 5076              		.cfi_def_cfa_offset 12
 5077              		.cfi_offset 4, -12
 5078              		.cfi_offset 5, -8
 5079              		.cfi_offset 14, -4
2543:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5080              		.loc 1 2543 0
 5081 0002 0025     		movs	r5, #0
2538:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5082              		.loc 1 2538 0
 5083 0004 426A     		ldr	r2, [r0, #36]
 5084              	.LVL357:
2537:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 5085              		.loc 1 2537 0
 5086 0006 83B0     		sub	sp, sp, #12
 5087              		.cfi_def_cfa_offset 24
2541:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5088              		.loc 1 2541 0
 5089 0008 1368     		ldr	r3, [r2]
2543:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5090              		.loc 1 2543 0
 5091 000a D46C     		ldr	r4, [r2, #76]
2541:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5092              		.loc 1 2541 0
 5093 000c 1968     		ldr	r1, [r3]
2549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 5094              		.loc 1 2549 0
 5095 000e 906C     		ldr	r0, [r2, #72]
 5096              	.LVL358:
2541:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
ARM GAS  /tmp/ccMJVeMK.s 			page 163


 5097              		.loc 1 2541 0
 5098 0010 21F04001 		bic	r1, r1, #64
 5099 0014 1960     		str	r1, [r3]
2546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5100              		.loc 1 2546 0
 5101 0016 5968     		ldr	r1, [r3, #4]
2543:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5102              		.loc 1 2543 0
 5103 0018 6563     		str	r5, [r4, #52]
2546:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5104              		.loc 1 2546 0
 5105 001a 21F00101 		bic	r1, r1, #1
 5106 001e 5960     		str	r1, [r3, #4]
2549:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 5107              		.loc 1 2549 0
 5108 0020 18B1     		cbz	r0, .L669
2551:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 5109              		.loc 1 2551 0
 5110 0022 416B     		ldr	r1, [r0, #52]
 5111 0024 09B1     		cbz	r1, .L669
2572:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5112              		.loc 1 2572 0
 5113 0026 03B0     		add	sp, sp, #12
 5114              		.cfi_remember_state
 5115              		.cfi_def_cfa_offset 12
 5116              		@ sp needed
 5117 0028 30BD     		pop	{r4, r5, pc}
 5118              	.L669:
 5119              		.cfi_restore_state
2558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 5120              		.loc 1 2558 0
 5121 002a 0021     		movs	r1, #0
2568:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5122              		.loc 1 2568 0
 5123 002c 0124     		movs	r4, #1
2558:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 5124              		.loc 1 2558 0
 5125 002e D187     		strh	r1, [r2, #62]	@ movhi
2559:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5126              		.loc 1 2559 0
 5127 0030 D186     		strh	r1, [r2, #54]	@ movhi
2562:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5128              		.loc 1 2562 0
 5129 0032 5165     		str	r1, [r2, #84]
 5130              	.LBB107:
2565:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5131              		.loc 1 2565 0
 5132 0034 0191     		str	r1, [sp, #4]
 5133 0036 D968     		ldr	r1, [r3, #12]
 5134              	.LBE107:
2571:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5135              		.loc 1 2571 0
 5136 0038 1046     		mov	r0, r2
 5137              	.LBB108:
2565:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5138              		.loc 1 2565 0
 5139 003a 0191     		str	r1, [sp, #4]
ARM GAS  /tmp/ccMJVeMK.s 			page 164


 5140 003c 9B68     		ldr	r3, [r3, #8]
 5141 003e 0193     		str	r3, [sp, #4]
 5142 0040 019B     		ldr	r3, [sp, #4]
 5143              	.LBE108:
2568:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5144              		.loc 1 2568 0
 5145 0042 82F85140 		strb	r4, [r2, #81]
2571:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5146              		.loc 1 2571 0
 5147 0046 FFF7FEFF 		bl	HAL_SPI_AbortCpltCallback
 5148              	.LVL359:
2572:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5149              		.loc 1 2572 0
 5150 004a 03B0     		add	sp, sp, #12
 5151              		.cfi_def_cfa_offset 12
 5152              		@ sp needed
 5153 004c 30BD     		pop	{r4, r5, pc}
 5154              		.cfi_endproc
 5155              	.LFE102:
 5157 004e 00BF     		.section	.text.SPI_DMATxAbortCallback,"ax",%progbits
 5158              		.align	1
 5159              		.p2align 2,,3
 5160              		.syntax unified
 5161              		.thumb
 5162              		.thumb_func
 5163              		.fpu softvfp
 5165              	SPI_DMATxAbortCallback:
 5166              	.LFB101:
2485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 5167              		.loc 1 2485 0
 5168              		.cfi_startproc
 5169              		@ args = 0, pretend = 0, frame = 8
 5170              		@ frame_needed = 0, uses_anonymous_args = 0
 5171              	.LVL360:
2486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 5172              		.loc 1 2486 0
 5173 0000 6422     		movs	r2, #100
2485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 5174              		.loc 1 2485 0
 5175 0002 30B5     		push	{r4, r5, lr}
 5176              		.cfi_def_cfa_offset 12
 5177              		.cfi_offset 4, -12
 5178              		.cfi_offset 5, -8
 5179              		.cfi_offset 14, -4
2489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5180              		.loc 1 2489 0
 5181 0004 0025     		movs	r5, #0
2486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 5182              		.loc 1 2486 0
 5183 0006 184B     		ldr	r3, .L687
 5184 0008 1849     		ldr	r1, .L687+4
 5185 000a 1B68     		ldr	r3, [r3]
2487:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5186              		.loc 1 2487 0
 5187 000c 446A     		ldr	r4, [r0, #36]
 5188              	.LVL361:
2486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
ARM GAS  /tmp/ccMJVeMK.s 			page 165


 5189              		.loc 1 2486 0
 5190 000e A1FB0313 		umull	r1, r3, r1, r3
 5191 0012 5B0A     		lsrs	r3, r3, #9
 5192 0014 02FB03F3 		mul	r3, r2, r3
2492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5193              		.loc 1 2492 0
 5194 0018 2168     		ldr	r1, [r4]
2485:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   __IO uint32_t count = SPI_DEFAULT_TIMEOUT * (SystemCoreClock / 24U / 1000U);
 5195              		.loc 1 2485 0
 5196 001a 83B0     		sub	sp, sp, #12
 5197              		.cfi_def_cfa_offset 24
2486:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   SPI_HandleTypeDef* hspi = ( SPI_HandleTypeDef* )((DMA_HandleTypeDef* )hdma)->Parent;
 5198              		.loc 1 2486 0
 5199 001c 0193     		str	r3, [sp, #4]
2492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5200              		.loc 1 2492 0
 5201 001e 4B68     		ldr	r3, [r1, #4]
2489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5202              		.loc 1 2489 0
 5203 0020 A26C     		ldr	r2, [r4, #72]
2492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5204              		.loc 1 2492 0
 5205 0022 23F00203 		bic	r3, r3, #2
2489:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5206              		.loc 1 2489 0
 5207 0026 5563     		str	r5, [r2, #52]
2492:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5208              		.loc 1 2492 0
 5209 0028 4B60     		str	r3, [r1, #4]
 5210 002a 02E0     		b	.L678
 5211              	.L676:
2503:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5212              		.loc 1 2503 0
 5213 002c 8B68     		ldr	r3, [r1, #8]
 5214 002e 9B07     		lsls	r3, r3, #30
 5215 0030 08D4     		bmi	.L677
 5216              	.L678:
2497:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 5217              		.loc 1 2497 0
 5218 0032 019B     		ldr	r3, [sp, #4]
 5219 0034 5A1E     		subs	r2, r3, #1
 5220 0036 0192     		str	r2, [sp, #4]
 5221 0038 002B     		cmp	r3, #0
 5222 003a F7D1     		bne	.L676
2499:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****       break;
 5223              		.loc 1 2499 0
 5224 003c 636D     		ldr	r3, [r4, #84]
 5225 003e 43F02003 		orr	r3, r3, #32
 5226 0042 6365     		str	r3, [r4, #84]
 5227              	.L677:
2506:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   {
 5228              		.loc 1 2506 0
 5229 0044 E36C     		ldr	r3, [r4, #76]
 5230 0046 1BB1     		cbz	r3, .L679
2508:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****     {
 5231              		.loc 1 2508 0
 5232 0048 5B6B     		ldr	r3, [r3, #52]
ARM GAS  /tmp/ccMJVeMK.s 			page 166


 5233 004a 0BB1     		cbz	r3, .L679
2526:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5234              		.loc 1 2526 0
 5235 004c 03B0     		add	sp, sp, #12
 5236              		.cfi_remember_state
 5237              		.cfi_def_cfa_offset 12
 5238              		@ sp needed
 5239 004e 30BD     		pop	{r4, r5, pc}
 5240              	.LVL362:
 5241              	.L679:
 5242              		.cfi_restore_state
2515:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 5243              		.loc 1 2515 0
 5244 0050 0023     		movs	r3, #0
2522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5245              		.loc 1 2522 0
 5246 0052 0122     		movs	r2, #1
2515:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   hspi->TxXferCount = 0U;
 5247              		.loc 1 2515 0
 5248 0054 E387     		strh	r3, [r4, #62]	@ movhi
2525:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5249              		.loc 1 2525 0
 5250 0056 2046     		mov	r0, r4
 5251              	.LVL363:
2516:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5252              		.loc 1 2516 0
 5253 0058 E386     		strh	r3, [r4, #54]	@ movhi
2519:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5254              		.loc 1 2519 0
 5255 005a 6365     		str	r3, [r4, #84]
2522:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5256              		.loc 1 2522 0
 5257 005c 84F85120 		strb	r2, [r4, #81]
2525:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5258              		.loc 1 2525 0
 5259 0060 FFF7FEFF 		bl	HAL_SPI_AbortCpltCallback
 5260              	.LVL364:
2526:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5261              		.loc 1 2526 0
 5262 0064 03B0     		add	sp, sp, #12
 5263              		.cfi_def_cfa_offset 12
 5264              		@ sp needed
 5265 0066 30BD     		pop	{r4, r5, pc}
 5266              	.LVL365:
 5267              	.L688:
 5268              		.align	2
 5269              	.L687:
 5270 0068 00000000 		.word	SystemCoreClock
 5271 006c F1197605 		.word	91625969
 5272              		.cfi_endproc
 5273              	.LFE101:
 5275              		.section	.text.HAL_SPI_GetState,"ax",%progbits
 5276              		.align	1
 5277              		.p2align 2,,3
 5278              		.global	HAL_SPI_GetState
 5279              		.syntax unified
 5280              		.thumb
ARM GAS  /tmp/ccMJVeMK.s 			page 167


 5281              		.thumb_func
 5282              		.fpu softvfp
 5284              	HAL_SPI_GetState:
 5285              	.LFB91:
2179:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Return SPI handle state */
 5286              		.loc 1 2179 0
 5287              		.cfi_startproc
 5288              		@ args = 0, pretend = 0, frame = 0
 5289              		@ frame_needed = 0, uses_anonymous_args = 0
 5290              		@ link register save eliminated.
 5291              	.LVL366:
2181:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5292              		.loc 1 2181 0
 5293 0000 90F85100 		ldrb	r0, [r0, #81]	@ zero_extendqisi2
 5294              	.LVL367:
2182:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5295              		.loc 1 2182 0
 5296 0004 7047     		bx	lr
 5297              		.cfi_endproc
 5298              	.LFE91:
 5300 0006 00BF     		.section	.text.HAL_SPI_GetError,"ax",%progbits
 5301              		.align	1
 5302              		.p2align 2,,3
 5303              		.global	HAL_SPI_GetError
 5304              		.syntax unified
 5305              		.thumb
 5306              		.thumb_func
 5307              		.fpu softvfp
 5309              	HAL_SPI_GetError:
 5310              	.LFB92:
2191:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Return SPI ErrorCode */
 5311              		.loc 1 2191 0
 5312              		.cfi_startproc
 5313              		@ args = 0, pretend = 0, frame = 0
 5314              		@ frame_needed = 0, uses_anonymous_args = 0
 5315              		@ link register save eliminated.
 5316              	.LVL368:
2193:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5317              		.loc 1 2193 0
 5318 0000 406D     		ldr	r0, [r0, #84]
 5319              	.LVL369:
2194:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
 5320              		.loc 1 2194 0
 5321 0002 7047     		bx	lr
 5322              		.cfi_endproc
 5323              	.LFE92:
 5325              		.section	.text.SPI_ISCRCErrorValid,"ax",%progbits
 5326              		.align	1
 5327              		.p2align 2,,3
 5328              		.weak	SPI_ISCRCErrorValid
 5329              		.syntax unified
 5330              		.thumb
 5331              		.thumb_func
 5332              		.fpu softvfp
 5334              	SPI_ISCRCErrorValid:
 5335              	.LFB118:
3237:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
ARM GAS  /tmp/ccMJVeMK.s 			page 168


3238:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** 
3239:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** /**
3240:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @brief  Checks if encountered CRC error could be corresponding to wrongly detected errors 
3241:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *         according to SPI instance, Device type, and revision ID.
3242:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @param  hspi: pointer to a SPI_HandleTypeDef structure that contains
3243:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   *               the configuration information for SPI module.
3244:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   * @retval CRC error validity (SPI_INVALID_CRC_ERROR or SPI_VALID_CRC_ERROR).  
3245:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** */
3246:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** __weak uint8_t SPI_ISCRCErrorValid(SPI_HandleTypeDef *hspi)
3247:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** {
 5336              		.loc 1 3247 0
 5337              		.cfi_startproc
 5338              		@ args = 0, pretend = 0, frame = 0
 5339              		@ frame_needed = 0, uses_anonymous_args = 0
 5340              		@ link register save eliminated.
 5341              	.LVL370:
3248:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   /* Prevent unused argument(s) compilation warning */
3249:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   UNUSED(hspi);
3250:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   
3251:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c ****   return (SPI_VALID_CRC_ERROR);
3252:drivers/STM32F1xx_HAL_Driver/Src/stm32f1xx_hal_spi.c **** }
 5342              		.loc 1 3252 0
 5343 0000 0120     		movs	r0, #1
 5344              	.LVL371:
 5345 0002 7047     		bx	lr
 5346              		.cfi_endproc
 5347              	.LFE118:
 5349              		.text
 5350              	.Letext0:
 5351              		.file 2 "/home/vdykyy/Install/STM-32/gcc-arm-none-eabi-6-2017-q2-update/lib/gcc/arm-none-eabi/6.3.
 5352              		.file 3 "drivers/CMSIS/Include/core_cm3.h"
 5353              		.file 4 "drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 5354              		.file 5 "drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 5355              		.file 6 "/home/vdykyy/Install/STM-32/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/
 5356              		.file 7 "/home/vdykyy/Install/STM-32/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/
 5357              		.file 8 "/home/vdykyy/Install/STM-32/gcc-arm-none-eabi-6-2017-q2-update/lib/gcc/arm-none-eabi/6.3.
 5358              		.file 9 "/home/vdykyy/Install/STM-32/gcc-arm-none-eabi-6-2017-q2-update/arm-none-eabi/include/sys/
 5359              		.file 10 "drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 5360              		.file 11 "drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 5361              		.file 12 "drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 5362              		.file 13 "drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_spi.h"
 5363              		.file 14 "drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
ARM GAS  /tmp/ccMJVeMK.s 			page 169


DEFINED SYMBOLS
                            *ABS*:0000000000000000 stm32f1xx_hal_spi.c
     /tmp/ccMJVeMK.s:16     .text.SPI_AbortRx_ISR:0000000000000000 $t
     /tmp/ccMJVeMK.s:23     .text.SPI_AbortRx_ISR:0000000000000000 SPI_AbortRx_ISR
     /tmp/ccMJVeMK.s:100    .text.SPI_AbortRx_ISR:0000000000000054 $d
     /tmp/ccMJVeMK.s:106    .text.SPI_AbortTx_ISR:0000000000000000 $t
     /tmp/ccMJVeMK.s:113    .text.SPI_AbortTx_ISR:0000000000000000 SPI_AbortTx_ISR
     /tmp/ccMJVeMK.s:135    .text.SPI_WaitFlagStateUntilTimeout:0000000000000000 $t
     /tmp/ccMJVeMK.s:142    .text.SPI_WaitFlagStateUntilTimeout:0000000000000000 SPI_WaitFlagStateUntilTimeout
     /tmp/ccMJVeMK.s:258    .text.HAL_SPI_TransmitReceive.part.1:0000000000000000 $t
     /tmp/ccMJVeMK.s:265    .text.HAL_SPI_TransmitReceive.part.1:0000000000000000 HAL_SPI_TransmitReceive.part.1
     /tmp/ccMJVeMK.s:663    .text.HAL_SPI_TransmitReceive_IT.part.2:0000000000000000 $t
     /tmp/ccMJVeMK.s:670    .text.HAL_SPI_TransmitReceive_IT.part.2:0000000000000000 HAL_SPI_TransmitReceive_IT.part.2
     /tmp/ccMJVeMK.s:825    .text.HAL_SPI_TransmitReceive_IT.part.2:0000000000000098 $d
     /tmp/ccMJVeMK.s:4131   .text.SPI_2linesRxISR_16BIT:0000000000000000 SPI_2linesRxISR_16BIT
     /tmp/ccMJVeMK.s:4067   .text.SPI_2linesTxISR_16BIT:0000000000000000 SPI_2linesTxISR_16BIT
     /tmp/ccMJVeMK.s:3994   .text.SPI_2linesRxISR_8BIT:0000000000000000 SPI_2linesRxISR_8BIT
     /tmp/ccMJVeMK.s:3921   .text.SPI_2linesTxISR_8BIT:0000000000000000 SPI_2linesTxISR_8BIT
     /tmp/ccMJVeMK.s:833    .text.HAL_SPI_TransmitReceive_DMA.part.3:0000000000000000 $t
     /tmp/ccMJVeMK.s:840    .text.HAL_SPI_TransmitReceive_DMA.part.3:0000000000000000 HAL_SPI_TransmitReceive_DMA.part.3
     /tmp/ccMJVeMK.s:1034   .text.HAL_SPI_TransmitReceive_DMA.part.3:00000000000000e4 $d
     /tmp/ccMJVeMK.s:3228   .text.SPI_DMAHalfReceiveCplt:0000000000000000 SPI_DMAHalfReceiveCplt
     /tmp/ccMJVeMK.s:4359   .text.SPI_DMAReceiveCplt:0000000000000000 SPI_DMAReceiveCplt
     /tmp/ccMJVeMK.s:3276   .text.SPI_DMAHalfTransmitReceiveCplt:0000000000000000 SPI_DMAHalfTransmitReceiveCplt
     /tmp/ccMJVeMK.s:4440   .text.SPI_DMATransmitReceiveCplt:0000000000000000 SPI_DMATransmitReceiveCplt
     /tmp/ccMJVeMK.s:4193   .text.SPI_DMAError:0000000000000000 SPI_DMAError
     /tmp/ccMJVeMK.s:1043   .text.HAL_SPI_MspInit:0000000000000000 $t
     /tmp/ccMJVeMK.s:1051   .text.HAL_SPI_MspInit:0000000000000000 HAL_SPI_MspInit
     /tmp/ccMJVeMK.s:1062   .text.HAL_SPI_Init:0000000000000000 $t
     /tmp/ccMJVeMK.s:1070   .text.HAL_SPI_Init:0000000000000000 HAL_SPI_Init
     /tmp/ccMJVeMK.s:1187   .text.HAL_SPI_MspDeInit:0000000000000000 $t
     /tmp/ccMJVeMK.s:1195   .text.HAL_SPI_MspDeInit:0000000000000000 HAL_SPI_MspDeInit
     /tmp/ccMJVeMK.s:1206   .text.HAL_SPI_DeInit:0000000000000000 $t
     /tmp/ccMJVeMK.s:1214   .text.HAL_SPI_DeInit:0000000000000000 HAL_SPI_DeInit
     /tmp/ccMJVeMK.s:1264   .text.HAL_SPI_Transmit:0000000000000000 $t
     /tmp/ccMJVeMK.s:1272   .text.HAL_SPI_Transmit:0000000000000000 HAL_SPI_Transmit
     /tmp/ccMJVeMK.s:1588   .text.HAL_SPI_Receive:0000000000000000 $t
     /tmp/ccMJVeMK.s:1596   .text.HAL_SPI_Receive:0000000000000000 HAL_SPI_Receive
     /tmp/ccMJVeMK.s:1886   .text.HAL_SPI_TransmitReceive:0000000000000000 $t
     /tmp/ccMJVeMK.s:1894   .text.HAL_SPI_TransmitReceive:0000000000000000 HAL_SPI_TransmitReceive
     /tmp/ccMJVeMK.s:1935   .text.HAL_SPI_Transmit_IT:0000000000000000 $t
     /tmp/ccMJVeMK.s:1943   .text.HAL_SPI_Transmit_IT:0000000000000000 HAL_SPI_Transmit_IT
     /tmp/ccMJVeMK.s:2089   .text.HAL_SPI_Transmit_IT:000000000000009c $d
     /tmp/ccMJVeMK.s:3469   .text.SPI_TxISR_8BIT:0000000000000000 SPI_TxISR_8BIT
     /tmp/ccMJVeMK.s:3521   .text.SPI_TxISR_16BIT:0000000000000000 SPI_TxISR_16BIT
     /tmp/ccMJVeMK.s:2095   .text.HAL_SPI_Receive_IT:0000000000000000 $t
     /tmp/ccMJVeMK.s:2103   .text.HAL_SPI_Receive_IT:0000000000000000 HAL_SPI_Receive_IT
     /tmp/ccMJVeMK.s:2304   .text.HAL_SPI_Receive_IT:00000000000000b4 $d
     /tmp/ccMJVeMK.s:3666   .text.SPI_RxISR_8BIT:0000000000000000 SPI_RxISR_8BIT
     /tmp/ccMJVeMK.s:3718   .text.SPI_RxISR_16BIT:0000000000000000 SPI_RxISR_16BIT
     /tmp/ccMJVeMK.s:2310   .text.HAL_SPI_TransmitReceive_IT:0000000000000000 $t
     /tmp/ccMJVeMK.s:2318   .text.HAL_SPI_TransmitReceive_IT:0000000000000000 HAL_SPI_TransmitReceive_IT
     /tmp/ccMJVeMK.s:2353   .text.HAL_SPI_Transmit_DMA:0000000000000000 $t
     /tmp/ccMJVeMK.s:2361   .text.HAL_SPI_Transmit_DMA:0000000000000000 HAL_SPI_Transmit_DMA
     /tmp/ccMJVeMK.s:2507   .text.HAL_SPI_Transmit_DMA:00000000000000a0 $d
     /tmp/ccMJVeMK.s:3180   .text.SPI_DMAHalfTransmitCplt:0000000000000000 SPI_DMAHalfTransmitCplt
     /tmp/ccMJVeMK.s:4239   .text.SPI_DMATransmitCplt:0000000000000000 SPI_DMATransmitCplt
ARM GAS  /tmp/ccMJVeMK.s 			page 170


     /tmp/ccMJVeMK.s:2514   .text.HAL_SPI_Receive_DMA:0000000000000000 $t
     /tmp/ccMJVeMK.s:2522   .text.HAL_SPI_Receive_DMA:0000000000000000 HAL_SPI_Receive_DMA
     /tmp/ccMJVeMK.s:2720   .text.HAL_SPI_Receive_DMA:00000000000000d0 $d
     /tmp/ccMJVeMK.s:2727   .text.HAL_SPI_TransmitReceive_DMA:0000000000000000 $t
     /tmp/ccMJVeMK.s:2735   .text.HAL_SPI_TransmitReceive_DMA:0000000000000000 HAL_SPI_TransmitReceive_DMA
     /tmp/ccMJVeMK.s:2770   .text.HAL_SPI_Abort:0000000000000000 $t
     /tmp/ccMJVeMK.s:2778   .text.HAL_SPI_Abort:0000000000000000 HAL_SPI_Abort
     /tmp/ccMJVeMK.s:2929   .text.HAL_SPI_Abort:00000000000000bc $d
     /tmp/ccMJVeMK.s:2937   .text.HAL_SPI_DMAPause:0000000000000000 $t
     /tmp/ccMJVeMK.s:2945   .text.HAL_SPI_DMAPause:0000000000000000 HAL_SPI_DMAPause
     /tmp/ccMJVeMK.s:2990   .text.HAL_SPI_DMAResume:0000000000000000 $t
     /tmp/ccMJVeMK.s:2998   .text.HAL_SPI_DMAResume:0000000000000000 HAL_SPI_DMAResume
     /tmp/ccMJVeMK.s:3043   .text.HAL_SPI_DMAStop:0000000000000000 $t
     /tmp/ccMJVeMK.s:3051   .text.HAL_SPI_DMAStop:0000000000000000 HAL_SPI_DMAStop
     /tmp/ccMJVeMK.s:3097   .text.HAL_SPI_TxCpltCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3105   .text.HAL_SPI_TxCpltCallback:0000000000000000 HAL_SPI_TxCpltCallback
     /tmp/ccMJVeMK.s:3116   .text.HAL_SPI_RxCpltCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3124   .text.HAL_SPI_RxCpltCallback:0000000000000000 HAL_SPI_RxCpltCallback
     /tmp/ccMJVeMK.s:3135   .text.HAL_SPI_TxRxCpltCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3143   .text.HAL_SPI_TxRxCpltCallback:0000000000000000 HAL_SPI_TxRxCpltCallback
     /tmp/ccMJVeMK.s:3154   .text.HAL_SPI_TxHalfCpltCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3162   .text.HAL_SPI_TxHalfCpltCallback:0000000000000000 HAL_SPI_TxHalfCpltCallback
     /tmp/ccMJVeMK.s:3173   .text.SPI_DMAHalfTransmitCplt:0000000000000000 $t
     /tmp/ccMJVeMK.s:3202   .text.HAL_SPI_RxHalfCpltCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3210   .text.HAL_SPI_RxHalfCpltCallback:0000000000000000 HAL_SPI_RxHalfCpltCallback
     /tmp/ccMJVeMK.s:3221   .text.SPI_DMAHalfReceiveCplt:0000000000000000 $t
     /tmp/ccMJVeMK.s:3250   .text.HAL_SPI_TxRxHalfCpltCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3258   .text.HAL_SPI_TxRxHalfCpltCallback:0000000000000000 HAL_SPI_TxRxHalfCpltCallback
     /tmp/ccMJVeMK.s:3269   .text.SPI_DMAHalfTransmitReceiveCplt:0000000000000000 $t
     /tmp/ccMJVeMK.s:3298   .text.HAL_SPI_ErrorCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:3306   .text.HAL_SPI_ErrorCallback:0000000000000000 HAL_SPI_ErrorCallback
     /tmp/ccMJVeMK.s:3317   .text.SPI_CloseTx_ISR:0000000000000000 $t
     /tmp/ccMJVeMK.s:3324   .text.SPI_CloseTx_ISR:0000000000000000 SPI_CloseTx_ISR
     /tmp/ccMJVeMK.s:3456   .text.SPI_CloseTx_ISR:0000000000000090 $d
     /tmp/ccMJVeMK.s:3462   .text.SPI_TxISR_8BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:3514   .text.SPI_TxISR_16BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:3569   .text.SPI_CloseRx_ISR:0000000000000000 $t
     /tmp/ccMJVeMK.s:3576   .text.SPI_CloseRx_ISR:0000000000000000 SPI_CloseRx_ISR
     /tmp/ccMJVeMK.s:3659   .text.SPI_RxISR_8BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:3711   .text.SPI_RxISR_16BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:3752   .text.SPI_CloseRxTx_ISR:0000000000000000 $t
     /tmp/ccMJVeMK.s:3759   .text.SPI_CloseRxTx_ISR:0000000000000000 SPI_CloseRxTx_ISR
     /tmp/ccMJVeMK.s:3908   .text.SPI_CloseRxTx_ISR:00000000000000ac $d
     /tmp/ccMJVeMK.s:3914   .text.SPI_2linesTxISR_8BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:3987   .text.SPI_2linesRxISR_8BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:4060   .text.SPI_2linesTxISR_16BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:4124   .text.SPI_2linesRxISR_16BIT:0000000000000000 $t
     /tmp/ccMJVeMK.s:4186   .text.SPI_DMAError:0000000000000000 $t
     /tmp/ccMJVeMK.s:4232   .text.SPI_DMATransmitCplt:0000000000000000 $t
     /tmp/ccMJVeMK.s:4352   .text.SPI_DMAReceiveCplt:0000000000000000 $t
     /tmp/ccMJVeMK.s:4433   .text.SPI_DMATransmitReceiveCplt:0000000000000000 $t
     /tmp/ccMJVeMK.s:4535   .text.HAL_SPI_IRQHandler:0000000000000000 $t
     /tmp/ccMJVeMK.s:4543   .text.HAL_SPI_IRQHandler:0000000000000000 HAL_SPI_IRQHandler
     /tmp/ccMJVeMK.s:4739   .text.HAL_SPI_IRQHandler:00000000000000d0 $d
     /tmp/ccMJVeMK.s:4751   .text.SPI_DMAAbortOnError:0000000000000000 SPI_DMAAbortOnError
     /tmp/ccMJVeMK.s:4744   .text.SPI_DMAAbortOnError:0000000000000000 $t
     /tmp/ccMJVeMK.s:4783   .text.HAL_SPI_AbortCpltCallback:0000000000000000 $t
ARM GAS  /tmp/ccMJVeMK.s 			page 171


     /tmp/ccMJVeMK.s:4791   .text.HAL_SPI_AbortCpltCallback:0000000000000000 HAL_SPI_AbortCpltCallback
     /tmp/ccMJVeMK.s:4804   .text.HAL_SPI_Abort_IT:0000000000000000 $t
     /tmp/ccMJVeMK.s:4812   .text.HAL_SPI_Abort_IT:0000000000000000 HAL_SPI_Abort_IT
     /tmp/ccMJVeMK.s:5053   .text.HAL_SPI_Abort_IT:00000000000000fc $d
     /tmp/ccMJVeMK.s:5165   .text.SPI_DMATxAbortCallback:0000000000000000 SPI_DMATxAbortCallback
     /tmp/ccMJVeMK.s:5068   .text.SPI_DMARxAbortCallback:0000000000000000 SPI_DMARxAbortCallback
     /tmp/ccMJVeMK.s:5061   .text.SPI_DMARxAbortCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:5158   .text.SPI_DMATxAbortCallback:0000000000000000 $t
     /tmp/ccMJVeMK.s:5270   .text.SPI_DMATxAbortCallback:0000000000000068 $d
     /tmp/ccMJVeMK.s:5276   .text.HAL_SPI_GetState:0000000000000000 $t
     /tmp/ccMJVeMK.s:5284   .text.HAL_SPI_GetState:0000000000000000 HAL_SPI_GetState
     /tmp/ccMJVeMK.s:5301   .text.HAL_SPI_GetError:0000000000000000 $t
     /tmp/ccMJVeMK.s:5309   .text.HAL_SPI_GetError:0000000000000000 HAL_SPI_GetError
     /tmp/ccMJVeMK.s:5326   .text.SPI_ISCRCErrorValid:0000000000000000 $t
     /tmp/ccMJVeMK.s:5334   .text.SPI_ISCRCErrorValid:0000000000000000 SPI_ISCRCErrorValid
                     .debug_frame:0000000000000010 $d
                           .group:0000000000000000 wm4.0.8ddc6fc9299f63009459649d6a7e7c51
                           .group:0000000000000000 wm4.main.h.40.54e5213d35853f8debd8cd48178ac5c1
                           .group:0000000000000000 wm4.stm32f1xx_hal_conf.h.52.96cb61986c8bfeb3a4fa629a7a7441f6
                           .group:0000000000000000 wm4.stm32f1xx.h.57.c2a10934f4c6830aeb7e4997f02806f1
                           .group:0000000000000000 wm4.stm32f103xb.h.56.66305a77cea9d5300aac997a78930076
                           .group:0000000000000000 wm4.stdintgcc.h.29.6d480f4ba0f60596e88234283d42444f
                           .group:0000000000000000 wm4.core_cm3.h.74.7d5fecd6d4522d755d10a23d1542f805
                           .group:0000000000000000 wm4.cmsis_gcc.h.36.67d2dcde6a14ff518eedc1d545d89a76
                           .group:0000000000000000 wm4.core_cm3.h.175.a6c441adf1a05ce96eea3cf78e6687ab
                           .group:0000000000000000 wm4.stm32f103xb.h.619.382b3c85cac6f0350ee5bfaff32e1ebc
                           .group:0000000000000000 wm4.stm32f1xx.h.180.c0013e6ebd6ad07f67c298190b8eac92
                           .group:0000000000000000 wm4._newlib_version.h.4.3572908597b70d672d181fc7fc501c19
                           .group:0000000000000000 wm4.newlib.h.21.59901f4bf241ab46c63694665baa7297
                           .group:0000000000000000 wm4.features.h.22.5cdadbb3efe495d1c9e38350b8c376c7
                           .group:0000000000000000 wm4.config.h.219.65a553ab5bef5482f0d7880b0d33015e
                           .group:0000000000000000 wm4._ansi.h.23.9f8fcfa20193763fcf364fb91705c94b
                           .group:0000000000000000 wm4.stdio.h.31.7c0e28c411445f3f9c5b11accf882760
                           .group:0000000000000000 wm4._default_types.h.6.959254cf5f09734ea7516c89e8bb21bd
                           .group:0000000000000000 wm4.stddef.h.187.2ff233552538c6ff9b8575ca8ea52cb3
                           .group:0000000000000000 wm4.cdefs.h.47.e658329a094974ebad41b40c60502de7
                           .group:0000000000000000 wm4.stddef.h.39.ec95e8feac892e292b69dc7ae75b0d64
                           .group:0000000000000000 wm4.stdarg.h.34.3a23a216c0c293b3d2ea2e89281481e6
                           .group:0000000000000000 wm4.lock.h.2.1461d1fff82dffe8bfddc23307f6484f
                           .group:0000000000000000 wm4._types.h.125.5cf8a495f1f7ef36777ad868a1e32068
                           .group:0000000000000000 wm4.stddef.h.161.5349cb105733e8777bfb0cf53c4e3f34
                           .group:0000000000000000 wm4._types.h.183.c226d164ceca1f2ecb9ae9360c54a098
                           .group:0000000000000000 wm4.reent.h.17.23b059516345f8f5abfa01ddc379570f
                           .group:0000000000000000 wm4.types.h.40.e8c16e7ec36ba55f133d0616070e25fc
                           .group:0000000000000000 wm4._stdint.h.10.c24fa3af3bc1706662bb5593a907e841
                           .group:0000000000000000 wm4._endian.h.31.65a10590763c3dde1ac4a7f66d7d4891
                           .group:0000000000000000 wm4.endian.h.9.49f3a4695c1b61e8a0808de3c4a106cb
                           .group:0000000000000000 wm4._timeval.h.30.0e8bfd94e85db17dda3286ee81496fe6
                           .group:0000000000000000 wm4.timespec.h.41.d855182eb0e690443ab8651bcedca6e1
                           .group:0000000000000000 wm4.select.h.30.bbece7fa40993a78092dcc5805132560
                           .group:0000000000000000 wm4.types.h.69.ed3eae3cf73030a737515151ebcab7a1
                           .group:0000000000000000 wm4.stdio.h.2.4aa87247282eca6c8f36f9de33d8df1a
                           .group:0000000000000000 wm4.stdio.h.81.8188691c2279eac7a223caa50f6694b9
                           .group:0000000000000000 wm4.stm32f1xx_hal_def.h.77.f54bfbbe3e3696aae97b05a3f338caf7
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc.h.112.09261d6ad0eef5abae6b9147d0cf5cbf
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc_ex.h.40.bb785d717afc4d2d2b63a3608cb5a0c5
                           .group:0000000000000000 wm4.stm32f1xx_hal_rcc.h.1219.902328474751456408f7d18f6caace93
ARM GAS  /tmp/ccMJVeMK.s 			page 172


                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio.h.40.f1cf5d2dd589e1675a9fcd6b008c2bb6
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio_ex.h.40.30d74584c89dcd3d86d10bdbbb06cc31
                           .group:0000000000000000 wm4.stm32f1xx_hal_gpio.h.281.b26a95114b989e6edaf48d72c8710b9d
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma.h.40.b1d5b41c58b583c31c61335e4c8e1bdd
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma_ex.h.40.7ac05bbf95f5a25a3f4a9b9c2a14f835
                           .group:0000000000000000 wm4.stm32f1xx_hal_dma.h.427.daddf65c60854feb2dc9660a62f55b8c
                           .group:0000000000000000 wm4.stm32f1xx_hal_cortex.h.40.4f649a8bf316b7aa5d02077abd9b8999
                           .group:0000000000000000 wm4.stm32f1xx_hal_adc.h.40.3ad40e622f0cef64228eb182e4bbe00f
                           .group:0000000000000000 wm4.stm32f1xx_hal_adc_ex.h.40.3118796521817cc82626257e9c7ab79c
                           .group:0000000000000000 wm4.stm32f1xx_hal_flash.h.40.12aaef98e1fbb85e3a8f79f98532d04a
                           .group:0000000000000000 wm4.stm32f1xx_hal_flash_ex.h.40.ad66c77e153bc5a4a1d60e46727f4ae5
                           .group:0000000000000000 wm4.stm32f1xx_hal_pwr.h.40.ecccf9071314b0ab3f6ffcfd7c596e95
                           .group:0000000000000000 wm4.stm32f1xx_hal_spi.h.40.5dd367ee94b0bb430a3842862fe7d7da
                           .group:0000000000000000 wm4.stm32f1xx_hal_tim.h.40.ac3feb225ff72b119eeddfe8acac07a3
                           .group:0000000000000000 wm4.stm32f1xx_hal_tim_ex.h.40.9b926a51c24898708ad2e47fd5ff9d32
                           .group:0000000000000000 wm4.stm32f1xx_hal_uart.h.40.9914ca79b81d8b23b4e5425c156b0acd
                           .group:0000000000000000 wm4.stm32f1xx_hal.h.82.f2fd9c01c6f8c9e676a37d84eb9dc553

UNDEFINED SYMBOLS
SystemCoreClock
HAL_GetTick
HAL_DMA_Start_IT
HAL_DMA_Abort
HAL_DMA_Abort_IT
